!function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=19)}([function(e,t,r){"use strict";r.r(t),t.default=function(e){var t=document.createElement("div");return t.ondragstart=function(){return!1},t.classList.add(e),t}},function(e,t,r){"use strict";r.r(t);var n=function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<r;t++)for(var s=arguments[t],a=0,o=s.length;a<o;a++,i++)n[i]=s[a];return n},i=function(){function e(){this.observers=[]}return e.prototype.addObserver=function(e){if("function"!=typeof e)throw new Error("observer must be a function");this.observers.map((function(t){if(t===e)throw new Error("observer already in the list")})),this.observers.push(e)},e.prototype.removeObserver=function(e){for(var t=0;t<this.observers.length;t++){if(this.observers[t]===e)return void this.observers.splice(t,1)}throw new Error("could not find observer in list of observers")},e.prototype.notifyObservers=function(){n(this.observers).map((function(e){return e()}))},e.prototype.notifyObserversData=function(e){n(this.observers).map((function(t){return t(e)}))},e}();t.default=i},function(e,t,r){"use strict";r.r(t),r.d(t,"defaultParameters",(function(){return n}));var n={minValue:0,maxValue:1e3,step:1,isRange:!1,isVertical:!1,showLabel:!1,isFloat:!1}},function(e,t,r){"use strict";r.r(t);var n=function(){function e(){}return e.parsing=function(e){if("number"==typeof e)return e;if("string"==typeof e){if(/^-?\d+[\.,]\d+$/.test(e))return parseFloat(e);if(/^-?\d+$/.test(e))return parseInt(e)}return null},e}();t.default=n},function(e,t,r){"use strict";r.r(t);var n=r(0),i=function(e){var t=this;this.getPosition=function(){return t.isVertical?t.elem.getBoundingClientRect().top:t.elem.getBoundingClientRect().left},this.getDimension=function(){return t.isVertical?t.elem.getBoundingClientRect().height:t.elem.getBoundingClientRect().width},this.init=function(e){t.isVertical=e,t.isVertical?t.elem.classList.add("slider__scale_position_vertical"):t.elem.classList.remove("slider__scale_position_vertical")},this.elem=Object(n.default)("slider__scale"),this.isVertical=e};t.default=i},function(e,t,r){"use strict";r.r(t);var n=r(9),i=r(1),s=function(e,t){var r=this;this.init=function(e){r.parameters=e,r.moveMarks()},this.createMarks=function(){for(var e=function(e){var t=new n.default(r.parameters.isVertical);r.marks.push(t),t.observers.addObserver((function(){return r.onClickMarkHandler(t)}))},t=0;t<5;t++)e()},this.onClickMarkHandler=function(e){r.observers.notifyObserversData(e.value)},this.moveMarks=function(){r.marks.map((function(e,t){if(e.init(r.parameters.isVertical),0===t)e.setPosition(0,r.parameters.minValue);else if(t===r.marks.length-1)e.setPosition(100,r.parameters.maxValue);else{var n=r.round(r.parameters.minValue+(r.parameters.maxValue-r.parameters.minValue)/(r.marks.length-1)*t);r.parameters.isFloat&&(n=parseFloat(n.toFixed(2)));var i=(n-r.parameters.minValue)/(r.parameters.maxValue-r.parameters.minValue);e.setPosition(100*i,n)}}))},this.round=function(e){var t=Math.trunc(e/r.parameters.step),n=+(e-t*r.parameters.step).toFixed(2);return e<0?Math.abs(n)<r.parameters.step/2?t*r.parameters.step:(t-1)*r.parameters.step:n<r.parameters.step/2?t*r.parameters.step:(t+1)*r.parameters.step},this.marks=[],this.parameters=e,this.createMarks(),this.init(e),this.observers=new i.default,this.observers.addObserver(t)};t.default=s},function(e,t,r){"use strict";r.r(t);var n=r(10),i=r(11),s=r(1),a=function(e,t){var r=this;this.getPosition=function(){return r.button.getPosition()},this.setPosition=function(e,t){r.label.setPosition(e+r.button.getWidth()/2,t),r.button.setPosition(e)},this.init=function(e){r.button.init(e),r.label.init(e)},this.getWidth=function(){return r.button.getWidth()},this.hideRunner=function(){r.button.elem.style.display="none",r.label.elem.style.display="none"},this.hideLabel=function(){r.label.elem.style.display="none"},this.showLabel=function(){r.label.elem.style.display="block"},this.showRunner=function(){r.button.elem.style.display="block"},this.onMouseDown=function(e){e.preventDefault(),document.addEventListener("mousemove",r.onMouseMove),document.addEventListener("mouseup",r.onMouseUp)},this.onMouseMove=function(e){r.observers.notifyObserversData({event:e,runner:r})},this.onMouseUp=function(e){document.removeEventListener("mouseup",r.onMouseUp),document.removeEventListener("mousemove",r.onMouseMove)},this.appendToNode=function(e){[r.button.elem,r.label.elem].map((function(t){e.appendChild(t),t.onmousedown=r.onMouseDown}))},this.isVertical=e,this.button=new n.default(e),this.label=new i.default(e),this.observers=new s.default,this.observers.addObserver(t)};t.default=a},function(e,t,r){"use strict";r.r(t);var n=r(2),i=r(8),s=r(14),a=r(1),o=r(3),u=function(e){var t=this;void 0===e&&(e=n.defaultParameters),this.appendToNode=function(e){t.view.appendToNode(e.get(0)),t.view.init()},this.checkStep=function(e){var r=Math.abs(o.default.parsing(e));return null===r||0===r||r>(t.view.parameters.maxValue-t.view.parameters.minValue)/2?(console.log("Wrong value of the step"),t.view.parameters.step):(r%1!=0?t.view.parameters.isFloat=!0:t.view.parameters.maxValue%1==0&&t.view.parameters.minValue%1==0&&(t.view.parameters.isFloat=!1),r)},this.checkMaxValue=function(e){var r=o.default.parsing(e);return null===r||r<=t.view.parameters.minValue?(console.log("Wrong value of the maxValue"),t.view.parameters.maxValue):(r%1!=0?t.view.parameters.isFloat=!0:t.view.parameters.step%1==0&&t.view.parameters.minValue%1==0&&(t.view.parameters.isFloat=!1),r)},this.checkMinValue=function(e){var r=o.default.parsing(e);return null===r||r>=t.view.parameters.maxValue?(console.log("Wrong value of the minValue"),t.view.parameters.minValue):(r%1!=0?t.view.parameters.isFloat=!0:t.view.parameters.maxValue%1==0&&t.view.parameters.step%1==0&&(t.view.parameters.isFloat=!1),r)},this.updateConfig=function(e){Object.keys(e).map((function(r){"step"===r?e.step=t.checkStep(e.step):"maxValue"===r?e.maxValue=t.checkMaxValue(e.maxValue):"minValue"===r&&(e.minValue=t.checkMinValue(e.minValue))})),t.view.parameters=Object.assign(t.view.parameters,e),t.view.init()},this.getValues=function(){return t.model.currentValues},this.setValues=function(e,r){(e||0===e)&&t.model.setCurrentMinValue(e),(r||0===r)&&t.model.setCurrentMaxValue(r)},this.getConfig=function(){return t.view.parameters},this.addObserver=function(e){t.observers.addObserver(e)},this.view=new i.View(e),this.model=new s.default({currentMinValue:e.minValue,currentMaxValue:e.maxValue}),this.observers=new a.default,this.view.observers.addObserver((function(){t.model.currentValues=t.view.currentValues,t.observers.notifyObservers()})),this.model.observers.addObserver((function(){t.view.currentValues=t.model.currentValues,t.view.renewRunners()}))};t.default=u},function(e,t,r){"use strict";r.r(t),r.d(t,"View",(function(){return f}));var n=r(2),i=r(1),s=r(0);r.d(t,"createElem",(function(){return s.default}));var a=r(4);r.d(t,"Bar",(function(){return a.default}));var o=r(5);r.d(t,"Graduation",(function(){return o.default}));var u=r(6),l=r(12),c=r(13),f=function(){function e(e){var t=this;void 0===e&&(e=n.defaultParameters),this.graduationObserver=function(e){var r,n=t.track.offsetValueConverter(e);r=t.parameters.isRange?t.checkRunnerCloser(n):t.runnerMain,t.moveRunner(t.track.offsetProcessing(n,r))},this.runnerObserver=function(e){var r=e.event,n=e.runner;t.moveRunner(t.track.onRunnerMove(r,n))},this.moveRunner=function(e){e.runner.setPosition(e.offset,e.value),e.runner===t.runnerAdditional&&(t.currentValues.currentMinValue=e.value),e.runner===t.runnerMain&&(t.currentValues.currentMaxValue=e.value),t.track.updateProgressBar(),t.observers.notifyObservers()},this.checkRunnerCloser=function(e){return Math.abs(e-t.track.getMainRunnerOffset())<Math.abs(e-t.track.getAdditionalRunnerOffset())?t.runnerMain:t.runnerAdditional},this.onClickBarHandler=function(e){var r=(t.parameters.isVertical?e.clientY:e.clientX)-t.bar.getPosition()-t.runnerMain.getWidth()/2;t.moveRunner(t.track.offsetProcessing(r,t.checkRunnerCloser(r)))},this.init=function(){t.bar.init(t.parameters.isVertical),t.progressBar.init(t.parameters.isVertical),t.runnerAdditional.init(t.parameters.isVertical),t.runnerMain.init(t.parameters.isVertical),t.track.init(t.parameters),t.scale.init(t.parameters),t.runnerAdditional.hideRunner(),t.parameters.showLabel?(t.runnerAdditional.showLabel(),t.runnerMain.showLabel()):(t.runnerAdditional.hideLabel(),t.runnerMain.hideLabel()),t.parameters.isRange?t.runnerAdditional.showRunner():t.runnerAdditional.hideRunner(),t.runnerAdditional.setPosition(-t.runnerAdditional.getWidth()/2,t.parameters.minValue),t.runnerMain.setPosition(t.bar.getDimension()-t.runnerMain.getWidth()/2,t.parameters.maxValue),t.renewRunners()},this.appendToNode=function(e){e.appendChild(t.bar.elem).appendChild(t.progressBar.elem),t.runnerMain.appendToNode(e),t.runnerAdditional.appendToNode(e),t.scale.marks.map((function(t){e.appendChild(t.elem)})),t.scale.moveMarks(),t.bar.elem.onclick=t.onClickBarHandler},this.bar=new a.default(e.isVertical),this.progressBar=new c.default(e.isVertical),this.currentValues={currentMinValue:e.minValue,currentMaxValue:e.maxValue},this.observers=new i.default,this.parameters=e,this.scale=new o.default(e,this.graduationObserver),this.runnerAdditional=new u.default(e.isVertical,this.runnerObserver),this.runnerMain=new u.default(e.isVertical,this.runnerObserver),this.track=new l.default({runnerMain:this.runnerMain,runnerAdditional:this.runnerAdditional,progressBar:this.progressBar,bar:this.bar,parameters:this.parameters})}return e.prototype.renewRunners=function(){this.moveRunner(this.track.offsetProcessing(this.track.offsetValueConverter(this.currentValues.currentMaxValue),this.runnerMain)),this.moveRunner(this.track.offsetProcessing(this.track.offsetValueConverter(this.currentValues.currentMinValue),this.runnerAdditional))},e}()},function(e,t,r){"use strict";r.r(t);var n=r(0),i=r(1),s=function(e){var t=this;this.onClickHandler=function(){t.observers.notifyObservers()},this.getPosition=function(){return t.isVertical?t.elem.getBoundingClientRect().top:t.elem.getBoundingClientRect().left},this.setPosition=function(e,r){t.elem.innerHTML=r+"",t.value=r,t.isVertical?(t.elem.style.left="50%",t.elem.style.top=e+"%",t.elem.style.marginTop=-t.getDimension()/2+"px",t.elem.style.marginLeft="-45px"):(t.elem.style.top="50%",t.elem.style.left=e+"%",t.elem.style.marginLeft=-t.getDimension()/2+"px",t.elem.style.marginTop="15px")},this.getDimension=function(){return t.isVertical?t.elem.getBoundingClientRect().height:t.elem.getBoundingClientRect().width},this.init=function(e){t.isVertical=e,t.isVertical?t.elem.classList.add("slider__mark_position_vertical"):t.elem.classList.remove("slider__mark_position_vertical")},this.elem=Object(n.default)("slider__mark"),this.isVertical=e,this.observers=new i.default,this.elem.onclick=this.onClickHandler};t.default=s},function(e,t,r){"use strict";r.r(t);var n=r(0),i=function(e){var t=this;this.getWidth=function(){return t.elem.getBoundingClientRect().width},this.getPosition=function(){return t.isVertical?t.elem.getBoundingClientRect().top:t.elem.getBoundingClientRect().left},this.setPosition=function(e){t.isVertical?(t.elem.style.left="50%",t.elem.style.top=e+"px"):(t.elem.style.top="50%",t.elem.style.left=e+"px")},this.init=function(e){t.isVertical=e,t.isVertical?t.elem.classList.add("slider__button_position_vertical"):t.elem.classList.remove("slider__button_position_vertical")},this.elem=Object(n.default)("slider__button"),this.isVertical=e};t.default=i},function(e,t,r){"use strict";r.r(t);var n=r(0),i=function(e){var t=this;this.getPosition=function(){return t.isVertical?t.elem.getBoundingClientRect().top:t.elem.getBoundingClientRect().left},this.setPosition=function(e,r){t.elem.innerHTML=r+"",t.isVertical?(t.elem.style.left="50%",t.elem.style.top=e-t.getDimension()/2+"px"):(t.elem.style.top="50%",t.elem.style.left=e-t.getDimension()/2+"px")},this.getDimension=function(){return t.isVertical?t.elem.getBoundingClientRect().height:t.elem.getBoundingClientRect().width},this.init=function(e){t.isVertical=e,t.isVertical?t.elem.classList.add("slider__button-label_position_vertical"):t.elem.classList.remove("slider__button-label_position_vertical")},this.elem=Object(n.default)("slider__button-label"),this.isVertical=e};t.default=i},function(e,t,r){"use strict";r.r(t);var n=function(){function e(e){var t=this;this.onRunnerMove=function(e,r){var n=(t.parameters.isVertical?e.clientY:e.clientX)-t.scale.getPosition()-t.runnerAdditional.getWidth()/2;return t.offsetProcessing(n,r)},this.runnerOffsetCheck=function(e,r){var n=t.parameters.step*t.scale.getDimension()/(t.parameters.maxValue-t.parameters.minValue),i=n/1.5>t.runnerMain.getWidth()?n/1.5:t.runnerMain.getWidth();return r===t.runnerAdditional?e>t.runnerMain.getPosition()-t.scale.getPosition()-i&&(e=t.runnerMain.getPosition()-t.scale.getPosition()-i):r===t.runnerMain&&e<t.runnerAdditional.getPosition()-t.scale.getPosition()+i&&(e=t.runnerAdditional.getPosition()-t.scale.getPosition()+i),e},this.roundOffsetButt=function(e){var r=t.parameters.minValue+(e+t.runnerMain.getWidth()/2)*(t.parameters.maxValue-t.parameters.minValue)/t.scale.getDimension(),n=t.round(r,t.parameters.step);t.parameters.isFloat&&(n=parseFloat(n.toFixed(2)));var i=t.offsetValueConverter(n);return i<-t.runnerMain.getWidth()/2&&(i=-t.runnerMain.getWidth()/2,n=t.parameters.minValue),i>t.scale.getDimension()-t.runnerMain.getWidth()/2&&(i=t.scale.getDimension()-t.runnerMain.getWidth()/2,n=t.parameters.maxValue),[i,n]},this.offsetValueConverter=function(e){return(e-t.parameters.minValue)/(t.parameters.maxValue-t.parameters.minValue)*t.scale.getDimension()-t.runnerMain.getWidth()/2},this.round=function(e,r){var n=Math.trunc(e/r),i=+(e-n*r).toFixed(2);return e<0?Math.abs(i)<r/2?n*r:(n-1)*r:e<=t.parameters.minValue?t.parameters.minValue:e>=t.parameters.maxValue?t.parameters.maxValue:i<r/2?n*r:(n+1)*r},this.getMainRunnerOffset=function(){var e=t.runnerMain.getPosition()-t.scale.getPosition()+t.runnerMain.getWidth()/2;return e<0?0:e},this.getAdditionalRunnerOffset=function(){return t.parameters.isRange?t.runnerAdditional.getPosition()-t.scale.getPosition()+t.runnerMain.getWidth()/2:0},this.updateProgressBar=function(){t.progressBar.init(t.parameters.isVertical),t.progressBar.setPosition(t.getAdditionalRunnerOffset()),t.progressBar.setDimension(t.getMainRunnerOffset()-t.getAdditionalRunnerOffset())},this.init=function(e){t.parameters=e},this.scale=e.bar,this.runnerMain=e.runnerMain,this.runnerAdditional=e.runnerAdditional,this.progressBar=e.progressBar,this.parameters=e.parameters}return e.prototype.offsetProcessing=function(e,t){var r,n;return n=this.runnerOffsetCheck(e,t),{runner:t,offset:n=(r=this.roundOffsetButt(n))[0],value:r[1]}},e}();t.default=n},function(e,t,r){"use strict";r.r(t);var n=r(0),i=function(e){var t=this;this.setPosition=function(e){t.isVertical?(t.elem.style.left="0",t.elem.style.width="100%",t.elem.style.top=e+"px"):(t.elem.style.top="0",t.elem.style.height="100%",t.elem.style.left=e+"px")},this.setDimension=function(e){t.isVertical?t.elem.style.height=e+"px":t.elem.style.width=e+"px"},this.init=function(e){t.isVertical=e},this.elem=Object(n.default)("slider__scale-filling"),this.isVertical=e};t.default=i},function(e,t,r){"use strict";r.r(t);var n=r(1),i=function(){function e(e){this.currentValues=e,this.observers=new n.default}return e.prototype.setCurrentMinValue=function(e){this.currentValues.currentMinValue!==e&&(this.currentValues.currentMinValue=e,this.observers.notifyObservers())},e.prototype.setCurrentMaxValue=function(e){this.currentValues.currentMaxValue!==e&&(this.currentValues.currentMaxValue=e,this.observers.notifyObservers())},e}();t.default=i},function(e,t,r){var n={"./Controller/Controller.ts":7,"./Controller/blocks/parsingDigits/ParsingDigits.ts":3,"./Model/Model.ts":14,"./View/View.ts":8,"./View/blocks/bar/Bar.ts":4,"./View/blocks/button/Button.ts":10,"./View/blocks/createElem/createElem.ts":0,"./View/blocks/label/Label.ts":11,"./View/blocks/mark/Mark.ts":9,"./View/blocks/progressBar/ProgressBar.ts":13,"./View/blocks/runner/Runner.ts":6,"./View/blocks/scale/Scale.ts":5,"./View/blocks/track/Track.ts":12,"./makeObservableObject/MakeObservableObject.ts":1,"./slider.ts":16,"./style.scss":17,"./types.ts":2};function i(e){var t=s(e);return r(t)}function s(e){if(!r.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}i.keys=function(){return Object.keys(n)},i.resolve=s,e.exports=i,i.id=15},function(e,t,r){"use strict";r.r(t);var n,i,s,a=r(7),o=function(){return(o=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};n=jQuery,i={minValue:0,maxValue:1e3,step:1,isRange:!1,isVertical:!1,showLabel:!1,isFloat:!1},s={init:function(e){if(!n(this).data("slider")){var t=o({},i),r=new a.default(n.extend(t,e));n(this).data("slider",r),r.appendToNode(n(this))}},update:function(e){n(this).data("slider").updateConfig(e)},getConfig:function(){return n(this).data("slider").getConfig()},setValues:function(e){n(this).data("slider").setValues(e.currentMinValue,e.currentMaxValue)},inputsAttach:function(e){var t=n(this).data("slider");t.addObserver((function(){e.minValueInput.val(t.getValues().currentMinValue),e.maxValueInput.val(t.getValues().currentMaxValue),e.maxValue.val(t.getConfig().maxValue),e.minValue.val(t.getConfig().minValue),e.step.val(t.getConfig().step)}))}},n.fn.omfgslider=function(e){return s[e]?s[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void n.error("Метод "+e+" не найден в плагине jQuery.omfgslider"):s.init.apply(this,arguments)}},function(e,t,r){},,function(e,t,r){"use strict";r.r(t);var n;r.p;(n=r(15)).keys().forEach(n)}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsdWdpbi9WaWV3L2Jsb2Nrcy9jcmVhdGVFbGVtL2NyZWF0ZUVsZW0udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsdWdpbi9tYWtlT2JzZXJ2YWJsZU9iamVjdC9NYWtlT2JzZXJ2YWJsZU9iamVjdC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2luL3R5cGVzLnRzIiwid2VicGFjazovLy8uL3NyYy9wbHVnaW4vQ29udHJvbGxlci9ibG9ja3MvcGFyc2luZ0RpZ2l0cy9QYXJzaW5nRGlnaXRzLnRzIiwid2VicGFjazovLy8uL3NyYy9wbHVnaW4vVmlldy9ibG9ja3MvYmFyL0Jhci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2luL1ZpZXcvYmxvY2tzL3NjYWxlL1NjYWxlLnRzIiwid2VicGFjazovLy8uL3NyYy9wbHVnaW4vVmlldy9ibG9ja3MvcnVubmVyL1J1bm5lci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2luL0NvbnRyb2xsZXIvQ29udHJvbGxlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2luL1ZpZXcvVmlldy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2luL1ZpZXcvYmxvY2tzL21hcmsvTWFyay50cyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2luL1ZpZXcvYmxvY2tzL2J1dHRvbi9CdXR0b24udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsdWdpbi9WaWV3L2Jsb2Nrcy9sYWJlbC9MYWJlbC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2luL1ZpZXcvYmxvY2tzL3RyYWNrL1RyYWNrLnRzIiwid2VicGFjazovLy8uL3NyYy9wbHVnaW4vVmlldy9ibG9ja3MvcHJvZ3Jlc3NCYXIvUHJvZ3Jlc3NCYXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsdWdpbi9Nb2RlbC9Nb2RlbC50cyIsIndlYnBhY2s6Ly8vXFwuZClcXC4oanN8dHN8c2NzcykkLyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2luL3NsaWRlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZGVtby1wYWdlL2luZGV4Lmh0bWwiLCJ3ZWJwYWNrOi8vLy4vc3JjL2luZGV4LnRzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiY2xhc3NOYW1lIiwiZWxlbSIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsIm9uZHJhZ3N0YXJ0IiwiY2xhc3NMaXN0IiwiYWRkIiwidGhpcyIsIm9ic2VydmVycyIsImFkZE9ic2VydmVyIiwiZm4iLCJFcnJvciIsIm1hcCIsIm9ic2VydmVyIiwicHVzaCIsInJlbW92ZU9ic2VydmVyIiwibGVuZ3RoIiwic3BsaWNlIiwibm90aWZ5T2JzZXJ2ZXJzIiwibm90aWZ5T2JzZXJ2ZXJzRGF0YSIsImRhdGEiLCJkZWZhdWx0UGFyYW1ldGVycyIsIm1pblZhbHVlIiwibWF4VmFsdWUiLCJzdGVwIiwiaXNSYW5nZSIsImlzVmVydGljYWwiLCJzaG93TGFiZWwiLCJpc0Zsb2F0IiwicGFyc2luZyIsIml0ZW0iLCJ0ZXN0IiwicGFyc2VGbG9hdCIsInBhcnNlSW50IiwiZ2V0UG9zaXRpb24iLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJ0b3AiLCJsZWZ0IiwiZ2V0RGltZW5zaW9uIiwiaGVpZ2h0Iiwid2lkdGgiLCJpbml0IiwicmVtb3ZlIiwicGFyYW1ldGVycyIsIm9wdGlvbnMiLCJtb3ZlTWFya3MiLCJjcmVhdGVNYXJrcyIsIm1hcmsiLCJtYXJrcyIsIm9uQ2xpY2tNYXJrSGFuZGxlciIsImluZGV4Iiwic2V0UG9zaXRpb24iLCJyb3VuZFZhbHVlIiwicm91bmQiLCJ0b0ZpeGVkIiwib2Zmc2V0Iiwid2hvbGUiLCJNYXRoIiwidHJ1bmMiLCJyZW1pbmRlciIsImFicyIsIm1vdmVPYnNlcnZlciIsImJ1dHRvbiIsImxhYmVsIiwiZ2V0V2lkdGgiLCJoaWRlUnVubmVyIiwic3R5bGUiLCJkaXNwbGF5IiwiaGlkZUxhYmVsIiwic2hvd1J1bm5lciIsIm9uTW91c2VEb3duIiwiZXZlbnQiLCJwcmV2ZW50RGVmYXVsdCIsImFkZEV2ZW50TGlzdGVuZXIiLCJvbk1vdXNlTW92ZSIsIm9uTW91c2VVcCIsInJ1bm5lciIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJhcHBlbmRUb05vZGUiLCJlbnRyeSIsImFwcGVuZENoaWxkIiwib25tb3VzZWRvd24iLCJ2aWV3IiwiY2hlY2tTdGVwIiwic3RlcE1vZCIsImNvbnNvbGUiLCJsb2ciLCJjaGVja01heFZhbHVlIiwibWF4VmFsdWVNb2QiLCJjaGVja01pblZhbHVlIiwibWluVmFsdWVNb2QiLCJ1cGRhdGVDb25maWciLCJhcmdzIiwia2V5cyIsImFzc2lnbiIsImdldFZhbHVlcyIsIm1vZGVsIiwiY3VycmVudFZhbHVlcyIsInNldFZhbHVlcyIsImN1cnJlbnRNaW5WYWx1ZSIsImN1cnJlbnRNYXhWYWx1ZSIsInNldEN1cnJlbnRNaW5WYWx1ZSIsInNldEN1cnJlbnRNYXhWYWx1ZSIsImdldENvbmZpZyIsInJlbmV3UnVubmVycyIsImdyYWR1YXRpb25PYnNlcnZlciIsInRyYWNrIiwib2Zmc2V0VmFsdWVDb252ZXJ0ZXIiLCJjaGVja1J1bm5lckNsb3NlciIsInJ1bm5lck1haW4iLCJtb3ZlUnVubmVyIiwib2Zmc2V0UHJvY2Vzc2luZyIsInJ1bm5lck9ic2VydmVyIiwib25SdW5uZXJNb3ZlIiwib2JqIiwicnVubmVyQWRkaXRpb25hbCIsInVwZGF0ZVByb2dyZXNzQmFyIiwiZ2V0TWFpblJ1bm5lck9mZnNldCIsImdldEFkZGl0aW9uYWxSdW5uZXJPZmZzZXQiLCJvbkNsaWNrQmFySGFuZGxlciIsImNsaWVudFkiLCJjbGllbnRYIiwiYmFyIiwicHJvZ3Jlc3NCYXIiLCJzY2FsZSIsIm9uY2xpY2siLCJvbkNsaWNrSGFuZGxlciIsImlubmVySFRNTCIsIm1hcmdpblRvcCIsIm1hcmdpbkxlZnQiLCJldmVudE1tIiwicnVubmVyT2Zmc2V0Q2hlY2siLCJuZXdPZmZzZXQiLCJzdGVwV2lkdGgiLCJtaW5PZmZzZXQiLCJyb3VuZE9mZnNldEJ1dHQiLCJjdXJyZW50T2Zmc2V0IiwiY3VycmVudFZhbHVlIiwicm91bmRPZmZzZXQiLCJzZXREaW1lbnNpb24iLCJkaW1lbnNpb24iLCJ3ZWJwYWNrQ29udGV4dCIsInJlcSIsImlkIiwid2VicGFja0NvbnRleHRSZXNvbHZlIiwiZSIsImNvZGUiLCJyZXNvbHZlIiwiJCIsImNvbmZpZyIsIm1ldGhvZHMiLCJqUXVlcnkiLCJvcHQiLCJuZXdDb25maWciLCJzbGlkZXIiLCJleHRlbmQiLCJ1cGRhdGUiLCJpbnB1dHNBdHRhY2giLCJtaW5WYWx1ZUlucHV0IiwidmFsIiwibWF4VmFsdWVJbnB1dCIsIm9tZmdzbGlkZXIiLCJtZXRob2QiLCJhcHBseSIsIkFycmF5Iiwic2xpY2UiLCJhcmd1bWVudHMiLCJlcnJvciIsImZvckVhY2giXSwibWFwcGluZ3MiOiJhQUNFLElBQUlBLEVBQW1CLEdBR3ZCLFNBQVNDLEVBQW9CQyxHQUc1QixHQUFHRixFQUFpQkUsR0FDbkIsT0FBT0YsRUFBaUJFLEdBQVVDLFFBR25DLElBQUlDLEVBQVNKLEVBQWlCRSxHQUFZLENBQ3pDRyxFQUFHSCxFQUNISSxHQUFHLEVBQ0hILFFBQVMsSUFVVixPQU5BSSxFQUFRTCxHQUFVTSxLQUFLSixFQUFPRCxRQUFTQyxFQUFRQSxFQUFPRCxRQUFTRixHQUcvREcsRUFBT0UsR0FBSSxF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LEVBQUlyRCxnQkFBaUJxRCxFQUFJcEQsa0JBRzVDeUQsYUFBYyxTQUFTTCxHQUNyQixJQUFNRSxFQUFTTixFQUFFN0ksTUFBTWEsS0FBSyxVQUM1QnNJLEVBQU9qSixhQUFZLFdBQ2pCK0ksRUFBSU0sY0FBY0MsSUFBSUwsRUFBTzNELFlBQVlJLGlCQUN6Q3FELEVBQUlRLGNBQWNELElBQUlMLEVBQU8zRCxZQUFZSyxpQkFDekNvRCxFQUFJakksU0FBU3dJLElBQUlMLEVBQU9uRCxZQUFZaEYsVUFDcENpSSxFQUFJbEksU0FBU3lJLElBQUlMLEVBQU9uRCxZQUFZakYsVUFDcENrSSxFQUFJaEksS0FBS3VJLElBQUlMLEVBQU9uRCxZQUFZL0UsV0FLdEM0SCxFQUFFMUksR0FBR3VKLFdBQWEsU0FBU0MsR0FDekIsT0FBSVosRUFBUVksR0FDSFosRUFBUVksR0FBUUMsTUFBTTVKLEtBQU02SixNQUFNeEssVUFBVXlLLE1BQU1sTSxLQUFLbU0sVUFBVyxJQUM5QyxpQkFBWEosR0FBd0JBLE9BR3hDZCxFQUFFbUIsTUFBTSxTQUFTTCxFQUFNLDBDQUZoQlosRUFBUTdHLEtBQUswSCxNQUFNNUosS0FBTStKLGEsdURDdkR2QixJQ0VJeEwsRURGSixLQ0VJQSxFQUlULE9BSEorRyxPQUFPMkUsUUFBUTFMIiwiZmlsZSI6ImJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAxOSk7XG4iLCJmdW5jdGlvbiBjcmVhdGVFbGVtKGNsYXNzTmFtZTogc3RyaW5nKSA6SFRNTEVsZW1lbnQge1xyXG4gIGNvbnN0IGVsZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICBlbGVtLm9uZHJhZ3N0YXJ0ID0gKCkgPT4gZmFsc2U7XHJcbiAgZWxlbS5jbGFzc0xpc3QuYWRkKGNsYXNzTmFtZSk7XHJcbiAgcmV0dXJuIGVsZW07XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNyZWF0ZUVsZW07IiwiY2xhc3MgTWFrZU9ic2VydmFibGVPYmplY3Qge1xyXG4gIG9ic2VydmVyczogQXJyYXk8RnVuY3Rpb24+O1xyXG5cclxuICBjb25zdHJ1Y3RvcigpIHtcclxuICAgIHRoaXMub2JzZXJ2ZXJzID0gW107XHJcbiAgfVxyXG5cclxuICBhZGRPYnNlcnZlciAoZm46IEZ1bmN0aW9uKTogdm9pZCB7XHJcbiAgICBpZiAodHlwZW9mIGZuICE9PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcignb2JzZXJ2ZXIgbXVzdCBiZSBhIGZ1bmN0aW9uJyk7XHJcbiAgICB9XHJcbiAgICB0aGlzLm9ic2VydmVycy5tYXAoKG9ic2VydmVyKSA9PiB7XHJcbiAgICAgIGlmIChvYnNlcnZlciA9PT0gZm4pIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ29ic2VydmVyIGFscmVhZHkgaW4gdGhlIGxpc3QnKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICB0aGlzLm9ic2VydmVycy5wdXNoKGZuKTtcclxuICB9XHJcblxyXG4gIHJlbW92ZU9ic2VydmVyIChmbjogRnVuY3Rpb24pOiB2b2lkIHtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5vYnNlcnZlcnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgY29uc3Qgb2JzZXJ2ZXIgPSB0aGlzLm9ic2VydmVyc1tpXTtcclxuICAgICAgaWYgKG9ic2VydmVyID09PSBmbikge1xyXG4gICAgICAgIHRoaXMub2JzZXJ2ZXJzLnNwbGljZShpLCAxKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHRocm93IG5ldyBFcnJvcignY291bGQgbm90IGZpbmQgb2JzZXJ2ZXIgaW4gbGlzdCBvZiBvYnNlcnZlcnMnKTtcclxuICB9XHJcblxyXG4gIG5vdGlmeU9ic2VydmVycyAoKTogdm9pZCB7XHJcbiAgICBjb25zdCBvYnNlcnZlcnNTbmFwc2hvdCA9IFsuLi50aGlzLm9ic2VydmVyc107XHJcbiAgICBvYnNlcnZlcnNTbmFwc2hvdC5tYXAoKG9ic2VydmVyKSA9PiBvYnNlcnZlcigpKTtcclxuICB9XHJcblxyXG4gIG5vdGlmeU9ic2VydmVyc0RhdGEgKGRhdGE6IGFueSk6IHZvaWQge1xyXG4gICAgY29uc3Qgb2JzZXJ2ZXJzU25hcHNob3QgPSBbLi4udGhpcy5vYnNlcnZlcnNdO1xyXG4gICAgb2JzZXJ2ZXJzU25hcHNob3QubWFwKChvYnNlcnZlcikgPT4gb2JzZXJ2ZXIoZGF0YSkpO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgTWFrZU9ic2VydmFibGVPYmplY3Q7IiwiaW1wb3J0IFJ1bm5lciBmcm9tICcuL1ZpZXcvYmxvY2tzL3J1bm5lci9SdW5uZXInO1xyXG5pbXBvcnQgQmFyIGZyb20gJy4vVmlldy9ibG9ja3MvYmFyL0Jhcic7XHJcbmltcG9ydCBQcm9ncmVzc0JhciBmcm9tICcuL1ZpZXcvYmxvY2tzL3Byb2dyZXNzQmFyL1Byb2dyZXNzQmFyJztcclxuXHJcblxyXG5leHBvcnQgdHlwZSBSdW5uZXJNb3ZlRGF0YSA9IHtcclxuICBydW5uZXI6IFJ1bm5lcixcclxuICBvZmZzZXQ6IG51bWJlcixcclxuICB2YWx1ZTogbnVtYmVyLFxyXG59XHJcblxyXG5leHBvcnQgdHlwZSBDdXJyZW50VmFsdWVzID0ge1xyXG4gIGN1cnJlbnRNaW5WYWx1ZTogbnVtYmVyLFxyXG4gIGN1cnJlbnRNYXhWYWx1ZTogbnVtYmVyLFxyXG59XHJcblxyXG5leHBvcnQgdHlwZSBSdW5uZXJPYnNlcnZlckRhdGEgPSB7XHJcbiAgZXZlbnQ6IE1vdXNlRXZlbnQsXHJcbiAgcnVubmVyOiBSdW5uZXIsXHJcbn1cclxuXHJcbmV4cG9ydCB0eXBlIFBhcmFtZXRlcnMgPSB7XHJcbiAgbWluVmFsdWU6IG51bWJlcixcclxuICBtYXhWYWx1ZTogbnVtYmVyLFxyXG4gIHN0ZXA6IG51bWJlcixcclxuICBpc1JhbmdlOiBib29sZWFuLFxyXG4gIGlzVmVydGljYWw6IGJvb2xlYW4sXHJcbiAgc2hvd0xhYmVsOiBib29sZWFuLFxyXG4gIGlzRmxvYXQ6IGJvb2xlYW5cclxufVxyXG5cclxuZXhwb3J0IHR5cGUgVHJhY2tDb25zdHJ1Y3RvckRhdGEgPSB7XHJcbiAgcnVubmVyTWFpbjogUnVubmVyLFxyXG4gIHJ1bm5lckFkZGl0aW9uYWw6IFJ1bm5lcixcclxuICBiYXI6IEJhcixcclxuICBwcm9ncmVzc0JhcjogUHJvZ3Jlc3NCYXIsXHJcbiAgcGFyYW1ldGVyczogUGFyYW1ldGVycztcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IGRlZmF1bHRQYXJhbWV0ZXJzID0ge1xyXG4gIG1pblZhbHVlOiAwLFxyXG4gIG1heFZhbHVlOiAxMDAwLFxyXG4gIHN0ZXA6IDEsXHJcbiAgaXNSYW5nZTogZmFsc2UsXHJcbiAgaXNWZXJ0aWNhbDogZmFsc2UsXHJcbiAgc2hvd0xhYmVsOiBmYWxzZSxcclxuICBpc0Zsb2F0OiBmYWxzZVxyXG59IiwiY2xhc3MgUGFyc2luZ0RpZ2l0cyB7XHJcbiAgc3RhdGljIHBhcnNpbmcgPSAoaXRlbTogc3RyaW5nfG51bWJlcik6IG51bWJlcnxudWxsID0+IHtcclxuICAgIGlmICh0eXBlb2YgaXRlbSA9PT0gJ251bWJlcicpIHtcclxuICAgICAgcmV0dXJuIGl0ZW07XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHR5cGVvZiBpdGVtID09PSAnc3RyaW5nJykge1xyXG4gICAgICBpZiAoL14tP1xcZCtbXFwuLF1cXGQrJC8udGVzdChpdGVtKSkge1xyXG4gICAgICAgIHJldHVybiBwYXJzZUZsb2F0KGl0ZW0pO1xyXG4gICAgICB9IGVsc2UgaWYgKC9eLT9cXGQrJC8udGVzdChpdGVtKSkge1xyXG4gICAgICAgIHJldHVybiBwYXJzZUludChpdGVtKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBudWxsO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgUGFyc2luZ0RpZ2l0czsiLCJpbXBvcnQgY3JlYXRlRWxlbSBmcm9tICcuLi9jcmVhdGVFbGVtL2NyZWF0ZUVsZW0nO1xyXG5cclxuY2xhc3MgQmFyIHtcclxuICBlbGVtOiBIVE1MRWxlbWVudDtcclxuICBpc1ZlcnRpY2FsOiBib29sZWFuO1xyXG5cclxuICBjb25zdHJ1Y3Rvcihpc1ZlcnRpY2FsOiBib29sZWFuKSB7XHJcbiAgICB0aGlzLmVsZW0gPSBjcmVhdGVFbGVtKCdzbGlkZXJfX3NjYWxlJyk7XHJcbiAgICB0aGlzLmlzVmVydGljYWwgPSBpc1ZlcnRpY2FsO1xyXG4gIH1cclxuXHJcbiAgZ2V0UG9zaXRpb24gPSAoKTogbnVtYmVyID0+IHtcclxuICAgIGlmICh0aGlzLmlzVmVydGljYWwpIHtcclxuICAgICAgcmV0dXJuIHRoaXMuZWxlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3A7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuZWxlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0O1xyXG4gIH1cclxuXHJcbiAgZ2V0RGltZW5zaW9uID0gKCk6IG51bWJlciA9PiB7XHJcbiAgICBpZiAodGhpcy5pc1ZlcnRpY2FsKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLmVsZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuaGVpZ2h0O1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB0aGlzLmVsZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGg7XHJcbiAgfVxyXG5cclxuICBpbml0ID0gKGlzVmVydGljYWw6IGJvb2xlYW4pOiB2b2lkID0+IHtcclxuICAgIHRoaXMuaXNWZXJ0aWNhbCA9IGlzVmVydGljYWw7XHJcblxyXG4gICAgaWYgKHRoaXMuaXNWZXJ0aWNhbCkge1xyXG4gICAgICB0aGlzLmVsZW0uY2xhc3NMaXN0LmFkZCgnc2xpZGVyX19zY2FsZV9wb3NpdGlvbl92ZXJ0aWNhbCcpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5lbGVtLmNsYXNzTGlzdC5yZW1vdmUoJ3NsaWRlcl9fc2NhbGVfcG9zaXRpb25fdmVydGljYWwnKTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IEJhcjtcclxuIiwiaW1wb3J0ICogYXMgdHlwZXMgZnJvbSAnLi4vLi4vLi4vdHlwZXMnO1xyXG5pbXBvcnQgTWFyayBmcm9tIFwiLi4vbWFyay9NYXJrXCI7XHJcbmltcG9ydCBNYWtlT2JzZXJ2YWJsZU9iamVjdCBmcm9tICcuLi8uLi8uLi9tYWtlT2JzZXJ2YWJsZU9iamVjdC9NYWtlT2JzZXJ2YWJsZU9iamVjdCc7XHJcblxyXG5jbGFzcyBHcmFkdWF0aW9uIHtcclxuICBwYXJhbWV0ZXJzOiB0eXBlcy5QYXJhbWV0ZXJzO1xyXG5cclxuICBtYXJrczogQXJyYXk8TWFyaz47XHJcblxyXG4gIG9ic2VydmVyczogTWFrZU9ic2VydmFibGVPYmplY3Q7XHJcblxyXG4gIGNvbnN0cnVjdG9yKHBhcmFtZXRlcnM6IHR5cGVzLlBhcmFtZXRlcnMsIG9ic2VydmVyOiBGdW5jdGlvbikge1xyXG4gICAgdGhpcy5tYXJrcyA9IFtdO1xyXG4gICAgdGhpcy5wYXJhbWV0ZXJzID0gcGFyYW1ldGVycztcclxuICAgIHRoaXMuY3JlYXRlTWFya3MoKTtcclxuICAgIHRoaXMuaW5pdChwYXJhbWV0ZXJzKTtcclxuICAgIHRoaXMub2JzZXJ2ZXJzID0gbmV3IE1ha2VPYnNlcnZhYmxlT2JqZWN0KCk7XHJcbiAgICB0aGlzLm9ic2VydmVycy5hZGRPYnNlcnZlcihvYnNlcnZlcik7XHJcbiAgfVxyXG5cclxuICBpbml0ID0gKG9wdGlvbnM6IGFueSk6IHZvaWQgPT4ge1xyXG4gICAgdGhpcy5wYXJhbWV0ZXJzID0gb3B0aW9ucztcclxuICAgIHRoaXMubW92ZU1hcmtzKCk7XHJcbiAgfVxyXG5cclxuICBjcmVhdGVNYXJrcyA9ICgpOiB2b2lkID0+IHtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNTsgaSsrKSB7XHJcbiAgICAgIGNvbnN0IG1hcmsgPSBuZXcgTWFyayh0aGlzLnBhcmFtZXRlcnMuaXNWZXJ0aWNhbCk7XHJcbiAgICAgIHRoaXMubWFya3MucHVzaChtYXJrKTtcclxuICAgICAgbWFyay5vYnNlcnZlcnMuYWRkT2JzZXJ2ZXIoKCkgPT4gdGhpcy5vbkNsaWNrTWFya0hhbmRsZXIobWFyaykpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgb25DbGlja01hcmtIYW5kbGVyID0gKG1hcms6IE1hcmspOiB2b2lkID0+IHtcclxuICAgIHRoaXMub2JzZXJ2ZXJzLm5vdGlmeU9ic2VydmVyc0RhdGEobWFyay52YWx1ZSk7XHJcbiAgfVxyXG5cclxuICBtb3ZlTWFya3MgPSAoKTogdm9pZCA9PiB7XHJcbiAgICB0aGlzLm1hcmtzLm1hcCgobWFyaywgaW5kZXgpID0+IHtcclxuICAgICAgbWFyay5pbml0KHRoaXMucGFyYW1ldGVycy5pc1ZlcnRpY2FsKTtcclxuICAgICAgaWYgKGluZGV4ID09PSAwKSB7XHJcbiAgICAgICAgbWFyay5zZXRQb3NpdGlvbigwLCB0aGlzLnBhcmFtZXRlcnMubWluVmFsdWUpO1xyXG4gICAgICB9IGVsc2UgaWYgKGluZGV4ID09PSB0aGlzLm1hcmtzLmxlbmd0aCAtIDEpIHtcclxuICAgICAgICBtYXJrLnNldFBvc2l0aW9uKDEwMCwgdGhpcy5wYXJhbWV0ZXJzLm1heFZhbHVlKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBsZXQgcm91bmRWYWx1ZSA9IHRoaXMucm91bmQodGhpcy5wYXJhbWV0ZXJzLm1pblZhbHVlICsgKHRoaXMucGFyYW1ldGVycy5tYXhWYWx1ZSAtIHRoaXMucGFyYW1ldGVycy5taW5WYWx1ZSkvKHRoaXMubWFya3MubGVuZ3RoIC0gMSkqaW5kZXgpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5wYXJhbWV0ZXJzLmlzRmxvYXQpIHtcclxuICAgICAgICAgIHJvdW5kVmFsdWUgPSBwYXJzZUZsb2F0KHJvdW5kVmFsdWUudG9GaXhlZCgyKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBvZmZzZXQgPSAocm91bmRWYWx1ZSAtIHRoaXMucGFyYW1ldGVycy5taW5WYWx1ZSkvKHRoaXMucGFyYW1ldGVycy5tYXhWYWx1ZSAtIHRoaXMucGFyYW1ldGVycy5taW5WYWx1ZSk7XHJcbiAgICAgICAgbWFyay5zZXRQb3NpdGlvbihvZmZzZXQqMTAwLCByb3VuZFZhbHVlKTtcclxuICAgICAgfVxyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIHJvdW5kID0gKHZhbHVlOiBudW1iZXIpOiBudW1iZXIgPT4ge1xyXG4gICAgY29uc3Qgd2hvbGUgPSBNYXRoLnRydW5jKHZhbHVlL3RoaXMucGFyYW1ldGVycy5zdGVwKTtcclxuXHJcbiAgICBjb25zdCByZW1pbmRlciA9ICsodmFsdWUgLSB3aG9sZSp0aGlzLnBhcmFtZXRlcnMuc3RlcCkudG9GaXhlZCgyKTtcclxuICAgIGlmICh2YWx1ZSA8IDApIHtcclxuICAgICAgcmV0dXJuIE1hdGguYWJzKHJlbWluZGVyKSA8IHRoaXMucGFyYW1ldGVycy5zdGVwLzIgPyB3aG9sZSp0aGlzLnBhcmFtZXRlcnMuc3RlcCA6ICh3aG9sZSAtIDEpKnRoaXMucGFyYW1ldGVycy5zdGVwO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiByZW1pbmRlciA8IHRoaXMucGFyYW1ldGVycy5zdGVwLzIgPyB3aG9sZSp0aGlzLnBhcmFtZXRlcnMuc3RlcCA6ICh3aG9sZSArIDEpKnRoaXMucGFyYW1ldGVycy5zdGVwO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgR3JhZHVhdGlvbjsiLCJpbXBvcnQgQnV0dG9uIGZyb20gXCIuLi8uLi9ibG9ja3MvYnV0dG9uL0J1dHRvblwiO1xyXG5pbXBvcnQgTGFiZWwgZnJvbSBcIi4uLy4uL2Jsb2Nrcy9sYWJlbC9MYWJlbFwiO1xyXG5pbXBvcnQgTWFrZU9ic2VydmFibGVPYmplY3QgZnJvbSAnLi4vLi4vLi4vbWFrZU9ic2VydmFibGVPYmplY3QvTWFrZU9ic2VydmFibGVPYmplY3QnO1xyXG5cclxuY2xhc3MgUnVubmVyIHtcclxuICBidXR0b246IEJ1dHRvbjtcclxuICBsYWJlbDogTGFiZWw7XHJcbiAgaXNWZXJ0aWNhbDogYm9vbGVhbjtcclxuICBvYnNlcnZlcnM6IE1ha2VPYnNlcnZhYmxlT2JqZWN0O1xyXG5cclxuICBjb25zdHJ1Y3Rvcihpc1ZlcnRpY2FsOiBib29sZWFuLCBtb3ZlT2JzZXJ2ZXI6IEZ1bmN0aW9uKSB7XHJcbiAgICB0aGlzLmlzVmVydGljYWwgPSBpc1ZlcnRpY2FsO1xyXG4gICAgdGhpcy5idXR0b24gPSBuZXcgQnV0dG9uKGlzVmVydGljYWwpO1xyXG4gICAgdGhpcy5sYWJlbCA9IG5ldyBMYWJlbChpc1ZlcnRpY2FsKTtcclxuICAgIHRoaXMub2JzZXJ2ZXJzID0gbmV3IE1ha2VPYnNlcnZhYmxlT2JqZWN0KCk7XHJcbiAgICB0aGlzLm9ic2VydmVycy5hZGRPYnNlcnZlcihtb3ZlT2JzZXJ2ZXIpO1xyXG4gIH1cclxuXHJcbiAgZ2V0UG9zaXRpb24gPSAoKTogbnVtYmVyID0+IHtcclxuICAgIHJldHVybiB0aGlzLmJ1dHRvbi5nZXRQb3NpdGlvbigpO1xyXG4gIH1cclxuXHJcbiAgc2V0UG9zaXRpb24gPSAob2Zmc2V0OiBudW1iZXIsIHZhbHVlOiBudW1iZXIpOiB2b2lkID0+IHtcclxuICAgIHRoaXMubGFiZWwuc2V0UG9zaXRpb24ob2Zmc2V0ICsgdGhpcy5idXR0b24uZ2V0V2lkdGgoKS8yLCB2YWx1ZSk7XHJcbiAgICB0aGlzLmJ1dHRvbi5zZXRQb3NpdGlvbihvZmZzZXQpO1xyXG4gIH1cclxuXHJcbiAgaW5pdCA9IChpc1ZlcnRpY2FsOiBib29sZWFuKTogdm9pZCA9PiB7XHJcbiAgICB0aGlzLmJ1dHRvbi5pbml0KGlzVmVydGljYWwpO1xyXG4gICAgdGhpcy5sYWJlbC5pbml0KGlzVmVydGljYWwpO1xyXG4gIH1cclxuXHJcbiAgZ2V0V2lkdGggPSAoKTogbnVtYmVyID0+IHtcclxuICAgIHJldHVybiB0aGlzLmJ1dHRvbi5nZXRXaWR0aCgpO1xyXG4gIH1cclxuXHJcbiAgaGlkZVJ1bm5lciA9ICgpOiB2b2lkID0+IHtcclxuICAgIHRoaXMuYnV0dG9uLmVsZW0uc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG4gICAgdGhpcy5sYWJlbC5lbGVtLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuICB9XHJcblxyXG4gIGhpZGVMYWJlbCA9ICgpOiB2b2lkID0+IHtcclxuICAgIHRoaXMubGFiZWwuZWxlbS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgfVxyXG5cclxuICBzaG93TGFiZWwgPSAoKTogdm9pZCA9PiB7XHJcbiAgICB0aGlzLmxhYmVsLmVsZW0uc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcclxuICB9XHJcblxyXG4gIHNob3dSdW5uZXIgPSAoKTogdm9pZCA9PiB7XHJcbiAgICB0aGlzLmJ1dHRvbi5lbGVtLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XHJcbiAgfVxyXG5cclxuICBvbk1vdXNlRG93biA9IChldmVudDogTW91c2VFdmVudCk6IHZvaWQgPT4ge1xyXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgdGhpcy5vbk1vdXNlTW92ZSk7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2V1cFwiLCB0aGlzLm9uTW91c2VVcCk7XHJcbiAgfVxyXG5cclxuICBvbk1vdXNlTW92ZSA9IChldmVudDogTW91c2VFdmVudCk6IHZvaWQgPT4ge1xyXG4gICAgdGhpcy5vYnNlcnZlcnMubm90aWZ5T2JzZXJ2ZXJzRGF0YSh7IGV2ZW50OiBldmVudCwgcnVubmVyOiB0aGlzIH0pO1xyXG4gIH1cclxuXHJcbiAgb25Nb3VzZVVwID0gKGV2ZW50OiBNb3VzZUV2ZW50KTogdm9pZCA9PiB7XHJcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2V1cFwiLCB0aGlzLm9uTW91c2VVcCk7XHJcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsIHRoaXMub25Nb3VzZU1vdmUpO1xyXG4gIH1cclxuXHJcbiAgYXBwZW5kVG9Ob2RlID0gKGVudHJ5OiBIVE1MRWxlbWVudCk6IHZvaWQgPT4ge1xyXG4gICAgW3RoaXMuYnV0dG9uLmVsZW0sIHRoaXMubGFiZWwuZWxlbV0ubWFwKChlbGVtKSA9PiB7XHJcbiAgICAgIGVudHJ5LmFwcGVuZENoaWxkKGVsZW0pO1xyXG4gICAgICBlbGVtLm9ubW91c2Vkb3duID0gdGhpcy5vbk1vdXNlRG93bjtcclxuICAgIH0pXHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBSdW5uZXI7IiwiaW1wb3J0ICogYXMgdHlwZXMgZnJvbSAnLi4vdHlwZXMnO1xyXG5pbXBvcnQgeyBWaWV3IH0gZnJvbSAnLi4vVmlldy9WaWV3JztcclxuaW1wb3J0IE1vZGVsIGZyb20gJy4uL01vZGVsL01vZGVsJztcclxuaW1wb3J0IE1ha2VPYnNlcnZhYmxlT2JqZWN0IGZyb20gJy4uL21ha2VPYnNlcnZhYmxlT2JqZWN0L01ha2VPYnNlcnZhYmxlT2JqZWN0JztcclxuaW1wb3J0IFBhcnNpbmdEaWdpdHMgZnJvbSBcIi4vYmxvY2tzL3BhcnNpbmdEaWdpdHMvUGFyc2luZ0RpZ2l0c1wiO1xyXG5cclxuY2xhc3MgQ29udHJvbGxlciB7XHJcbiAgdmlldzogVmlldztcclxuXHJcbiAgbW9kZWw6IE1vZGVsO1xyXG5cclxuICBvYnNlcnZlcnM6IE1ha2VPYnNlcnZhYmxlT2JqZWN0O1xyXG5cclxuICBjb25zdHJ1Y3RvcihwYXJhbWV0ZXJzID0gdHlwZXMuZGVmYXVsdFBhcmFtZXRlcnMpIHtcclxuICAgIHRoaXMudmlldyA9IG5ldyBWaWV3KHBhcmFtZXRlcnMpO1xyXG4gICAgdGhpcy5tb2RlbCA9IG5ldyBNb2RlbCh7IGN1cnJlbnRNaW5WYWx1ZTogcGFyYW1ldGVycy5taW5WYWx1ZSwgY3VycmVudE1heFZhbHVlOiBwYXJhbWV0ZXJzLm1heFZhbHVlIH0pO1xyXG4gICAgdGhpcy5vYnNlcnZlcnMgPSBuZXcgTWFrZU9ic2VydmFibGVPYmplY3QoKTtcclxuXHJcbiAgICB0aGlzLnZpZXcub2JzZXJ2ZXJzLmFkZE9ic2VydmVyKCgpID0+IHtcclxuICAgICAgdGhpcy5tb2RlbC5jdXJyZW50VmFsdWVzID0gdGhpcy52aWV3LmN1cnJlbnRWYWx1ZXM7XHJcbiAgICAgIHRoaXMub2JzZXJ2ZXJzLm5vdGlmeU9ic2VydmVycygpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5tb2RlbC5vYnNlcnZlcnMuYWRkT2JzZXJ2ZXIoKCkgPT4ge1xyXG4gICAgICB0aGlzLnZpZXcuY3VycmVudFZhbHVlcyA9IHRoaXMubW9kZWwuY3VycmVudFZhbHVlcztcclxuICAgICAgdGhpcy52aWV3LnJlbmV3UnVubmVycygpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBhcHBlbmRUb05vZGUgPSAoZW50cnk6IEpRdWVyeSk6IHZvaWQgPT4ge1xyXG4gICAgdGhpcy52aWV3LmFwcGVuZFRvTm9kZShlbnRyeS5nZXQoMCkpO1xyXG4gICAgdGhpcy52aWV3LmluaXQoKTtcclxuICB9XHJcblxyXG4gIGNoZWNrU3RlcCA9IChzdGVwOiBzdHJpbmcpOiBudW1iZXIgPT4ge1xyXG4gICAgbGV0IHN0ZXBNb2QgPSBNYXRoLmFicyhQYXJzaW5nRGlnaXRzLnBhcnNpbmcoc3RlcCkpO1xyXG5cclxuICAgIGlmIChzdGVwTW9kID09PSBudWxsIHx8IHN0ZXBNb2QgPT09IDAgfHwgc3RlcE1vZCA+ICh0aGlzLnZpZXcucGFyYW1ldGVycy5tYXhWYWx1ZSAtIHRoaXMudmlldy5wYXJhbWV0ZXJzLm1pblZhbHVlKS8yKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdXcm9uZyB2YWx1ZSBvZiB0aGUgc3RlcCcpO1xyXG4gICAgICByZXR1cm4gdGhpcy52aWV3LnBhcmFtZXRlcnMuc3RlcDtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoc3RlcE1vZCAlIDEgIT09IDApIHtcclxuICAgICAgdGhpcy52aWV3LnBhcmFtZXRlcnMuaXNGbG9hdCA9IHRydWU7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBpZiAodGhpcy52aWV3LnBhcmFtZXRlcnMubWF4VmFsdWUgJSAxID09PSAwICYmIHRoaXMudmlldy5wYXJhbWV0ZXJzLm1pblZhbHVlICUgMSA9PT0gMCkge1xyXG4gICAgICAgIHRoaXMudmlldy5wYXJhbWV0ZXJzLmlzRmxvYXQgPSBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBzdGVwTW9kO1xyXG4gIH1cclxuXHJcbiAgY2hlY2tNYXhWYWx1ZSA9IChtYXhWYWx1ZTogc3RyaW5nKTogbnVtYmVyID0+IHtcclxuICAgIGxldCBtYXhWYWx1ZU1vZCA9IFBhcnNpbmdEaWdpdHMucGFyc2luZyhtYXhWYWx1ZSk7XHJcblxyXG4gICAgaWYgKG1heFZhbHVlTW9kID09PSBudWxsIHx8IG1heFZhbHVlTW9kIDw9IHRoaXMudmlldy5wYXJhbWV0ZXJzLm1pblZhbHVlKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdXcm9uZyB2YWx1ZSBvZiB0aGUgbWF4VmFsdWUnKTtcclxuICAgICAgcmV0dXJuIHRoaXMudmlldy5wYXJhbWV0ZXJzLm1heFZhbHVlO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChtYXhWYWx1ZU1vZCAlIDEgIT09IDApIHtcclxuICAgICAgdGhpcy52aWV3LnBhcmFtZXRlcnMuaXNGbG9hdCA9IHRydWU7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBpZiAodGhpcy52aWV3LnBhcmFtZXRlcnMuc3RlcCAlIDEgPT09IDAgJiYgdGhpcy52aWV3LnBhcmFtZXRlcnMubWluVmFsdWUgJSAxID09PSAwKSB7XHJcbiAgICAgICAgdGhpcy52aWV3LnBhcmFtZXRlcnMuaXNGbG9hdCA9IGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIG1heFZhbHVlTW9kO1xyXG4gIH1cclxuXHJcbiAgY2hlY2tNaW5WYWx1ZSA9IChtaW5WYWx1ZTogc3RyaW5nKTogbnVtYmVyID0+IHtcclxuICAgIGxldCBtaW5WYWx1ZU1vZCA9IFBhcnNpbmdEaWdpdHMucGFyc2luZyhtaW5WYWx1ZSk7XHJcblxyXG4gICAgaWYgKG1pblZhbHVlTW9kID09PSBudWxsIHx8IG1pblZhbHVlTW9kID49IHRoaXMudmlldy5wYXJhbWV0ZXJzLm1heFZhbHVlKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdXcm9uZyB2YWx1ZSBvZiB0aGUgbWluVmFsdWUnKTtcclxuICAgICAgcmV0dXJuIHRoaXMudmlldy5wYXJhbWV0ZXJzLm1pblZhbHVlO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChtaW5WYWx1ZU1vZCAlIDEgIT09IDApIHtcclxuICAgICAgdGhpcy52aWV3LnBhcmFtZXRlcnMuaXNGbG9hdCA9IHRydWU7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBpZiAodGhpcy52aWV3LnBhcmFtZXRlcnMubWF4VmFsdWUgJSAxID09PSAwICYmIHRoaXMudmlldy5wYXJhbWV0ZXJzLnN0ZXAgJSAxID09PSAwKSB7XHJcbiAgICAgICAgdGhpcy52aWV3LnBhcmFtZXRlcnMuaXNGbG9hdCA9IGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIG1pblZhbHVlTW9kO1xyXG4gIH1cclxuXHJcbiAgdXBkYXRlQ29uZmlnID0gKGFyZ3M6IGFueSk6IHZvaWQgPT4ge1xyXG4gICAgT2JqZWN0LmtleXMoYXJncykubWFwKChrZXkpID0+IHtcclxuICAgICAgaWYgKGtleSA9PT0gJ3N0ZXAnKSB7XHJcbiAgICAgICAgYXJncy5zdGVwID0gdGhpcy5jaGVja1N0ZXAoYXJncy5zdGVwKTtcclxuICAgICAgfSBlbHNlIGlmIChrZXkgPT09ICdtYXhWYWx1ZScpIHtcclxuICAgICAgICBhcmdzLm1heFZhbHVlID0gdGhpcy5jaGVja01heFZhbHVlKGFyZ3MubWF4VmFsdWUpO1xyXG4gICAgICB9IGVsc2UgaWYgKGtleSA9PT0gJ21pblZhbHVlJykge1xyXG4gICAgICAgIGFyZ3MubWluVmFsdWUgPSB0aGlzLmNoZWNrTWluVmFsdWUoYXJncy5taW5WYWx1ZSk7XHJcbiAgICAgIH1cclxuICAgIH0pXHJcblxyXG4gICAgdGhpcy52aWV3LnBhcmFtZXRlcnMgPSBPYmplY3QuYXNzaWduKHRoaXMudmlldy5wYXJhbWV0ZXJzLCBhcmdzKTtcclxuXHJcbiAgICB0aGlzLnZpZXcuaW5pdCgpO1xyXG4gIH1cclxuXHJcbiAgZ2V0VmFsdWVzID0gKCk6IHR5cGVzLkN1cnJlbnRWYWx1ZXMgPT4ge1xyXG4gICAgcmV0dXJuIHRoaXMubW9kZWwuY3VycmVudFZhbHVlcztcclxuICB9XHJcblxyXG4gIHNldFZhbHVlcyA9IChjdXJyZW50TWluVmFsdWU6IG51bWJlciwgY3VycmVudE1heFZhbHVlOiBudW1iZXIpOiB2b2lkID0+IHtcclxuICAgIGlmIChjdXJyZW50TWluVmFsdWUgfHwgY3VycmVudE1pblZhbHVlID09PSAwKSB7XHJcbiAgICAgIHRoaXMubW9kZWwuc2V0Q3VycmVudE1pblZhbHVlKGN1cnJlbnRNaW5WYWx1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGN1cnJlbnRNYXhWYWx1ZSB8fCBjdXJyZW50TWF4VmFsdWUgPT09IDApIHtcclxuICAgICAgdGhpcy5tb2RlbC5zZXRDdXJyZW50TWF4VmFsdWUoY3VycmVudE1heFZhbHVlKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGdldENvbmZpZyA9ICgpOiB0eXBlcy5QYXJhbWV0ZXJzID0+IHtcclxuICAgIHJldHVybiB0aGlzLnZpZXcucGFyYW1ldGVycztcclxuICB9XHJcblxyXG4gIGFkZE9ic2VydmVyID0gKGZuOiBGdW5jdGlvbik6IHZvaWQgPT4ge1xyXG4gICAgdGhpcy5vYnNlcnZlcnMuYWRkT2JzZXJ2ZXIoZm4pO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgQ29udHJvbGxlcjsiLCJpbXBvcnQgKiBhcyB0eXBlcyBmcm9tICcuLi90eXBlcyc7XHJcbmltcG9ydCBNYWtlT2JzZXJ2YWJsZU9iamVjdCBmcm9tICcuLi9tYWtlT2JzZXJ2YWJsZU9iamVjdC9NYWtlT2JzZXJ2YWJsZU9iamVjdCc7XHJcbmltcG9ydCBjcmVhdGVFbGVtIGZyb20gJy4vYmxvY2tzL2NyZWF0ZUVsZW0vY3JlYXRlRWxlbSc7XHJcbmltcG9ydCBCYXIgZnJvbSAnLi9ibG9ja3MvYmFyL0Jhcic7XHJcbmltcG9ydCBTY2FsZSBmcm9tICcuL2Jsb2Nrcy9zY2FsZS9TY2FsZSc7XHJcbmltcG9ydCBSdW5uZXIgZnJvbSAnLi9ibG9ja3MvcnVubmVyL1J1bm5lcic7XHJcbmltcG9ydCBUcmFjayBmcm9tICcuL2Jsb2Nrcy90cmFjay9UcmFjayc7XHJcbmltcG9ydCBQcm9ncmVzc0JhciBmcm9tICcuL2Jsb2Nrcy9wcm9ncmVzc0Jhci9Qcm9ncmVzc0Jhcic7XHJcblxyXG5jbGFzcyBWaWV3IHtcclxuICBiYXI6IEJhcjtcclxuICBwcm9ncmVzc0JhcjogUHJvZ3Jlc3NCYXI7XHJcbiAgcnVubmVyQWRkaXRpb25hbDogUnVubmVyO1xyXG4gIHJ1bm5lck1haW46IFJ1bm5lcjtcclxuICBwYXJhbWV0ZXJzOiB0eXBlcy5QYXJhbWV0ZXJzO1xyXG4gIGN1cnJlbnRWYWx1ZXM6IHR5cGVzLkN1cnJlbnRWYWx1ZXM7XHJcbiAgb2JzZXJ2ZXJzOiBNYWtlT2JzZXJ2YWJsZU9iamVjdDtcclxuICBzY2FsZTogU2NhbGU7XHJcbiAgdHJhY2s6IFRyYWNrO1xyXG5cclxuICBjb25zdHJ1Y3RvcihwYXJhbWV0ZXJzID0gdHlwZXMuZGVmYXVsdFBhcmFtZXRlcnMpIHtcclxuICAgIHRoaXMuYmFyID0gbmV3IEJhcihwYXJhbWV0ZXJzLmlzVmVydGljYWwpO1xyXG4gICAgdGhpcy5wcm9ncmVzc0JhciA9IG5ldyBQcm9ncmVzc0JhcihwYXJhbWV0ZXJzLmlzVmVydGljYWwpO1xyXG4gICAgdGhpcy5jdXJyZW50VmFsdWVzID0ge1xyXG4gICAgICBjdXJyZW50TWluVmFsdWU6IHBhcmFtZXRlcnMubWluVmFsdWUsXHJcbiAgICAgIGN1cnJlbnRNYXhWYWx1ZTogcGFyYW1ldGVycy5tYXhWYWx1ZSxcclxuICAgIH1cclxuICAgIHRoaXMub2JzZXJ2ZXJzID0gbmV3IE1ha2VPYnNlcnZhYmxlT2JqZWN0KCk7XHJcbiAgICB0aGlzLnBhcmFtZXRlcnMgPSBwYXJhbWV0ZXJzO1xyXG5cclxuICAgIHRoaXMuc2NhbGUgPSBuZXcgU2NhbGUocGFyYW1ldGVycywgdGhpcy5ncmFkdWF0aW9uT2JzZXJ2ZXIpO1xyXG4gICAgdGhpcy5ydW5uZXJBZGRpdGlvbmFsID0gbmV3IFJ1bm5lcihwYXJhbWV0ZXJzLmlzVmVydGljYWwsIHRoaXMucnVubmVyT2JzZXJ2ZXIpO1xyXG4gICAgdGhpcy5ydW5uZXJNYWluID0gbmV3IFJ1bm5lcihwYXJhbWV0ZXJzLmlzVmVydGljYWwsIHRoaXMucnVubmVyT2JzZXJ2ZXIpO1xyXG5cclxuICAgIHRoaXMudHJhY2sgPSBuZXcgVHJhY2soe1xyXG4gICAgICBydW5uZXJNYWluOiB0aGlzLnJ1bm5lck1haW4sXHJcbiAgICAgIHJ1bm5lckFkZGl0aW9uYWw6IHRoaXMucnVubmVyQWRkaXRpb25hbCxcclxuICAgICAgcHJvZ3Jlc3NCYXI6IHRoaXMucHJvZ3Jlc3NCYXIsXHJcbiAgICAgIGJhcjogdGhpcy5iYXIsXHJcbiAgICAgIHBhcmFtZXRlcnM6IHRoaXMucGFyYW1ldGVycyxcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZ3JhZHVhdGlvbk9ic2VydmVyID0gKHZhbHVlOiBudW1iZXIpID0+IHtcclxuICAgIGxldCBvZmZzZXQgPSB0aGlzLnRyYWNrLm9mZnNldFZhbHVlQ29udmVydGVyKHZhbHVlKTtcclxuICAgIGxldCBydW5uZXI7XHJcblxyXG4gICAgaWYgKHRoaXMucGFyYW1ldGVycy5pc1JhbmdlKSB7XHJcbiAgICAgIHJ1bm5lciA9IHRoaXMuY2hlY2tSdW5uZXJDbG9zZXIob2Zmc2V0KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJ1bm5lciA9IHRoaXMucnVubmVyTWFpbjtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLm1vdmVSdW5uZXIodGhpcy50cmFjay5vZmZzZXRQcm9jZXNzaW5nKG9mZnNldCwgcnVubmVyKSk7XHJcbiAgfVxyXG5cclxuICBydW5uZXJPYnNlcnZlciA9ICh7IGV2ZW50LCBydW5uZXIgfTogdHlwZXMuUnVubmVyT2JzZXJ2ZXJEYXRhKTogdm9pZCA9PiB7XHJcbiAgICB0aGlzLm1vdmVSdW5uZXIodGhpcy50cmFjay5vblJ1bm5lck1vdmUoZXZlbnQsIHJ1bm5lcikpO1xyXG4gIH1cclxuXHJcbiAgbW92ZVJ1bm5lciA9IChvYmo6IHR5cGVzLlJ1bm5lck1vdmVEYXRhKTogdm9pZCA9PiB7XHJcbiAgICBvYmoucnVubmVyLnNldFBvc2l0aW9uKG9iai5vZmZzZXQsIG9iai52YWx1ZSk7XHJcblxyXG4gICAgaWYgKG9iai5ydW5uZXIgPT09IHRoaXMucnVubmVyQWRkaXRpb25hbCkge1xyXG4gICAgICB0aGlzLmN1cnJlbnRWYWx1ZXMuY3VycmVudE1pblZhbHVlID0gb2JqLnZhbHVlO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChvYmoucnVubmVyID09PSB0aGlzLnJ1bm5lck1haW4pIHtcclxuICAgICAgdGhpcy5jdXJyZW50VmFsdWVzLmN1cnJlbnRNYXhWYWx1ZSA9IG9iai52YWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnRyYWNrLnVwZGF0ZVByb2dyZXNzQmFyKCk7XHJcbiAgICB0aGlzLm9ic2VydmVycy5ub3RpZnlPYnNlcnZlcnMoKTtcclxuICB9XHJcblxyXG4gIGNoZWNrUnVubmVyQ2xvc2VyID0gKG9mZnNldDogbnVtYmVyKTogUnVubmVyID0+IHtcclxuICAgIGlmIChNYXRoLmFicyhvZmZzZXQgLSB0aGlzLnRyYWNrLmdldE1haW5SdW5uZXJPZmZzZXQoKSkgPCBNYXRoLmFicyhvZmZzZXQgLSB0aGlzLnRyYWNrLmdldEFkZGl0aW9uYWxSdW5uZXJPZmZzZXQoKSkpIHtcclxuICAgICAgcmV0dXJuIHRoaXMucnVubmVyTWFpbjtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gdGhpcy5ydW5uZXJBZGRpdGlvbmFsO1xyXG4gIH1cclxuXHJcbiAgb25DbGlja0JhckhhbmRsZXIgPSAoZXZlbnQ6IE1vdXNlRXZlbnQpOiB2b2lkID0+IHtcclxuICAgIGNvbnN0IGNvb3JkaW5hdGUgPSB0aGlzLnBhcmFtZXRlcnMuaXNWZXJ0aWNhbCA/IGV2ZW50LmNsaWVudFkgOiBldmVudC5jbGllbnRYO1xyXG4gICAgY29uc3Qgb2Zmc2V0ID0gY29vcmRpbmF0ZSAtIHRoaXMuYmFyLmdldFBvc2l0aW9uKCkgLSB0aGlzLnJ1bm5lck1haW4uZ2V0V2lkdGgoKS8yO1xyXG5cclxuICAgIHRoaXMubW92ZVJ1bm5lcih0aGlzLnRyYWNrLm9mZnNldFByb2Nlc3Npbmcob2Zmc2V0LCB0aGlzLmNoZWNrUnVubmVyQ2xvc2VyKG9mZnNldCkpKTtcclxuICB9XHJcblxyXG4gIGluaXQgPSAoKTogdm9pZCA9PiB7XHJcbiAgICB0aGlzLmJhci5pbml0KHRoaXMucGFyYW1ldGVycy5pc1ZlcnRpY2FsKTtcclxuICAgIHRoaXMucHJvZ3Jlc3NCYXIuaW5pdCh0aGlzLnBhcmFtZXRlcnMuaXNWZXJ0aWNhbCk7XHJcbiAgICB0aGlzLnJ1bm5lckFkZGl0aW9uYWwuaW5pdCh0aGlzLnBhcmFtZXRlcnMuaXNWZXJ0aWNhbCk7XHJcbiAgICB0aGlzLnJ1bm5lck1haW4uaW5pdCh0aGlzLnBhcmFtZXRlcnMuaXNWZXJ0aWNhbCk7XHJcbiAgICB0aGlzLnRyYWNrLmluaXQodGhpcy5wYXJhbWV0ZXJzKTtcclxuXHJcbiAgICB0aGlzLnNjYWxlLmluaXQodGhpcy5wYXJhbWV0ZXJzKTtcclxuXHJcbiAgICB0aGlzLnJ1bm5lckFkZGl0aW9uYWwuaGlkZVJ1bm5lcigpO1xyXG5cclxuICAgIGlmICh0aGlzLnBhcmFtZXRlcnMuc2hvd0xhYmVsKSB7XHJcbiAgICAgIHRoaXMucnVubmVyQWRkaXRpb25hbC5zaG93TGFiZWwoKTtcclxuICAgICAgdGhpcy5ydW5uZXJNYWluLnNob3dMYWJlbCgpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5ydW5uZXJBZGRpdGlvbmFsLmhpZGVMYWJlbCgpO1xyXG4gICAgICB0aGlzLnJ1bm5lck1haW4uaGlkZUxhYmVsKCk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHRoaXMucGFyYW1ldGVycy5pc1JhbmdlKSB7XHJcbiAgICAgIHRoaXMucnVubmVyQWRkaXRpb25hbC5zaG93UnVubmVyKCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLnJ1bm5lckFkZGl0aW9uYWwuaGlkZVJ1bm5lcigpO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMucnVubmVyQWRkaXRpb25hbC5zZXRQb3NpdGlvbigtdGhpcy5ydW5uZXJBZGRpdGlvbmFsLmdldFdpZHRoKCkvMiwgdGhpcy5wYXJhbWV0ZXJzLm1pblZhbHVlKTtcclxuICAgIHRoaXMucnVubmVyTWFpbi5zZXRQb3NpdGlvbih0aGlzLmJhci5nZXREaW1lbnNpb24oKSAtIHRoaXMucnVubmVyTWFpbi5nZXRXaWR0aCgpLzIsIHRoaXMucGFyYW1ldGVycy5tYXhWYWx1ZSk7XHJcblxyXG4gICAgdGhpcy5yZW5ld1J1bm5lcnMoKTtcclxuICB9XHJcblxyXG4gIHJlbmV3UnVubmVycygpIHtcclxuICAgIHRoaXMubW92ZVJ1bm5lcih0aGlzLnRyYWNrLm9mZnNldFByb2Nlc3NpbmcodGhpcy50cmFjay5vZmZzZXRWYWx1ZUNvbnZlcnRlcih0aGlzLmN1cnJlbnRWYWx1ZXMuY3VycmVudE1heFZhbHVlKSwgdGhpcy5ydW5uZXJNYWluKSk7XHJcbiAgICB0aGlzLm1vdmVSdW5uZXIodGhpcy50cmFjay5vZmZzZXRQcm9jZXNzaW5nKHRoaXMudHJhY2sub2Zmc2V0VmFsdWVDb252ZXJ0ZXIodGhpcy5jdXJyZW50VmFsdWVzLmN1cnJlbnRNaW5WYWx1ZSksIHRoaXMucnVubmVyQWRkaXRpb25hbCkpO1xyXG4gIH1cclxuXHJcbiAgYXBwZW5kVG9Ob2RlID0gKGVudHJ5OiBIVE1MRWxlbWVudCk6IHZvaWQgPT4ge1xyXG4gICAgZW50cnkuYXBwZW5kQ2hpbGQodGhpcy5iYXIuZWxlbSkuYXBwZW5kQ2hpbGQodGhpcy5wcm9ncmVzc0Jhci5lbGVtKTtcclxuICAgIHRoaXMucnVubmVyTWFpbi5hcHBlbmRUb05vZGUoZW50cnkpO1xyXG4gICAgdGhpcy5ydW5uZXJBZGRpdGlvbmFsLmFwcGVuZFRvTm9kZShlbnRyeSk7XHJcblxyXG4gICAgdGhpcy5zY2FsZS5tYXJrcy5tYXAoKG1hcmspID0+IHtcclxuICAgICAgZW50cnkuYXBwZW5kQ2hpbGQobWFyay5lbGVtKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMuc2NhbGUubW92ZU1hcmtzKCk7XHJcblxyXG4gICAgdGhpcy5iYXIuZWxlbS5vbmNsaWNrID0gdGhpcy5vbkNsaWNrQmFySGFuZGxlcjtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCB7Y3JlYXRlRWxlbSwgQmFyLCBWaWV3LCBTY2FsZSBhcyBHcmFkdWF0aW9ufTtcclxuIiwiaW1wb3J0IGNyZWF0ZUVsZW0gZnJvbSAnLi4vY3JlYXRlRWxlbS9jcmVhdGVFbGVtJztcclxuaW1wb3J0IE1ha2VPYnNlcnZhYmxlT2JqZWN0IGZyb20gJy4uLy4uLy4uL21ha2VPYnNlcnZhYmxlT2JqZWN0L01ha2VPYnNlcnZhYmxlT2JqZWN0JztcclxuXHJcbmNsYXNzIE1hcmsge1xyXG4gIGVsZW06IEhUTUxFbGVtZW50O1xyXG4gIGlzVmVydGljYWw6IGJvb2xlYW47XHJcbiAgdmFsdWU6IG51bWJlcjtcclxuICBvYnNlcnZlcnM6IE1ha2VPYnNlcnZhYmxlT2JqZWN0O1xyXG5cclxuICBjb25zdHJ1Y3Rvcihpc1ZlcnRpY2FsOiBib29sZWFuKSB7XHJcbiAgICB0aGlzLmVsZW0gPSBjcmVhdGVFbGVtKCdzbGlkZXJfX21hcmsnKTtcclxuICAgIHRoaXMuaXNWZXJ0aWNhbCA9IGlzVmVydGljYWw7XHJcbiAgICB0aGlzLm9ic2VydmVycyA9IG5ldyBNYWtlT2JzZXJ2YWJsZU9iamVjdCgpO1xyXG4gICAgdGhpcy5lbGVtLm9uY2xpY2sgPSB0aGlzLm9uQ2xpY2tIYW5kbGVyO1xyXG4gIH1cclxuXHJcbiAgb25DbGlja0hhbmRsZXIgPSAoKTogdm9pZCA9PiB7XHJcbiAgICB0aGlzLm9ic2VydmVycy5ub3RpZnlPYnNlcnZlcnMoKTtcclxuICB9XHJcblxyXG4gIGdldFBvc2l0aW9uID0gKCk6IG51bWJlciA9PiB7XHJcbiAgICBpZiAodGhpcy5pc1ZlcnRpY2FsKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLmVsZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB0aGlzLmVsZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdDtcclxuICB9XHJcblxyXG4gIHNldFBvc2l0aW9uID0gKG9mZnNldDogbnVtYmVyLCB2YWx1ZTogbnVtYmVyKTogdm9pZCA9PiB7XHJcbiAgICB0aGlzLmVsZW0uaW5uZXJIVE1MID0gdmFsdWUgKyAnJztcclxuICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcclxuXHJcbiAgICBpZiAodGhpcy5pc1ZlcnRpY2FsKSB7XHJcbiAgICAgIHRoaXMuZWxlbS5zdHlsZS5sZWZ0ID0gJzUwJSc7XHJcbiAgICAgIHRoaXMuZWxlbS5zdHlsZS50b3AgPSBvZmZzZXQgKyAnJSc7XHJcbiAgICAgIHRoaXMuZWxlbS5zdHlsZS5tYXJnaW5Ub3AgPSAtdGhpcy5nZXREaW1lbnNpb24oKS8yICsgJ3B4JztcclxuICAgICAgdGhpcy5lbGVtLnN0eWxlLm1hcmdpbkxlZnQgPSAnLTQ1cHgnO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5lbGVtLnN0eWxlLnRvcCA9ICc1MCUnO1xyXG4gICAgICB0aGlzLmVsZW0uc3R5bGUubGVmdCA9IG9mZnNldCArICclJztcclxuICAgICAgdGhpcy5lbGVtLnN0eWxlLm1hcmdpbkxlZnQgPSAtdGhpcy5nZXREaW1lbnNpb24oKS8yICsgJ3B4JztcclxuICAgICAgdGhpcy5lbGVtLnN0eWxlLm1hcmdpblRvcCA9ICcxNXB4JztcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGdldERpbWVuc2lvbiA9ICgpOiBudW1iZXIgPT4ge1xyXG4gICAgaWYgKHRoaXMuaXNWZXJ0aWNhbCkge1xyXG4gICAgICByZXR1cm4gdGhpcy5lbGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmhlaWdodDtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gdGhpcy5lbGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoO1xyXG4gIH1cclxuXHJcbiAgaW5pdCA9IChpc1ZlcnRpY2FsOiBib29sZWFuKTogdm9pZCA9PiB7XHJcbiAgICB0aGlzLmlzVmVydGljYWwgPSBpc1ZlcnRpY2FsO1xyXG5cclxuICAgIGlmICh0aGlzLmlzVmVydGljYWwpIHtcclxuICAgICAgdGhpcy5lbGVtLmNsYXNzTGlzdC5hZGQoJ3NsaWRlcl9fbWFya19wb3NpdGlvbl92ZXJ0aWNhbCcpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5lbGVtLmNsYXNzTGlzdC5yZW1vdmUoJ3NsaWRlcl9fbWFya19wb3NpdGlvbl92ZXJ0aWNhbCcpO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgTWFyazsiLCJpbXBvcnQgY3JlYXRlRWxlbSBmcm9tICcuLi9jcmVhdGVFbGVtL2NyZWF0ZUVsZW0nO1xyXG5cclxuY2xhc3MgQnV0dG9uIHtcclxuICBlbGVtOiBIVE1MRWxlbWVudDtcclxuXHJcbiAgaXNWZXJ0aWNhbDogYm9vbGVhbjtcclxuXHJcbiAgY29uc3RydWN0b3IoaXNWZXJ0aWNhbDogYm9vbGVhbikge1xyXG4gICAgdGhpcy5lbGVtID0gY3JlYXRlRWxlbSgnc2xpZGVyX19idXR0b24nKTtcclxuICAgIHRoaXMuaXNWZXJ0aWNhbCA9IGlzVmVydGljYWw7XHJcbiAgfVxyXG5cclxuICBnZXRXaWR0aCA9ICgpOiBudW1iZXIgPT4ge1xyXG4gICAgcmV0dXJuIHRoaXMuZWxlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aDtcclxuICB9XHJcblxyXG4gIGdldFBvc2l0aW9uID0gKCk6IG51bWJlciA9PiB7XHJcbiAgICBpZiAodGhpcy5pc1ZlcnRpY2FsKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLmVsZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB0aGlzLmVsZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdDtcclxuICB9XHJcblxyXG4gIHNldFBvc2l0aW9uID0gKG9mZnNldDogbnVtYmVyKTogdm9pZCA9PiB7XHJcbiAgICBpZiAodGhpcy5pc1ZlcnRpY2FsKSB7XHJcbiAgICAgIHRoaXMuZWxlbS5zdHlsZS5sZWZ0ID0gJzUwJSc7XHJcbiAgICAgIHRoaXMuZWxlbS5zdHlsZS50b3AgPSBvZmZzZXQgKyAncHgnO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5lbGVtLnN0eWxlLnRvcCA9ICc1MCUnO1xyXG4gICAgICB0aGlzLmVsZW0uc3R5bGUubGVmdCA9IG9mZnNldCArICdweCc7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBpbml0ID0gKGlzVmVydGljYWw6IGJvb2xlYW4pOiB2b2lkID0+IHtcclxuICAgIHRoaXMuaXNWZXJ0aWNhbCA9IGlzVmVydGljYWw7XHJcblxyXG4gICAgaWYgKHRoaXMuaXNWZXJ0aWNhbCkge1xyXG4gICAgICB0aGlzLmVsZW0uY2xhc3NMaXN0LmFkZCgnc2xpZGVyX19idXR0b25fcG9zaXRpb25fdmVydGljYWwnKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuZWxlbS5jbGFzc0xpc3QucmVtb3ZlKCdzbGlkZXJfX2J1dHRvbl9wb3NpdGlvbl92ZXJ0aWNhbCcpO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgQnV0dG9uO1xyXG4iLCJpbXBvcnQgY3JlYXRlRWxlbSBmcm9tICcuLi9jcmVhdGVFbGVtL2NyZWF0ZUVsZW0nO1xyXG5cclxuY2xhc3MgTGFiZWwge1xyXG4gIGVsZW06IEhUTUxFbGVtZW50O1xyXG4gIGlzVmVydGljYWw6IGJvb2xlYW47XHJcblxyXG4gIGNvbnN0cnVjdG9yKGlzVmVydGljYWw6IGJvb2xlYW4pIHtcclxuICAgIHRoaXMuZWxlbSA9IGNyZWF0ZUVsZW0oJ3NsaWRlcl9fYnV0dG9uLWxhYmVsJyk7XHJcbiAgICB0aGlzLmlzVmVydGljYWwgPSBpc1ZlcnRpY2FsO1xyXG4gIH1cclxuXHJcbiAgZ2V0UG9zaXRpb24gPSAoKTogbnVtYmVyID0+IHtcclxuICAgIGlmICh0aGlzLmlzVmVydGljYWwpIHtcclxuICAgICAgcmV0dXJuIHRoaXMuZWxlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3A7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuZWxlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0O1xyXG4gIH1cclxuXHJcbiAgc2V0UG9zaXRpb24gPSAob2Zmc2V0OiBudW1iZXIsIHZhbHVlOiBudW1iZXIpOiB2b2lkID0+IHtcclxuICAgIHRoaXMuZWxlbS5pbm5lckhUTUwgPSB2YWx1ZSArICcnO1xyXG5cclxuICAgIGlmICh0aGlzLmlzVmVydGljYWwpIHtcclxuICAgICAgdGhpcy5lbGVtLnN0eWxlLmxlZnQgPSAnNTAlJztcclxuICAgICAgdGhpcy5lbGVtLnN0eWxlLnRvcCA9IG9mZnNldCAtIHRoaXMuZ2V0RGltZW5zaW9uKCkvMiArICdweCc7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLmVsZW0uc3R5bGUudG9wID0gJzUwJSc7XHJcbiAgICAgIHRoaXMuZWxlbS5zdHlsZS5sZWZ0ID0gb2Zmc2V0IC0gdGhpcy5nZXREaW1lbnNpb24oKS8yICsgJ3B4JztcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGdldERpbWVuc2lvbiA9ICgpOiBudW1iZXIgPT4ge1xyXG4gICAgaWYgKHRoaXMuaXNWZXJ0aWNhbCkge1xyXG4gICAgICByZXR1cm4gdGhpcy5lbGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmhlaWdodDtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gdGhpcy5lbGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoO1xyXG4gIH1cclxuXHJcbiAgaW5pdCA9IChpc1ZlcnRpY2FsOiBib29sZWFuKTogdm9pZCA9PiB7XHJcbiAgICB0aGlzLmlzVmVydGljYWwgPSBpc1ZlcnRpY2FsO1xyXG5cclxuICAgIGlmICh0aGlzLmlzVmVydGljYWwpIHtcclxuICAgICAgdGhpcy5lbGVtLmNsYXNzTGlzdC5hZGQoJ3NsaWRlcl9fYnV0dG9uLWxhYmVsX3Bvc2l0aW9uX3ZlcnRpY2FsJyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLmVsZW0uY2xhc3NMaXN0LnJlbW92ZSgnc2xpZGVyX19idXR0b24tbGFiZWxfcG9zaXRpb25fdmVydGljYWwnKTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IExhYmVsOyIsImltcG9ydCAqIGFzIHR5cGVzIGZyb20gJy4uLy4uLy4uL3R5cGVzJztcclxuaW1wb3J0IEJhciBmcm9tICcuLi9iYXIvQmFyJztcclxuaW1wb3J0IFJ1bm5lciBmcm9tICcuLi8uLi9ibG9ja3MvcnVubmVyL1J1bm5lcic7XHJcbmltcG9ydCBQcm9ncmVzc0JhciBmcm9tICcuLi8uLi9ibG9ja3MvcHJvZ3Jlc3NCYXIvUHJvZ3Jlc3NCYXInO1xyXG5cclxuY2xhc3MgVHJhY2sge1xyXG4gIHBhcmFtZXRlcnM6IHR5cGVzLlBhcmFtZXRlcnM7XHJcbiAgcnVubmVyTWFpbjogUnVubmVyO1xyXG4gIHJ1bm5lckFkZGl0aW9uYWw6IFJ1bm5lcjtcclxuICBwcm9ncmVzc0JhcjogUHJvZ3Jlc3NCYXI7XHJcbiAgc2NhbGU6IEJhcjtcclxuXHJcbiAgY29uc3RydWN0b3IoZGF0YTogdHlwZXMuVHJhY2tDb25zdHJ1Y3RvckRhdGEpIHtcclxuICAgIHRoaXMuc2NhbGUgPSBkYXRhLmJhcjtcclxuICAgIHRoaXMucnVubmVyTWFpbiA9IGRhdGEucnVubmVyTWFpbjtcclxuICAgIHRoaXMucnVubmVyQWRkaXRpb25hbCA9IGRhdGEucnVubmVyQWRkaXRpb25hbDtcclxuICAgIHRoaXMucHJvZ3Jlc3NCYXIgPSBkYXRhLnByb2dyZXNzQmFyO1xyXG4gICAgdGhpcy5wYXJhbWV0ZXJzID0gZGF0YS5wYXJhbWV0ZXJzO1xyXG4gIH1cclxuXHJcbiAgb25SdW5uZXJNb3ZlID0gKGV2ZW50TW06IE1vdXNlRXZlbnQsIHJ1bm5lcjogUnVubmVyKTogdHlwZXMuUnVubmVyTW92ZURhdGEgPT4ge1xyXG4gICAgY29uc3QgY29vcmRpbmF0ZSA9IHRoaXMucGFyYW1ldGVycy5pc1ZlcnRpY2FsID8gZXZlbnRNbS5jbGllbnRZIDogZXZlbnRNbS5jbGllbnRYO1xyXG4gICAgY29uc3Qgb2Zmc2V0ID0gY29vcmRpbmF0ZSAtIHRoaXMuc2NhbGUuZ2V0UG9zaXRpb24oKSAtIHRoaXMucnVubmVyQWRkaXRpb25hbC5nZXRXaWR0aCgpLzI7XHJcblxyXG4gICAgcmV0dXJuIHRoaXMub2Zmc2V0UHJvY2Vzc2luZyhvZmZzZXQsIHJ1bm5lcik7XHJcbiAgfVxyXG5cclxuICBvZmZzZXRQcm9jZXNzaW5nKG9mZnNldDogbnVtYmVyLCBydW5uZXI6IFJ1bm5lcik6IHR5cGVzLlJ1bm5lck1vdmVEYXRhIHtcclxuICAgIGxldCByb3VuZFZhbHVlO1xyXG4gICAgbGV0IHJvdW5kT2Zmc2V0O1xyXG4gICAgcm91bmRPZmZzZXQgPSB0aGlzLnJ1bm5lck9mZnNldENoZWNrKG9mZnNldCwgcnVubmVyKTtcclxuXHJcbiAgICBbcm91bmRPZmZzZXQsIHJvdW5kVmFsdWVdID0gdGhpcy5yb3VuZE9mZnNldEJ1dHQocm91bmRPZmZzZXQpO1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIHJ1bm5lcjogcnVubmVyLFxyXG4gICAgICBvZmZzZXQ6IHJvdW5kT2Zmc2V0LFxyXG4gICAgICB2YWx1ZTogcm91bmRWYWx1ZSxcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJ1bm5lck9mZnNldENoZWNrID0gKG5ld09mZnNldDogbnVtYmVyLCBydW5uZXI6IFJ1bm5lcik6IG51bWJlciA9PiB7XHJcbiAgICBjb25zdCBzdGVwV2lkdGggPSB0aGlzLnBhcmFtZXRlcnMuc3RlcCp0aGlzLnNjYWxlLmdldERpbWVuc2lvbigpLyh0aGlzLnBhcmFtZXRlcnMubWF4VmFsdWUgLSB0aGlzLnBhcmFtZXRlcnMubWluVmFsdWUpO1xyXG4gICAgY29uc3QgbWluT2Zmc2V0ID0gc3RlcFdpZHRoLzEuNSA+IHRoaXMucnVubmVyTWFpbi5nZXRXaWR0aCgpID8gc3RlcFdpZHRoLzEuNSA6IHRoaXMucnVubmVyTWFpbi5nZXRXaWR0aCgpO1xyXG5cclxuICAgIGlmIChydW5uZXIgPT09IHRoaXMucnVubmVyQWRkaXRpb25hbCkge1xyXG4gICAgICBpZiAobmV3T2Zmc2V0ID4gdGhpcy5ydW5uZXJNYWluLmdldFBvc2l0aW9uKCkgLSB0aGlzLnNjYWxlLmdldFBvc2l0aW9uKCkgLSBtaW5PZmZzZXQpIHtcclxuICAgICAgICBuZXdPZmZzZXQgPSB0aGlzLnJ1bm5lck1haW4uZ2V0UG9zaXRpb24oKSAtIHRoaXMuc2NhbGUuZ2V0UG9zaXRpb24oKSAtIG1pbk9mZnNldDtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIGlmIChydW5uZXIgPT09IHRoaXMucnVubmVyTWFpbikge1xyXG4gICAgICBpZiAobmV3T2Zmc2V0IDwgdGhpcy5ydW5uZXJBZGRpdGlvbmFsLmdldFBvc2l0aW9uKCkgLSB0aGlzLnNjYWxlLmdldFBvc2l0aW9uKCkgKyBtaW5PZmZzZXQpIHtcclxuICAgICAgICBuZXdPZmZzZXQgPSB0aGlzLnJ1bm5lckFkZGl0aW9uYWwuZ2V0UG9zaXRpb24oKSAtIHRoaXMuc2NhbGUuZ2V0UG9zaXRpb24oKSArIG1pbk9mZnNldDtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBuZXdPZmZzZXQ7XHJcbiAgfVxyXG5cclxuICByb3VuZE9mZnNldEJ1dHQgPSAoY3VycmVudE9mZnNldDogbnVtYmVyKTogQXJyYXk8bnVtYmVyPiA9PiB7XHJcbiAgICBjb25zdCBjdXJyZW50VmFsdWUgPSB0aGlzLnBhcmFtZXRlcnMubWluVmFsdWUgKyAoY3VycmVudE9mZnNldCArIHRoaXMucnVubmVyTWFpbi5nZXRXaWR0aCgpLzIpKih0aGlzLnBhcmFtZXRlcnMubWF4VmFsdWUgLSB0aGlzLnBhcmFtZXRlcnMubWluVmFsdWUpL3RoaXMuc2NhbGUuZ2V0RGltZW5zaW9uKCk7XHJcbiAgICBsZXQgcm91bmRWYWx1ZSA9IHRoaXMucm91bmQoY3VycmVudFZhbHVlLCB0aGlzLnBhcmFtZXRlcnMuc3RlcCk7XHJcblxyXG4gICAgaWYgKHRoaXMucGFyYW1ldGVycy5pc0Zsb2F0KSB7XHJcbiAgICAgIHJvdW5kVmFsdWUgPSBwYXJzZUZsb2F0KHJvdW5kVmFsdWUudG9GaXhlZCgyKSk7XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IHJvdW5kT2Zmc2V0ID0gdGhpcy5vZmZzZXRWYWx1ZUNvbnZlcnRlcihyb3VuZFZhbHVlKTtcclxuXHJcbiAgICBpZiAocm91bmRPZmZzZXQgPCAtdGhpcy5ydW5uZXJNYWluLmdldFdpZHRoKCkvMikge1xyXG4gICAgICByb3VuZE9mZnNldCA9IC10aGlzLnJ1bm5lck1haW4uZ2V0V2lkdGgoKS8yO1xyXG4gICAgICByb3VuZFZhbHVlID0gdGhpcy5wYXJhbWV0ZXJzLm1pblZhbHVlO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChyb3VuZE9mZnNldCA+IHRoaXMuc2NhbGUuZ2V0RGltZW5zaW9uKCkgLSB0aGlzLnJ1bm5lck1haW4uZ2V0V2lkdGgoKS8yKSB7XHJcbiAgICAgIHJvdW5kT2Zmc2V0ID0gdGhpcy5zY2FsZS5nZXREaW1lbnNpb24oKSAtIHRoaXMucnVubmVyTWFpbi5nZXRXaWR0aCgpLzI7XHJcbiAgICAgIHJvdW5kVmFsdWUgPSB0aGlzLnBhcmFtZXRlcnMubWF4VmFsdWU7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIFtyb3VuZE9mZnNldCwgcm91bmRWYWx1ZV07XHJcbiAgfVxyXG5cclxuICBvZmZzZXRWYWx1ZUNvbnZlcnRlciA9ICh2YWx1ZTogbnVtYmVyKTogbnVtYmVyID0+IHtcclxuICAgIHJldHVybiAoKHZhbHVlIC0gdGhpcy5wYXJhbWV0ZXJzLm1pblZhbHVlKS8odGhpcy5wYXJhbWV0ZXJzLm1heFZhbHVlIC0gdGhpcy5wYXJhbWV0ZXJzLm1pblZhbHVlKSp0aGlzLnNjYWxlLmdldERpbWVuc2lvbigpIC0gdGhpcy5ydW5uZXJNYWluLmdldFdpZHRoKCkvMik7XHJcbiAgfVxyXG5cclxuICByb3VuZCA9ICh2YWx1ZTogbnVtYmVyLCBzdGVwOiBudW1iZXIpOiBudW1iZXIgPT4ge1xyXG4gICAgY29uc3Qgd2hvbGUgPSBNYXRoLnRydW5jKHZhbHVlL3N0ZXApO1xyXG4gICAgY29uc3QgcmVtaW5kZXIgPSArKHZhbHVlIC0gd2hvbGUqc3RlcCkudG9GaXhlZCgyKTtcclxuXHJcbiAgICBpZiAodmFsdWUgPCAwKSB7XHJcbiAgICAgIHJldHVybiBNYXRoLmFicyhyZW1pbmRlcikgPCBzdGVwLzIgPyB3aG9sZSpzdGVwIDogKHdob2xlIC0gMSkqc3RlcDtcclxuICAgIH1cclxuXHJcbiAgICBpZiAodmFsdWUgPD0gdGhpcy5wYXJhbWV0ZXJzLm1pblZhbHVlKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLnBhcmFtZXRlcnMubWluVmFsdWU7XHJcbiAgICB9IGVsc2UgaWYgKHZhbHVlID49IHRoaXMucGFyYW1ldGVycy5tYXhWYWx1ZSkge1xyXG4gICAgICByZXR1cm4gdGhpcy5wYXJhbWV0ZXJzLm1heFZhbHVlO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiByZW1pbmRlciA8IHN0ZXAvMiA/IHdob2xlKnN0ZXAgOiAod2hvbGUgKyAxKSpzdGVwO1xyXG4gIH1cclxuXHJcbiAgZ2V0TWFpblJ1bm5lck9mZnNldCA9ICgpOiBudW1iZXIgPT4ge1xyXG4gICAgY29uc3Qgb2Zmc2V0ID0gdGhpcy5ydW5uZXJNYWluLmdldFBvc2l0aW9uKCkgLSB0aGlzLnNjYWxlLmdldFBvc2l0aW9uKCkgKyB0aGlzLnJ1bm5lck1haW4uZ2V0V2lkdGgoKS8yO1xyXG4gICAgcmV0dXJuIG9mZnNldCA8IDA/IDAgOiBvZmZzZXQ7XHJcbiAgfVxyXG5cclxuICBnZXRBZGRpdGlvbmFsUnVubmVyT2Zmc2V0ID0gKCk6IG51bWJlciA9PiB7XHJcbiAgICBpZiAodGhpcy5wYXJhbWV0ZXJzLmlzUmFuZ2UpIHtcclxuICAgICAgcmV0dXJuIHRoaXMucnVubmVyQWRkaXRpb25hbC5nZXRQb3NpdGlvbigpIC0gdGhpcy5zY2FsZS5nZXRQb3NpdGlvbigpICsgdGhpcy5ydW5uZXJNYWluLmdldFdpZHRoKCkvMjtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gMDtcclxuICB9XHJcblxyXG4gIHVwZGF0ZVByb2dyZXNzQmFyID0gKCk6IHZvaWQgPT4ge1xyXG4gICAgdGhpcy5wcm9ncmVzc0Jhci5pbml0KHRoaXMucGFyYW1ldGVycy5pc1ZlcnRpY2FsKTtcclxuICAgIHRoaXMucHJvZ3Jlc3NCYXIuc2V0UG9zaXRpb24odGhpcy5nZXRBZGRpdGlvbmFsUnVubmVyT2Zmc2V0KCkpO1xyXG4gICAgdGhpcy5wcm9ncmVzc0Jhci5zZXREaW1lbnNpb24odGhpcy5nZXRNYWluUnVubmVyT2Zmc2V0KCkgLSB0aGlzLmdldEFkZGl0aW9uYWxSdW5uZXJPZmZzZXQoKSk7XHJcbiAgfVxyXG5cclxuICBpbml0ID0gKHBhcmFtZXRlcnM6IHR5cGVzLlBhcmFtZXRlcnMpOiB2b2lkID0+IHtcclxuICAgIHRoaXMucGFyYW1ldGVycyA9IHBhcmFtZXRlcnM7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBUcmFjaztcclxuIiwiaW1wb3J0IGNyZWF0ZUVsZW0gZnJvbSAnLi4vY3JlYXRlRWxlbS9jcmVhdGVFbGVtJztcclxuXHJcbmNsYXNzIFByb2dyZXNzQmFyIHtcclxuICBlbGVtOiBIVE1MRWxlbWVudDtcclxuICBpc1ZlcnRpY2FsOiBib29sZWFuO1xyXG5cclxuICBjb25zdHJ1Y3Rvcihpc1ZlcnRpY2FsOiBib29sZWFuKSB7XHJcbiAgICB0aGlzLmVsZW0gPSBjcmVhdGVFbGVtKCdzbGlkZXJfX3NjYWxlLWZpbGxpbmcnKTtcclxuICAgIHRoaXMuaXNWZXJ0aWNhbCA9IGlzVmVydGljYWw7XHJcbiAgfVxyXG5cclxuICBzZXRQb3NpdGlvbiA9IChvZmZzZXQ6IG51bWJlcik6IHZvaWQgPT4ge1xyXG4gICAgaWYgKHRoaXMuaXNWZXJ0aWNhbCkge1xyXG4gICAgICB0aGlzLmVsZW0uc3R5bGUubGVmdCA9ICcwJztcclxuICAgICAgdGhpcy5lbGVtLnN0eWxlLndpZHRoID0gJzEwMCUnO1xyXG4gICAgICB0aGlzLmVsZW0uc3R5bGUudG9wID0gb2Zmc2V0ICsgJ3B4JztcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuZWxlbS5zdHlsZS50b3AgPSAnMCc7XHJcbiAgICAgIHRoaXMuZWxlbS5zdHlsZS5oZWlnaHQgPSAnMTAwJSc7XHJcbiAgICAgIHRoaXMuZWxlbS5zdHlsZS5sZWZ0ID0gb2Zmc2V0ICsgJ3B4JztcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNldERpbWVuc2lvbiA9IChkaW1lbnNpb246IG51bWJlcik6IHZvaWQgPT4ge1xyXG4gICAgaWYgKHRoaXMuaXNWZXJ0aWNhbCkge1xyXG4gICAgICB0aGlzLmVsZW0uc3R5bGUuaGVpZ2h0ID0gZGltZW5zaW9uICsgJ3B4JztcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuZWxlbS5zdHlsZS53aWR0aCA9IGRpbWVuc2lvbiArICdweCc7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBpbml0ID0gKGlzVmVydGljYWw6IGJvb2xlYW4pOiB2b2lkID0+IHtcclxuICAgIHRoaXMuaXNWZXJ0aWNhbCA9IGlzVmVydGljYWw7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBQcm9ncmVzc0JhcjtcclxuIiwiaW1wb3J0ICogYXMgdHlwZXMgZnJvbSAnLi4vdHlwZXMnO1xyXG5pbXBvcnQgTWFrZU9ic2VydmFibGVPYmplY3QgZnJvbSAnLi4vbWFrZU9ic2VydmFibGVPYmplY3QvTWFrZU9ic2VydmFibGVPYmplY3QnO1xyXG5cclxuY2xhc3MgTW9kZWwge1xyXG4gIGN1cnJlbnRWYWx1ZXM6IHR5cGVzLkN1cnJlbnRWYWx1ZXM7XHJcbiAgb2JzZXJ2ZXJzOiBNYWtlT2JzZXJ2YWJsZU9iamVjdDtcclxuXHJcbiAgY29uc3RydWN0b3IoY3VycmVudFZhbHVlczogdHlwZXMuQ3VycmVudFZhbHVlcykge1xyXG4gICAgdGhpcy5jdXJyZW50VmFsdWVzID0gY3VycmVudFZhbHVlcztcclxuICAgIHRoaXMub2JzZXJ2ZXJzID0gbmV3IE1ha2VPYnNlcnZhYmxlT2JqZWN0KCk7XHJcbiAgfVxyXG5cclxuICBzZXRDdXJyZW50TWluVmFsdWUoZGF0YTogbnVtYmVyKTogdm9pZCB7XHJcbiAgICBpZiAodGhpcy5jdXJyZW50VmFsdWVzLmN1cnJlbnRNaW5WYWx1ZSAhPT0gZGF0YSkge1xyXG4gICAgICB0aGlzLmN1cnJlbnRWYWx1ZXMuY3VycmVudE1pblZhbHVlID0gZGF0YTtcclxuICAgICAgdGhpcy5vYnNlcnZlcnMubm90aWZ5T2JzZXJ2ZXJzKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzZXRDdXJyZW50TWF4VmFsdWUoZGF0YTogbnVtYmVyKTogdm9pZCB7XHJcbiAgICBpZiAodGhpcy5jdXJyZW50VmFsdWVzLmN1cnJlbnRNYXhWYWx1ZSAhPT0gZGF0YSkge1xyXG4gICAgICB0aGlzLmN1cnJlbnRWYWx1ZXMuY3VycmVudE1heFZhbHVlID0gZGF0YTtcclxuICAgICAgdGhpcy5vYnNlcnZlcnMubm90aWZ5T2JzZXJ2ZXJzKCk7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBNb2RlbDsiLCJ2YXIgbWFwID0ge1xuXHRcIi4vQ29udHJvbGxlci9Db250cm9sbGVyLnRzXCI6IDcsXG5cdFwiLi9Db250cm9sbGVyL2Jsb2Nrcy9wYXJzaW5nRGlnaXRzL1BhcnNpbmdEaWdpdHMudHNcIjogMyxcblx0XCIuL01vZGVsL01vZGVsLnRzXCI6IDE0LFxuXHRcIi4vVmlldy9WaWV3LnRzXCI6IDgsXG5cdFwiLi9WaWV3L2Jsb2Nrcy9iYXIvQmFyLnRzXCI6IDQsXG5cdFwiLi9WaWV3L2Jsb2Nrcy9idXR0b24vQnV0dG9uLnRzXCI6IDEwLFxuXHRcIi4vVmlldy9ibG9ja3MvY3JlYXRlRWxlbS9jcmVhdGVFbGVtLnRzXCI6IDAsXG5cdFwiLi9WaWV3L2Jsb2Nrcy9sYWJlbC9MYWJlbC50c1wiOiAxMSxcblx0XCIuL1ZpZXcvYmxvY2tzL21hcmsvTWFyay50c1wiOiA5LFxuXHRcIi4vVmlldy9ibG9ja3MvcHJvZ3Jlc3NCYXIvUHJvZ3Jlc3NCYXIudHNcIjogMTMsXG5cdFwiLi9WaWV3L2Jsb2Nrcy9ydW5uZXIvUnVubmVyLnRzXCI6IDYsXG5cdFwiLi9WaWV3L2Jsb2Nrcy9zY2FsZS9TY2FsZS50c1wiOiA1LFxuXHRcIi4vVmlldy9ibG9ja3MvdHJhY2svVHJhY2sudHNcIjogMTIsXG5cdFwiLi9tYWtlT2JzZXJ2YWJsZU9iamVjdC9NYWtlT2JzZXJ2YWJsZU9iamVjdC50c1wiOiAxLFxuXHRcIi4vc2xpZGVyLnRzXCI6IDE2LFxuXHRcIi4vc3R5bGUuc2Nzc1wiOiAxNyxcblx0XCIuL3R5cGVzLnRzXCI6IDJcbn07XG5cblxuZnVuY3Rpb24gd2VicGFja0NvbnRleHQocmVxKSB7XG5cdHZhciBpZCA9IHdlYnBhY2tDb250ZXh0UmVzb2x2ZShyZXEpO1xuXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhpZCk7XG59XG5mdW5jdGlvbiB3ZWJwYWNrQ29udGV4dFJlc29sdmUocmVxKSB7XG5cdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8obWFwLCByZXEpKSB7XG5cdFx0dmFyIGUgPSBuZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiICsgcmVxICsgXCInXCIpO1xuXHRcdGUuY29kZSA9ICdNT0RVTEVfTk9UX0ZPVU5EJztcblx0XHR0aHJvdyBlO1xuXHR9XG5cdHJldHVybiBtYXBbcmVxXTtcbn1cbndlYnBhY2tDb250ZXh0LmtleXMgPSBmdW5jdGlvbiB3ZWJwYWNrQ29udGV4dEtleXMoKSB7XG5cdHJldHVybiBPYmplY3Qua2V5cyhtYXApO1xufTtcbndlYnBhY2tDb250ZXh0LnJlc29sdmUgPSB3ZWJwYWNrQ29udGV4dFJlc29sdmU7XG5tb2R1bGUuZXhwb3J0cyA9IHdlYnBhY2tDb250ZXh0O1xud2VicGFja0NvbnRleHQuaWQgPSAxNTsiLCJpbXBvcnQgQ29udHJvbGxlciBmcm9tICcuL0NvbnRyb2xsZXIvQ29udHJvbGxlcic7XHJcblxyXG4oZnVuY3Rpb24oJCkge1xyXG4gIGNvbnN0IGNvbmZpZyA9IHtcclxuICAgIG1pblZhbHVlOiAwLFxyXG4gICAgbWF4VmFsdWU6IDEwMDAsXHJcbiAgICBzdGVwOiAxLFxyXG4gICAgaXNSYW5nZTogZmFsc2UsXHJcbiAgICBpc1ZlcnRpY2FsOiBmYWxzZSxcclxuICAgIHNob3dMYWJlbDogZmFsc2UsXHJcbiAgICBpc0Zsb2F0OiBmYWxzZSxcclxuICB9O1xyXG5cclxuICBjb25zdCBtZXRob2RzOiBNZXRob2RzID0ge1xyXG4gICAgaW5pdDogZnVuY3Rpb24ob3B0OiBDb25maWcpIHtcclxuICAgICAgaWYgKCEkKHRoaXMpLmRhdGEoJ3NsaWRlcicpKSB7XHJcbiAgICAgICAgY29uc3QgbmV3Q29uZmlnID0geyAuLi5jb25maWcgfTtcclxuICAgICAgICBjb25zdCBzbGlkZXIgPSBuZXcgQ29udHJvbGxlcigkLmV4dGVuZChuZXdDb25maWcsIG9wdCkpO1xyXG4gICAgICAgICQodGhpcykuZGF0YSgnc2xpZGVyJywgc2xpZGVyKTtcclxuXHJcbiAgICAgICAgc2xpZGVyLmFwcGVuZFRvTm9kZSgkKHRoaXMpKTtcclxuICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICB1cGRhdGU6IGZ1bmN0aW9uKG9wdDogQ29uZmlnKSB7XHJcbiAgICAgIGNvbnN0IHNsaWRlciA9ICQodGhpcykuZGF0YSgnc2xpZGVyJyk7XHJcbiAgICAgIHNsaWRlci51cGRhdGVDb25maWcob3B0KTtcclxuICAgIH0sXHJcblxyXG4gICAgZ2V0Q29uZmlnOiBmdW5jdGlvbigpIHtcclxuICAgICAgY29uc3Qgc2xpZGVyID0gJCh0aGlzKS5kYXRhKCdzbGlkZXInKTtcclxuICAgICAgcmV0dXJuIHNsaWRlci5nZXRDb25maWcoKTtcclxuICAgIH0sXHJcblxyXG4gICAgc2V0VmFsdWVzOiBmdW5jdGlvbihvcHQ6IENvbmZpZykge1xyXG4gICAgICBjb25zdCBzbGlkZXIgPSAkKHRoaXMpLmRhdGEoJ3NsaWRlcicpO1xyXG4gICAgICBzbGlkZXIuc2V0VmFsdWVzKG9wdC5jdXJyZW50TWluVmFsdWUsIG9wdC5jdXJyZW50TWF4VmFsdWUpO1xyXG4gICAgfSxcclxuXHJcbiAgICBpbnB1dHNBdHRhY2g6IGZ1bmN0aW9uKG9wdDogSW5wdXRzT2JqZWN0KSB7XHJcbiAgICAgIGNvbnN0IHNsaWRlciA9ICQodGhpcykuZGF0YSgnc2xpZGVyJyk7XHJcbiAgICAgIHNsaWRlci5hZGRPYnNlcnZlcigoKSA9PiB7XHJcbiAgICAgICAgb3B0Lm1pblZhbHVlSW5wdXQudmFsKHNsaWRlci5nZXRWYWx1ZXMoKS5jdXJyZW50TWluVmFsdWUpO1xyXG4gICAgICAgIG9wdC5tYXhWYWx1ZUlucHV0LnZhbChzbGlkZXIuZ2V0VmFsdWVzKCkuY3VycmVudE1heFZhbHVlKTtcclxuICAgICAgICBvcHQubWF4VmFsdWUudmFsKHNsaWRlci5nZXRDb25maWcoKS5tYXhWYWx1ZSk7XHJcbiAgICAgICAgb3B0Lm1pblZhbHVlLnZhbChzbGlkZXIuZ2V0Q29uZmlnKCkubWluVmFsdWUpO1xyXG4gICAgICAgIG9wdC5zdGVwLnZhbChzbGlkZXIuZ2V0Q29uZmlnKCkuc3RlcCk7XHJcbiAgICAgIH0pXHJcbiAgICB9LFxyXG4gIH1cclxuXHJcbiAgJC5mbi5vbWZnc2xpZGVyID0gZnVuY3Rpb24obWV0aG9kOiBzdHJpbmcpIHtcclxuICAgIGlmIChtZXRob2RzW21ldGhvZF0pIHtcclxuICAgICAgcmV0dXJuIG1ldGhvZHNbbWV0aG9kXS5hcHBseSh0aGlzLCBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpKTtcclxuICAgIH0gZWxzZSBpZiAodHlwZW9mIG1ldGhvZCA9PT0gJ29iamVjdCcgfHwgIW1ldGhvZCkge1xyXG4gICAgICByZXR1cm4gbWV0aG9kcy5pbml0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAkLmVycm9yKGDQnNC10YLQvtC0ICR7bWV0aG9kfSDQvdC1INC90LDQudC00LXQvSDQsiDQv9C70LDQs9C40L3QtSBqUXVlcnkub21mZ3NsaWRlcmApO1xyXG4gICAgfVxyXG4gIH07XHJcbn0pKGpRdWVyeSk7XHJcbiIsImV4cG9ydCBkZWZhdWx0IF9fd2VicGFja19wdWJsaWNfcGF0aF9fICsgXCJpbmRleC5odG1sXCI7IiwiaW1wb3J0ICcuL2RlbW8tcGFnZS9pbmRleC5odG1sJztcclxuXHJcbmZ1bmN0aW9uIGltcG9ydEFsbChyOiAgX19XZWJwYWNrTW9kdWxlQXBpLlJlcXVpcmVDb250ZXh0KSB7XHJcbiAgICByLmtleXMoKS5mb3JFYWNoKHIpO1xyXG59XHJcblxyXG5pbXBvcnRBbGwocmVxdWlyZS5jb250ZXh0KCcuL3BsdWdpbicsIHRydWUsIC8oPzwhXFwuZClcXC4oanN8dHN8c2NzcykkL2kpKTsiXSwic291cmNlUm9vdCI6IiJ9