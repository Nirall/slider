!function(e){var t={};function i(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(n,o,function(t){return e[t]}.bind(null,o));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=1)}([function(e,t,i){},function(e,t,i){"use strict";i.r(t);i.p,i(0);var n=function(){for(var e=0,t=0,i=arguments.length;t<i;t++)e+=arguments[t].length;var n=Array(e),o=0;for(t=0;t<i;t++)for(var s=arguments[t],a=0,l=s.length;a<l;a++,o++)n[o]=s[a];return n},o=function(){function e(){this.observers=[]}return e.prototype.addObserver=function(e){if("function"!=typeof e)throw new Error("observer must be a function");this.observers.map((function(t){if(t===e)throw new Error("observer already in the list")})),this.observers.push(e)},e.prototype.removeObserver=function(e){for(var t=0;t<this.observers.length;t++){if(this.observers[t]===e)return void this.observers.splice(t,1)}throw new Error("could not find observer in list of observers")},e.prototype.notifyObservers=function(){n(this.observers).map((function(e){return e()}))},e}();var s=function(e){var t=document.createElement("div");return t.ondragstart=function(){return!1},t.classList.add(e),t},a=function(e){var t=this;this.getPosition=function(){return t.isVertical?t.elem.getBoundingClientRect().top:t.elem.getBoundingClientRect().left},this.getDimension=function(){return t.isVertical?t.elem.getBoundingClientRect().height:t.elem.getBoundingClientRect().width},this.init=function(e){t.isVertical=e,t.isVertical?t.elem.classList.add("slider__scale_position_vertical"):t.elem.classList.remove("slider__scale_position_vertical")},this.elem=s("slider__scale"),this.isVertical=e},l=function(){var e=this;this.init=function(t,i,n,o){void 0===o&&(o=!1),e.mark1.innerHTML=t+"",e.mark4.innerHTML=i+"",o?(e.mark2.innerHTML=(t+(i-t)/3).toFixed(2),e.mark3.innerHTML=(t+2*(i-t)/3).toFixed(2)):(e.mark2.innerHTML=t+Math.round((i-t)/3)+"",e.mark3.innerHTML=t+Math.round(2*(i-t)/3)+""),n?(e.mark1.classList.remove("slider__graduation-mark_offset_left"),e.mark1.classList.add("slider__graduation-mark_offset_top"),e.mark4.classList.remove("slider__graduation-mark_offset_right"),e.mark4.classList.add("slider__graduation-mark_offset_bottom"),e.gradElem.classList.add("slider__graduation_position_vertical")):(e.mark1.classList.add("slider__graduation-mark_offset_left"),e.mark1.classList.remove("slider__graduation-mark_offset_top"),e.mark4.classList.add("slider__graduation-mark_offset_right"),e.mark4.classList.remove("slider__graduation-mark_offset_bottom"),e.gradElem.classList.remove("slider__graduation_position_vertical"))},this.gradElem=s("slider__graduation"),this.mark1=s("slider__graduation-mark"),this.mark2=s("slider__graduation-mark"),this.mark3=s("slider__graduation-mark"),this.mark4=s("slider__graduation-mark"),this.gradElem.appendChild(this.mark1),this.gradElem.appendChild(this.mark2),this.gradElem.appendChild(this.mark3),this.gradElem.appendChild(this.mark4)},r=function(e){var t=this;this.getWidth=function(){return t.elem.getBoundingClientRect().width},this.getPosition=function(){return t.isVertical?t.elem.getBoundingClientRect().top:t.elem.getBoundingClientRect().left},this.setPosition=function(e){t.isVertical?(t.elem.style.left="50%",t.elem.style.top=e+"px"):(t.elem.style.top="50%",t.elem.style.left=e+"px")},this.init=function(e){t.isVertical=e,t.isVertical?t.elem.classList.add("slider__button_position_vertical"):t.elem.classList.remove("slider__button_position_vertical")},this.elem=s("slider__button"),this.isVertical=e},u=function(e){var t=this;this.getPosition=function(){return t.isVertical?t.elem.getBoundingClientRect().top:t.elem.getBoundingClientRect().left},this.setPosition=function(e,i){t.elem.innerHTML=i+"",t.isVertical?(t.elem.style.left="50%",t.elem.style.top=e-t.getDimension()/2+"px"):(t.elem.style.top="50%",t.elem.style.left=e-t.getDimension()/2+"px")},this.getDimension=function(){return t.isVertical?t.elem.getBoundingClientRect().height:t.elem.getBoundingClientRect().width},this.init=function(e){t.isVertical=e,t.isVertical?t.elem.classList.add("slider__button-label_position_vertical"):t.elem.classList.remove("slider__button-label_position_vertical")},this.elem=s("slider__button-label"),this.isVertical=e},c=function(e){var t=this;this.setPosition=function(e){t.isVertical?(t.elem.style.left="0",t.elem.style.width="100%",t.elem.style.top=e+"px"):(t.elem.style.top="0",t.elem.style.height="100%",t.elem.style.left=e+"px")},this.setDimension=function(e){t.isVertical?t.elem.style.height=e+"px":t.elem.style.width=e+"px"},this.init=function(e){t.isVertical=e},this.elem=s("slider__scale-filling"),this.isVertical=e},d=function(e,t,i,n,s,d,m){var h=this;void 0===e&&(e=0),void 0===t&&(t=1e3),void 0===i&&(i=1),void 0===n&&(n=!1),void 0===s&&(s=!1),void 0===d&&(d=!1),void 0===m&&(m=!1),this.getStart=function(){return h.isRange?h.button1.getPosition()-h.scale.getPosition()+h.button1.getWidth()/2:0},this.getEnd=function(){return h.button2.getPosition()-h.scale.getPosition()+h.button2.getWidth()/2},this.updateElems=function(){h.scaleFilling.init(h.isVertical),h.scaleFilling.setPosition(h.getStart()),h.scaleFilling.setDimension(h.getEnd()-h.getStart()),h.isRange||(h.curMinValue=h.minValue),h.observers.notifyObservers()},this.round=function(e,t){var i=Math.floor(e/t),n=e%t;return e<0?Math.abs(n)>t/2?i*t:(i+1)*t:n<t/2?i*t:(i+1)*t},this.roundOffsetButt=function(e){var t=h.minValue+(e+h.button2.getWidth()/2)*(h.maxValue-h.minValue)/h.scale.getDimension(),i=h.round(t,h.step);return h.isFloat&&(i=parseFloat(i.toFixed(2))),i<h.minValue?i=h.minValue:i>h.maxValue&&(i=h.maxValue),[h.offsetValueConv(i),i]},this.offsetValueConv=function(e){return(e-h.minValue)/(h.maxValue-h.minValue)*h.scale.getDimension()-h.button2.getWidth()/2},this.butt1Move=function(e,t){h.button1.setPosition(e),h.label1.setPosition(e+h.button1.getWidth()/2,t),t<h.minValue&&(t=h.minValue),h.curMinValue=t,h.updateElems()},this.butt1OffsetCheck=function(e){var t;e<-h.button1.getWidth()/2&&(e=-h.button1.getWidth()/2,t=h.minValue);var i=h.step*h.scale.getDimension()/(h.maxValue-h.minValue),n=i/1.5>h.button1.getWidth()?i/1.5:h.button1.getWidth();return e>h.button2.getPosition()-h.scale.getPosition()-n&&(e=h.button2.getPosition()-h.scale.getPosition()-n),[e,t]},this.onMouseMove1=function(e){var t,i,n,o,s=(h.isVertical?e.clientY:e.clientX)-h.scale.getPosition()-h.button2.getWidth()/2;o=(t=h.butt1OffsetCheck(s))[0],(n=t[1])||(o=(i=h.roundOffsetButt(o))[0],n=i[1]),h.butt1Move(o,n)},this.onMouseUp1=function(){document.removeEventListener("mouseup",h.onMouseUp1),document.removeEventListener("mousemove",h.onMouseMove1)},this.butt2Move=function(e,t){h.button2.setPosition(e),h.label2.setPosition(e+h.button2.getWidth()/2,t),t<h.minValue?t=h.minValue:t>h.maxValue&&(t=h.maxValue),h.curMaxValue=t,h.updateElems()},this.butt2OffsetCheck=function(e){var t;h.isRange||e<-h.button2.getWidth()/2&&(e=-h.button2.getWidth()/2,t=h.minValue),e>h.scale.getDimension()-h.button2.getWidth()/2&&(e=h.scale.getDimension()-h.button2.getWidth()/2,t=h.maxValue);var i=h.step*h.scale.getDimension()/(h.maxValue-h.minValue),n=i/1.5>h.button1.getWidth()?i/1.5:h.button1.getWidth();return e<h.button1.getPosition()-h.scale.getPosition()+n&&(e=h.button1.getPosition()-h.scale.getPosition()+n),[e,t]},this.onMouseMove2=function(e){var t,i,n,o,s=(h.isVertical?e.clientY:e.clientX)-h.scale.getPosition()-h.button2.getWidth()/2;o=(t=h.butt2OffsetCheck(s))[0],(n=t[1])||(o=(i=h.roundOffsetButt(o))[0],n=i[1]),h.butt2Move(o,n)},this.onMouseUp2=function(){document.removeEventListener("mouseup",h.onMouseUp2),document.removeEventListener("mousemove",h.onMouseMove2)},this.butt1CloserCheck=function(e){return Math.abs(e-h.button1.getPosition()-h.button1.getWidth()/2)<Math.abs(e-h.button2.getPosition()-h.button2.getWidth()/2)},this.scaleOnclick=function(e){if(h.isRange){var t=h.isVertical?e.clientY:e.clientX;h.butt1CloserCheck(t)?h.onMouseMove1(e):h.onMouseMove2(e)}else h.onMouseMove2(e)},this.interMarkHandler=function(e){var t,i,n,o=(e-h.minValue)/(h.maxValue-h.minValue)*h.scale.getDimension();if(i=(t=h.roundOffsetButt(o-h.button2.getWidth()/2))[0],n=t[1],h.isRange){var s=o+h.scale.getPosition();h.butt1CloserCheck(s)?h.butt1Move(i,n):h.butt2Move(i,n)}else h.butt2Move(i,n)},this.mark1Onclick=function(){var e=-h.button2.getWidth()/2,t=h.minValue;h.isRange?h.butt1Move(e,t):h.butt2Move(e,t)},this.mark4Onclick=function(){var e=h.scale.getDimension()-h.button2.getWidth()/2;h.butt2Move(e,h.maxValue)},this.mark2Onclick=function(){var e=h.isFloat?parseFloat(h.graduation.mark2.innerHTML):parseInt(h.graduation.mark2.innerHTML);h.interMarkHandler(e)},this.mark3Onclick=function(){var e=h.isFloat?parseFloat(h.graduation.mark3.innerHTML):parseInt(h.graduation.mark3.innerHTML);h.interMarkHandler(e)},this.checkValues=function(){"number"!=typeof h.maxValue&&console.error("Maxvalue should be a number"),"number"!=typeof h.minValue&&console.error("Maxvalue should be a number"),"number"!=typeof h.step&&console.error("Step should be a number"),"boolean"!=typeof h.isRange&&console.error("isRange should be a boolean"),"boolean"!=typeof h.isVertical&&console.error("isVertical should be a boolean"),"boolean"!=typeof h.showLabel&&console.error("ShowLabel should be a boolean"),h.step>h.maxValue-h.minValue&&(h.step=h.maxValue-h.minValue,console.error("Step is setted to the max"))},this.init=function(){h.scale.init(h.isVertical),h.scaleFilling.init(h.isVertical),h.graduation.init(h.minValue,h.maxValue,h.isVertical,h.isFloat),h.button1.init(h.isVertical),h.button2.init(h.isVertical),h.label1.init(h.isVertical),h.label2.init(h.isVertical),h.button1.elem.style.display="none",h.label1.elem.style.display="none",h.checkValues(),h.showLabel?(h.label1.elem.style.display="block",h.label2.elem.style.display="block"):(h.label1.elem.style.display="none",h.label2.elem.style.display="none"),h.isRange?h.button1.elem.style.display="block":(h.button1.elem.style.display="none",h.label1.elem.style.display="none"),h.button1.setPosition(-h.button1.getWidth()/2),h.button2.setPosition(h.scale.getDimension()-h.button2.getWidth()/2),h.label1.setPosition(h.getStart(),h.minValue),h.label2.setPosition(h.getEnd(),h.maxValue),h.isVertical?h.graduation.gradElem.style.height=h.scale.getDimension()+"px":h.graduation.gradElem.style.height="20px",h.updateElems()},this.append=function(e){e.appendChild(h.scale.elem).appendChild(h.scaleFilling.elem),e.appendChild(h.button1.elem),e.appendChild(h.label1.elem),e.appendChild(h.graduation.gradElem),e.appendChild(h.button2.elem),e.appendChild(h.label2.elem),h.scale.elem.onclick=h.scaleOnclick,h.graduation.mark1.onclick=h.mark1Onclick,h.graduation.mark2.onclick=h.mark2Onclick,h.graduation.mark3.onclick=h.mark3Onclick,h.graduation.mark4.onclick=h.mark4Onclick,h.button1.elem.onmousedown=function(e){e.preventDefault(),document.addEventListener("mousemove",h.onMouseMove1),document.addEventListener("mouseup",h.onMouseUp1)},h.button2.elem.onmousedown=function(e){e.preventDefault(),document.addEventListener("mousemove",h.onMouseMove2),document.addEventListener("mouseup",h.onMouseUp2)}},this.scale=new a(s),this.button1=new r(s),this.button2=new r(s),this.label1=new u(s),this.label2=new u(s),this.scaleFilling=new c(s),this.graduation=new l,this.minValue=e,this.maxValue=t,this.curMinValue=e,this.curMaxValue=t,this.step=i,this.isRange=n,this.isVertical=s,this.showLabel=d,this.isFloat=m,this.observers=new o,this.checkValues()},m=function(){function e(e,t){void 0===e&&(e=0),void 0===t&&(t=1e3),this.curMinValue=e,this.curMaxValue=t,this.observers=new o}return e.prototype.setCurMinValue=function(e){this.curMinValue!=e&&(this.curMinValue=e,this.observers.notifyObservers())},e.prototype.setCurMaxValue=function(e){this.curMaxValue!=e&&(this.curMaxValue=e,this.observers.notifyObservers())},e}(),h=function(e,t,i,n,s,a,l){var r=this;void 0===e&&(e=0),void 0===t&&(t=1e3),void 0===i&&(i=1),void 0===n&&(n=!1),void 0===s&&(s=!1),void 0===a&&(a=!1),void 0===l&&(l=!1),this.append=function(e){r.view.append(e.get(0)),r.view.init()},this.update=function(e){Object.keys(e).map((function(t){void 0!==r.view[t]&&(r.view[t]=e[t])})),r.view.init(),r.view.butt1Move(r.view.butt1OffsetCheck(r.view.offsetValueConv(r.model.curMinValue))[0],r.model.curMinValue),r.view.butt2Move(r.view.butt2OffsetCheck(r.view.offsetValueConv(r.model.curMaxValue))[0],r.model.curMaxValue)},this.getValues=function(){return[r.model.curMinValue,r.model.curMaxValue]},this.setValues=function(e,t){e&&r.model.setCurMinValue(e),t&&r.model.setCurMaxValue(t)},this.getConfig=function(){return{minValue:r.view.minValue,maxValue:r.view.maxValue,step:r.view.step,isRange:r.view.isRange,isVertical:r.view.isVertical,showLabel:r.view.showLabel,isFloat:r.view.isFloat}},this.addObserver=function(e){r.observers.addObserver(e)},this.view=new d(e,t,i,n,s,a,l),this.model=new m(e,t),this.observers=new o,this.view.observers.addObserver((function(){r.model.curMinValue=r.view.curMinValue,r.model.curMaxValue=r.view.curMaxValue,r.observers.notifyObservers()})),this.model.observers.addObserver((function(){var e=r.model.curMinValue,t=r.model.curMaxValue;r.view.butt1Move(r.view.offsetValueConv(e),e),r.view.butt2Move(r.view.offsetValueConv(t),t),r.observers.notifyObservers()}))};!function(e){const t={minValue:0,maxValue:1e3,step:1,isRange:!1,isVertical:!1,showLabel:!1,isFloat:!1},i={init:function(i){if(!e(this).data("slider")){const n=JSON.parse(JSON.stringify(t)),o=new h(...Object.values(e.extend(n,i)));e(this).data("slider",o),o.append(e(this))}},update:function(t){e(this).data("slider").update(t)},getConfig:function(){return e(this).data("slider").getConfig()},setValues:function(t){e(this).data("slider").setValues(t.curMinValue,t.curMaxValue)},inputsAttach:function(t){const i=e(this).data("slider");i.addObserver(()=>{t.minValueIn.val(i.getValues()[0]),t.maxValueIn.val(i.getValues()[1])})}};e.fn.omfgslider=function(t){return i[t]?i[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void e.error(`Метод ${t} не найден в плагине jQuery.omfgslider`):i.init.apply(this,arguments)}}(jQuery)}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BhZ2UvaW5kZXguaHRtbCIsIndlYnBhY2s6Ly8vLi9zcmMvVmlldy9hc3NldHMvTWFrZU9ic2VydmFibGVPYmplY3QudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1ZpZXcvYXNzZXRzL2NyZWF0ZUVsZW0udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1ZpZXcvYXNzZXRzL1NjYWxlLnRzIiwid2VicGFjazovLy8uL3NyYy9WaWV3L2Fzc2V0cy9HcmFkdWF0aW9uLnRzIiwid2VicGFjazovLy8uL3NyYy9WaWV3L2Fzc2V0cy9CdXR0b24udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1ZpZXcvYXNzZXRzL0xhYmVsLnRzIiwid2VicGFjazovLy8uL3NyYy9WaWV3L2Fzc2V0cy9TY2FsZUZpbGxpbmcudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1ZpZXcvVmlldy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvTW9kZWwvTW9kZWwudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0NvbnRyb2xsZXIvQ29udHJvbGxlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbWFpbi5qcyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsInRoaXMiLCJvYnNlcnZlcnMiLCJhZGRPYnNlcnZlciIsImZuIiwiRXJyb3IiLCJtYXAiLCJvYnNlcnZlciIsInB1c2giLCJyZW1vdmVPYnNlcnZlciIsImxlbmd0aCIsInNwbGljZSIsIm5vdGlmeU9ic2VydmVycyIsImNsYXNzTmFtZSIsImVsZW0iLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJvbmRyYWdzdGFydCIsImNsYXNzTGlzdCIsImFkZCIsImlzVmVydGljYWwiLCJnZXRQb3NpdGlvbiIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsInRvcCIsImxlZnQiLCJnZXREaW1lbnNpb24iLCJoZWlnaHQiLCJ3aWR0aCIsImluaXQiLCJyZW1vdmUiLCJtaW5WYWx1ZSIsIm1heFZhbHVlIiwiaXNGbG9hdCIsIm1hcmsxIiwiaW5uZXJIVE1MIiwibWFyazQiLCJtYXJrMiIsInRvRml4ZWQiLCJtYXJrMyIsIk1hdGgiLCJyb3VuZCIsImdyYWRFbGVtIiwiYXBwZW5kQ2hpbGQiLCJnZXRXaWR0aCIsInNldFBvc2l0aW9uIiwib2Zmc2V0Iiwic3R5bGUiLCJzZXREaW1lbnNpb24iLCJkaW1lbnNpb24iLCJzdGVwIiwiaXNSYW5nZSIsInNob3dMYWJlbCIsImdldFN0YXJ0IiwiYnV0dG9uMSIsInNjYWxlIiwiZ2V0RW5kIiwiYnV0dG9uMiIsInVwZGF0ZUVsZW1zIiwic2NhbGVGaWxsaW5nIiwiY3VyTWluVmFsdWUiLCJ2YWwiLCJ3aG9sZSIsImZsb29yIiwicmVtaW5kZXIiLCJhYnMiLCJyb3VuZE9mZnNldEJ1dHQiLCJjdXJyT2Zmc2V0IiwiY3VyclZhbHVlIiwicm91bmRWYWx1ZSIsInBhcnNlRmxvYXQiLCJvZmZzZXRWYWx1ZUNvbnYiLCJidXR0MU1vdmUiLCJyb3VuZE9mZnNldCIsImxhYmVsMSIsImJ1dHQxT2Zmc2V0Q2hlY2siLCJuZXdPZmZzZXQiLCJzdGVwV2lkdGgiLCJtaW5PZmZzZXQiLCJvbk1vdXNlTW92ZTEiLCJldmVudE1tIiwiY2xpZW50WSIsImNsaWVudFgiLCJvbk1vdXNlVXAxIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImJ1dHQyTW92ZSIsImxhYmVsMiIsImN1ck1heFZhbHVlIiwiYnV0dDJPZmZzZXRDaGVjayIsIm9uTW91c2VNb3ZlMiIsIm9uTW91c2VVcDIiLCJidXR0MUNsb3NlckNoZWNrIiwiY29vcmRpbmF0ZSIsInNjYWxlT25jbGljayIsImV2ZW50IiwiaW50ZXJNYXJrSGFuZGxlciIsIm1hcmtPZmZzZXQiLCJtYXJrMU9uY2xpY2siLCJtYXJrNE9uY2xpY2siLCJtYXJrMk9uY2xpY2siLCJncmFkdWF0aW9uIiwicGFyc2VJbnQiLCJtYXJrM09uY2xpY2siLCJjaGVja1ZhbHVlcyIsImNvbnNvbGUiLCJlcnJvciIsImRpc3BsYXkiLCJhcHBlbmQiLCJlbnRyeSIsIm9uY2xpY2siLCJvbm1vdXNlZG93biIsImV2ZW50TWQiLCJwcmV2ZW50RGVmYXVsdCIsImFkZEV2ZW50TGlzdGVuZXIiLCJzZXRDdXJNaW5WYWx1ZSIsImRhdGEiLCJzZXRDdXJNYXhWYWx1ZSIsInZpZXciLCJ1cGRhdGUiLCJhcmdzIiwia2V5cyIsIml0ZW0iLCJ1bmRlZmluZWQiLCJtb2RlbCIsImdldFZhbHVlcyIsInNldFZhbHVlcyIsImdldENvbmZpZyIsIiQiLCJjb25maWciLCJtZXRob2RzIiwib3B0IiwibmV3Q29uZmlnIiwiSlNPTiIsInBhcnNlIiwic3RyaW5naWZ5Iiwic2xpZGVyIiwidmFsdWVzIiwiZXh0ZW5kIiwiaW5wdXRzQXR0YWNoIiwibWluVmFsdWVJbiIsIm1heFZhbHVlSW4iLCJvbWZnc2xpZGVyIiwibWV0aG9kIiwiYXBwbHkiLCJBcnJheSIsInNsaWNlIiwiYXJndW1lbnRzIiwialF1ZXJ5Il0sIm1hcHBpbmdzIjoiYUFDRSxJQUFJQSxFQUFtQixHQUd2QixTQUFTQyxFQUFvQkMsR0FHNUIsR0FBR0YsRUFBaUJFLEdBQ25CLE9BQU9GLEVBQWlCRSxHQUFVQyxRQUduQyxJQUFJQyxFQUFTSixFQUFpQkUsR0FBWSxDQUN6Q0csRUFBR0gsRUFDSEksR0FBRyxFQUNISCxRQUFTLElBVVYsT0FOQUksRUFBUUwsR0FBVU0sS0FBS0os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QUFVSyxFQUFJdEUsWUFBYXNFLEVBQUkzQyxjQUd4Q21ELGFBQWMsU0FBU1IsR0FDckIsTUFBTUssRUFBU1IsRUFBRTdILE1BQU1pSCxLQUFLLFVBQzVCb0IsRUFBT25JLFlBQVksS0FDakI4SCxFQUFJUyxXQUFXOUUsSUFBSTBFLEVBQU9YLFlBQVksSUFDdENNLEVBQUlVLFdBQVcvRSxJQUFJMEUsRUFBT1gsWUFBWSxRQUs1Q0csRUFBRTFILEdBQUd3SSxXQUFhLFNBQVNDLEdBQ3pCLE9BQUliLEVBQVFhLEdBQ0hiLEVBQVFhLEdBQVFDLE1BQU03SSxLQUFNOEksTUFBTWxKLFVBQVVtSixNQUFNNUssS0FBSzZLLFVBQVcsSUFDOUMsaUJBQVhKLEdBQXdCQSxPQUd4Q2YsRUFBRXRCLE1BQU0sU0FBU3FDLDJDQUZWYixFQUFRcEcsS0FBS2tILE1BQU03SSxLQUFNZ0osWUFqRHRDLENBc0RHQyIsImZpbGUiOiJidW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMSk7XG4iLCJleHBvcnQgZGVmYXVsdCBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArIFwiaW5kZXguaHRtbFwiOyIsImNsYXNzIE1ha2VPYnNlcnZhYmxlT2JqZWN0IHtcclxuICBvYnNlcnZlcnM6IEFycmF5PEZ1bmN0aW9uPjtcclxuXHJcbiAgY29uc3RydWN0b3IoKSB7XHJcbiAgICB0aGlzLm9ic2VydmVycyA9IFtdO1xyXG4gIH1cclxuXHJcbiAgYWRkT2JzZXJ2ZXIgKGZuOiBGdW5jdGlvbik6IHZvaWQge1xyXG4gICAgaWYgKHR5cGVvZiBmbiAhPT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ29ic2VydmVyIG11c3QgYmUgYSBmdW5jdGlvbicpO1xyXG4gICAgfVxyXG4gICAgdGhpcy5vYnNlcnZlcnMubWFwKChvYnNlcnZlcikgPT4ge1xyXG4gICAgICBpZiAob2JzZXJ2ZXIgPT09IGZuKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdvYnNlcnZlciBhbHJlYWR5IGluIHRoZSBsaXN0Jyk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgdGhpcy5vYnNlcnZlcnMucHVzaChmbik7XHJcbiAgfVxyXG5cclxuICByZW1vdmVPYnNlcnZlciAoZm46IEZ1bmN0aW9uKTogdm9pZCB7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMub2JzZXJ2ZXJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIGNvbnN0IG9ic2VydmVyID0gdGhpcy5vYnNlcnZlcnNbaV07XHJcbiAgICAgIGlmIChvYnNlcnZlciA9PT0gZm4pIHtcclxuICAgICAgICB0aGlzLm9ic2VydmVycy5zcGxpY2UoaSwgMSk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ2NvdWxkIG5vdCBmaW5kIG9ic2VydmVyIGluIGxpc3Qgb2Ygb2JzZXJ2ZXJzJyk7XHJcbiAgfVxyXG5cclxuICBub3RpZnlPYnNlcnZlcnMgKCk6IHZvaWQge1xyXG4gICAgY29uc3Qgb2JzZXJ2ZXJzU25hcHNob3QgPSBbLi4udGhpcy5vYnNlcnZlcnNdO1xyXG4gICAgb2JzZXJ2ZXJzU25hcHNob3QubWFwKChvYnNlcnZlcikgPT4gb2JzZXJ2ZXIoKSk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBNYWtlT2JzZXJ2YWJsZU9iamVjdDsiLCIvLyBFbGVtZW50cyBmYWN0b3J5XHJcbmZ1bmN0aW9uIGNyZWF0ZUVsZW0oY2xhc3NOYW1lOiBzdHJpbmcpIDpIVE1MRWxlbWVudCB7XHJcbiAgY29uc3QgZWxlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gIGVsZW0ub25kcmFnc3RhcnQgPSAoKSA9PiBmYWxzZTtcclxuICBlbGVtLmNsYXNzTGlzdC5hZGQoY2xhc3NOYW1lKTtcclxuICByZXR1cm4gZWxlbTtcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY3JlYXRlRWxlbTsiLCJpbXBvcnQgY3JlYXRlRWxlbSBmcm9tICcuL2NyZWF0ZUVsZW0nO1xyXG5cclxuY2xhc3MgU2NhbGUge1xyXG4gIGVsZW06IEhUTUxFbGVtZW50O1xyXG4gIGlzVmVydGljYWw6IGJvb2xlYW47XHJcblxyXG4gIGNvbnN0cnVjdG9yKGlzVmVydGljYWw6IGJvb2xlYW4pIHtcclxuICAgIHRoaXMuZWxlbSA9IGNyZWF0ZUVsZW0oJ3NsaWRlcl9fc2NhbGUnKTtcclxuICAgIHRoaXMuaXNWZXJ0aWNhbCA9IGlzVmVydGljYWw7XHJcbiAgfVxyXG5cclxuICBnZXRQb3NpdGlvbiA9ICgpOiBudW1iZXIgPT4ge1xyXG4gICAgaWYgKHRoaXMuaXNWZXJ0aWNhbCkge1xyXG4gICAgICByZXR1cm4gdGhpcy5lbGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcDtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gdGhpcy5lbGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQ7XHJcbiAgfVxyXG5cclxuICBnZXREaW1lbnNpb24gPSAoKTogbnVtYmVyID0+IHtcclxuICAgIGlmICh0aGlzLmlzVmVydGljYWwpIHtcclxuICAgICAgcmV0dXJuIHRoaXMuZWxlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHQ7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuZWxlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aDtcclxuICB9XHJcblxyXG4gIGluaXQgPSAoaXNWZXJ0aWNhbDogYm9vbGVhbik6IHZvaWQgPT4ge1xyXG4gICAgdGhpcy5pc1ZlcnRpY2FsID0gaXNWZXJ0aWNhbDtcclxuXHJcbiAgICBpZiAodGhpcy5pc1ZlcnRpY2FsKSB7XHJcbiAgICAgIHRoaXMuZWxlbS5jbGFzc0xpc3QuYWRkKCdzbGlkZXJfX3NjYWxlX3Bvc2l0aW9uX3ZlcnRpY2FsJyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLmVsZW0uY2xhc3NMaXN0LnJlbW92ZSgnc2xpZGVyX19zY2FsZV9wb3NpdGlvbl92ZXJ0aWNhbCcpO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgU2NhbGU7XHJcbiIsImltcG9ydCBjcmVhdGVFbGVtIGZyb20gJy4vY3JlYXRlRWxlbSc7XHJcblxyXG5jbGFzcyBHcmFkdWF0aW9uIHtcclxuICBncmFkRWxlbTogSFRNTEVsZW1lbnQ7XHJcbiAgbWFyazE6IEhUTUxFbGVtZW50O1xyXG4gIG1hcmsyOiBIVE1MRWxlbWVudDtcclxuICBtYXJrMzogSFRNTEVsZW1lbnQ7XHJcbiAgbWFyazQ6IEhUTUxFbGVtZW50O1xyXG5cclxuICBjb25zdHJ1Y3RvcigpIHtcclxuICAgIHRoaXMuZ3JhZEVsZW0gPSBjcmVhdGVFbGVtKCdzbGlkZXJfX2dyYWR1YXRpb24nKTtcclxuICAgIHRoaXMubWFyazEgPSBjcmVhdGVFbGVtKCdzbGlkZXJfX2dyYWR1YXRpb24tbWFyaycpO1xyXG4gICAgdGhpcy5tYXJrMiA9IGNyZWF0ZUVsZW0oJ3NsaWRlcl9fZ3JhZHVhdGlvbi1tYXJrJyk7XHJcbiAgICB0aGlzLm1hcmszID0gY3JlYXRlRWxlbSgnc2xpZGVyX19ncmFkdWF0aW9uLW1hcmsnKTtcclxuICAgIHRoaXMubWFyazQgPSBjcmVhdGVFbGVtKCdzbGlkZXJfX2dyYWR1YXRpb24tbWFyaycpO1xyXG4gICAgdGhpcy5ncmFkRWxlbS5hcHBlbmRDaGlsZCh0aGlzLm1hcmsxKTtcclxuICAgIHRoaXMuZ3JhZEVsZW0uYXBwZW5kQ2hpbGQodGhpcy5tYXJrMik7XHJcbiAgICB0aGlzLmdyYWRFbGVtLmFwcGVuZENoaWxkKHRoaXMubWFyazMpO1xyXG4gICAgdGhpcy5ncmFkRWxlbS5hcHBlbmRDaGlsZCh0aGlzLm1hcms0KTtcclxuICB9XHJcblxyXG4gIGluaXQgPSAobWluVmFsdWU6IG51bWJlciwgbWF4VmFsdWU6IG51bWJlciwgaXNWZXJ0aWNhbDogYm9vbGVhbiwgaXNGbG9hdCA9IGZhbHNlKTogdm9pZCA9PiB7XHJcbiAgICB0aGlzLm1hcmsxLmlubmVySFRNTCA9IG1pblZhbHVlICsgJyc7XHJcbiAgICB0aGlzLm1hcms0LmlubmVySFRNTCA9IG1heFZhbHVlICsgJyc7XHJcblxyXG4gICAgaWYgKGlzRmxvYXQpIHtcclxuICAgICAgdGhpcy5tYXJrMi5pbm5lckhUTUwgPSAobWluVmFsdWUgKyAobWF4VmFsdWUgLSBtaW5WYWx1ZSkvMykudG9GaXhlZCgyKTtcclxuICAgICAgdGhpcy5tYXJrMy5pbm5lckhUTUwgPSAobWluVmFsdWUgKyAobWF4VmFsdWUgLSBtaW5WYWx1ZSkqMi8zKS50b0ZpeGVkKDIpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5tYXJrMi5pbm5lckhUTUwgPSBtaW5WYWx1ZSArIE1hdGgucm91bmQoKG1heFZhbHVlIC0gbWluVmFsdWUpLzMpICsgJyc7XHJcbiAgICAgIHRoaXMubWFyazMuaW5uZXJIVE1MID0gbWluVmFsdWUgKyBNYXRoLnJvdW5kKChtYXhWYWx1ZSAtIG1pblZhbHVlKSoyLzMpICsgJyc7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCFpc1ZlcnRpY2FsKSB7XHJcbiAgICAgIHRoaXMubWFyazEuY2xhc3NMaXN0LmFkZCgnc2xpZGVyX19ncmFkdWF0aW9uLW1hcmtfb2Zmc2V0X2xlZnQnKTtcclxuICAgICAgdGhpcy5tYXJrMS5jbGFzc0xpc3QucmVtb3ZlKCdzbGlkZXJfX2dyYWR1YXRpb24tbWFya19vZmZzZXRfdG9wJyk7XHJcbiAgICAgIHRoaXMubWFyazQuY2xhc3NMaXN0LmFkZCgnc2xpZGVyX19ncmFkdWF0aW9uLW1hcmtfb2Zmc2V0X3JpZ2h0Jyk7XHJcbiAgICAgIHRoaXMubWFyazQuY2xhc3NMaXN0LnJlbW92ZSgnc2xpZGVyX19ncmFkdWF0aW9uLW1hcmtfb2Zmc2V0X2JvdHRvbScpO1xyXG4gICAgICB0aGlzLmdyYWRFbGVtLmNsYXNzTGlzdC5yZW1vdmUoJ3NsaWRlcl9fZ3JhZHVhdGlvbl9wb3NpdGlvbl92ZXJ0aWNhbCcpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5tYXJrMS5jbGFzc0xpc3QucmVtb3ZlKCdzbGlkZXJfX2dyYWR1YXRpb24tbWFya19vZmZzZXRfbGVmdCcpO1xyXG4gICAgICB0aGlzLm1hcmsxLmNsYXNzTGlzdC5hZGQoJ3NsaWRlcl9fZ3JhZHVhdGlvbi1tYXJrX29mZnNldF90b3AnKTtcclxuICAgICAgdGhpcy5tYXJrNC5jbGFzc0xpc3QucmVtb3ZlKCdzbGlkZXJfX2dyYWR1YXRpb24tbWFya19vZmZzZXRfcmlnaHQnKTtcclxuICAgICAgdGhpcy5tYXJrNC5jbGFzc0xpc3QuYWRkKCdzbGlkZXJfX2dyYWR1YXRpb24tbWFya19vZmZzZXRfYm90dG9tJyk7XHJcbiAgICAgIHRoaXMuZ3JhZEVsZW0uY2xhc3NMaXN0LmFkZCgnc2xpZGVyX19ncmFkdWF0aW9uX3Bvc2l0aW9uX3ZlcnRpY2FsJyk7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBHcmFkdWF0aW9uOyIsImltcG9ydCBjcmVhdGVFbGVtIGZyb20gJy4vY3JlYXRlRWxlbSc7XHJcblxyXG5jbGFzcyBCdXR0b24ge1xyXG4gIGVsZW06IEhUTUxFbGVtZW50O1xyXG4gIGlzVmVydGljYWw6IGJvb2xlYW47XHJcblxyXG4gIGNvbnN0cnVjdG9yKGlzVmVydGljYWw6IGJvb2xlYW4pIHtcclxuICAgIHRoaXMuZWxlbSA9IGNyZWF0ZUVsZW0oJ3NsaWRlcl9fYnV0dG9uJyk7XHJcbiAgICB0aGlzLmlzVmVydGljYWwgPSBpc1ZlcnRpY2FsO1xyXG4gIH1cclxuXHJcbiAgZ2V0V2lkdGggPSAoKTogbnVtYmVyID0+IHtcclxuICAgIHJldHVybiB0aGlzLmVsZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGg7XHJcbiAgfVxyXG5cclxuICBnZXRQb3NpdGlvbiA9ICgpOiBudW1iZXIgPT4ge1xyXG4gICAgaWYgKHRoaXMuaXNWZXJ0aWNhbCkge1xyXG4gICAgICByZXR1cm4gdGhpcy5lbGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcDtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gdGhpcy5lbGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQ7XHJcbiAgfVxyXG5cclxuICBzZXRQb3NpdGlvbiA9IChvZmZzZXQ6IG51bWJlcik6IHZvaWQgPT4ge1xyXG4gICAgaWYgKHRoaXMuaXNWZXJ0aWNhbCkge1xyXG4gICAgICB0aGlzLmVsZW0uc3R5bGUubGVmdCA9ICc1MCUnO1xyXG4gICAgICB0aGlzLmVsZW0uc3R5bGUudG9wID0gb2Zmc2V0ICsgJ3B4JztcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuZWxlbS5zdHlsZS50b3AgPSAnNTAlJztcclxuICAgICAgdGhpcy5lbGVtLnN0eWxlLmxlZnQgPSBvZmZzZXQgKyAncHgnO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgaW5pdCA9IChpc1ZlcnRpY2FsOiBib29sZWFuKTogdm9pZCA9PiB7XHJcbiAgICB0aGlzLmlzVmVydGljYWwgPSBpc1ZlcnRpY2FsO1xyXG5cclxuICAgIGlmICh0aGlzLmlzVmVydGljYWwpIHtcclxuICAgICAgdGhpcy5lbGVtLmNsYXNzTGlzdC5hZGQoJ3NsaWRlcl9fYnV0dG9uX3Bvc2l0aW9uX3ZlcnRpY2FsJyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLmVsZW0uY2xhc3NMaXN0LnJlbW92ZSgnc2xpZGVyX19idXR0b25fcG9zaXRpb25fdmVydGljYWwnKTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IEJ1dHRvbjsiLCJpbXBvcnQgY3JlYXRlRWxlbSBmcm9tICcuL2NyZWF0ZUVsZW0nO1xyXG5cclxuY2xhc3MgTGFiZWwge1xyXG4gIGVsZW06IEhUTUxFbGVtZW50O1xyXG4gIGlzVmVydGljYWw6IGJvb2xlYW47XHJcblxyXG4gIGNvbnN0cnVjdG9yKGlzVmVydGljYWw6IGJvb2xlYW4pIHtcclxuICAgIHRoaXMuZWxlbSA9IGNyZWF0ZUVsZW0oJ3NsaWRlcl9fYnV0dG9uLWxhYmVsJyk7XHJcbiAgICB0aGlzLmlzVmVydGljYWwgPSBpc1ZlcnRpY2FsO1xyXG4gIH1cclxuXHJcbiAgZ2V0UG9zaXRpb24gPSAoKTogbnVtYmVyID0+IHtcclxuICAgIGlmICh0aGlzLmlzVmVydGljYWwpIHtcclxuICAgICAgcmV0dXJuIHRoaXMuZWxlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3A7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuZWxlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0O1xyXG4gIH1cclxuXHJcbiAgc2V0UG9zaXRpb24gPSAob2Zmc2V0OiBudW1iZXIsIHZhbHVlOiBudW1iZXIpOiB2b2lkID0+IHtcclxuICAgIHRoaXMuZWxlbS5pbm5lckhUTUwgPSB2YWx1ZSArICcnO1xyXG5cclxuICAgIGlmICh0aGlzLmlzVmVydGljYWwpIHtcclxuICAgICAgdGhpcy5lbGVtLnN0eWxlLmxlZnQgPSAnNTAlJztcclxuICAgICAgdGhpcy5lbGVtLnN0eWxlLnRvcCA9IG9mZnNldCAtIHRoaXMuZ2V0RGltZW5zaW9uKCkvMiArICdweCc7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLmVsZW0uc3R5bGUudG9wID0gJzUwJSc7XHJcbiAgICAgIHRoaXMuZWxlbS5zdHlsZS5sZWZ0ID0gb2Zmc2V0IC0gdGhpcy5nZXREaW1lbnNpb24oKS8yICsgJ3B4JztcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGdldERpbWVuc2lvbiA9ICgpOiBudW1iZXIgPT4ge1xyXG4gICAgaWYgKHRoaXMuaXNWZXJ0aWNhbCkge1xyXG4gICAgICByZXR1cm4gdGhpcy5lbGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmhlaWdodDtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gdGhpcy5lbGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoO1xyXG4gIH1cclxuXHJcbiAgaW5pdCA9IChpc1ZlcnRpY2FsOiBib29sZWFuKTogdm9pZCA9PiB7XHJcbiAgICB0aGlzLmlzVmVydGljYWwgPSBpc1ZlcnRpY2FsO1xyXG5cclxuICAgIGlmICh0aGlzLmlzVmVydGljYWwpIHtcclxuICAgICAgdGhpcy5lbGVtLmNsYXNzTGlzdC5hZGQoJ3NsaWRlcl9fYnV0dG9uLWxhYmVsX3Bvc2l0aW9uX3ZlcnRpY2FsJyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLmVsZW0uY2xhc3NMaXN0LnJlbW92ZSgnc2xpZGVyX19idXR0b24tbGFiZWxfcG9zaXRpb25fdmVydGljYWwnKTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IExhYmVsOyIsImltcG9ydCBjcmVhdGVFbGVtIGZyb20gJy4vY3JlYXRlRWxlbSc7XHJcblxyXG5jbGFzcyBTY2FsZUZpbGxpbmcge1xyXG4gIGVsZW06IEhUTUxFbGVtZW50O1xyXG4gIGlzVmVydGljYWw6IGJvb2xlYW47XHJcblxyXG4gIGNvbnN0cnVjdG9yKGlzVmVydGljYWw6IGJvb2xlYW4pIHtcclxuICAgIHRoaXMuZWxlbSA9IGNyZWF0ZUVsZW0oJ3NsaWRlcl9fc2NhbGUtZmlsbGluZycpO1xyXG4gICAgdGhpcy5pc1ZlcnRpY2FsID0gaXNWZXJ0aWNhbDtcclxuICB9XHJcblxyXG4gIHNldFBvc2l0aW9uID0gKG9mZnNldDogbnVtYmVyKTogdm9pZCA9PiB7XHJcbiAgICBpZiAodGhpcy5pc1ZlcnRpY2FsKSB7XHJcbiAgICAgIHRoaXMuZWxlbS5zdHlsZS5sZWZ0ID0gJzAnO1xyXG4gICAgICB0aGlzLmVsZW0uc3R5bGUud2lkdGggPSAnMTAwJSc7XHJcbiAgICAgIHRoaXMuZWxlbS5zdHlsZS50b3AgPSBvZmZzZXQgKyAncHgnO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5lbGVtLnN0eWxlLnRvcCA9ICcwJztcclxuICAgICAgdGhpcy5lbGVtLnN0eWxlLmhlaWdodCA9ICcxMDAlJztcclxuICAgICAgdGhpcy5lbGVtLnN0eWxlLmxlZnQgPSBvZmZzZXQgKyAncHgnO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc2V0RGltZW5zaW9uID0gKGRpbWVuc2lvbjogbnVtYmVyKTogdm9pZCA9PiB7XHJcbiAgICBpZiAodGhpcy5pc1ZlcnRpY2FsKSB7XHJcbiAgICAgIHRoaXMuZWxlbS5zdHlsZS5oZWlnaHQgPSBkaW1lbnNpb24gKyAncHgnO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5lbGVtLnN0eWxlLndpZHRoID0gZGltZW5zaW9uICsgJ3B4JztcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGluaXQgPSAoaXNWZXJ0aWNhbDogYm9vbGVhbik6IHZvaWQgPT4ge1xyXG4gICAgdGhpcy5pc1ZlcnRpY2FsID0gaXNWZXJ0aWNhbDtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFNjYWxlRmlsbGluZztcclxuIiwiaW1wb3J0IE1ha2VPYnNlcnZhYmxlT2JqZWN0IGZyb20gXCIuL2Fzc2V0cy9NYWtlT2JzZXJ2YWJsZU9iamVjdFwiO1xyXG5pbXBvcnQgY3JlYXRlRWxlbSBmcm9tIFwiLi9hc3NldHMvY3JlYXRlRWxlbVwiO1xyXG5pbXBvcnQgU2NhbGUgZnJvbSBcIi4vYXNzZXRzL1NjYWxlXCI7XHJcbmltcG9ydCBHcmFkdWF0aW9uIGZyb20gXCIuL2Fzc2V0cy9HcmFkdWF0aW9uXCI7XHJcbmltcG9ydCBCdXR0b24gZnJvbSBcIi4vYXNzZXRzL0J1dHRvblwiO1xyXG5pbXBvcnQgTGFiZWwgZnJvbSBcIi4vYXNzZXRzL0xhYmVsXCI7XHJcbmltcG9ydCBTY2FsZUZpbGxpbmcgZnJvbSBcIi4vYXNzZXRzL1NjYWxlRmlsbGluZ1wiO1xyXG5cclxuY2xhc3MgVmlldyB7XHJcbiAgW2luZGV4OiBzdHJpbmddOiBudW1iZXJ8Ym9vbGVhbnxTY2FsZXxHcmFkdWF0aW9ufFNjYWxlRmlsbGluZ3xCdXR0b258TGFiZWx8TWFrZU9ic2VydmFibGVPYmplY3R8RnVuY3Rpb247XHJcbiAgc2NhbGU6IFNjYWxlO1xyXG4gIGdyYWR1YXRpb246IEdyYWR1YXRpb247XHJcbiAgc2NhbGVGaWxsaW5nOiBTY2FsZUZpbGxpbmc7XHJcbiAgYnV0dG9uMTogQnV0dG9uO1xyXG4gIGJ1dHRvbjI6IEJ1dHRvbjtcclxuICBsYWJlbDE6IExhYmVsO1xyXG4gIGxhYmVsMjogTGFiZWw7XHJcbiAgaXNSYW5nZTogYm9vbGVhbjtcclxuICBpc1ZlcnRpY2FsOiBib29sZWFuO1xyXG4gIHNob3dMYWJlbDogYm9vbGVhbjtcclxuICBtaW5WYWx1ZTogbnVtYmVyO1xyXG4gIG1heFZhbHVlOiBudW1iZXI7XHJcbiAgY3VyTWluVmFsdWU6IG51bWJlcjtcclxuICBjdXJNYXhWYWx1ZTogbnVtYmVyO1xyXG4gIHN0ZXA6IG51bWJlcjtcclxuICBpc0Zsb2F0OiBib29sZWFuO1xyXG4gIG9ic2VydmVyczogTWFrZU9ic2VydmFibGVPYmplY3Q7XHJcblxyXG4gIGNvbnN0cnVjdG9yKG1pblZhbHVlID0gMCwgbWF4VmFsdWUgPSAxMDAwLCBzdGVwID0gMSwgaXNSYW5nZSA9IGZhbHNlLCBpc1ZlcnRpY2FsID0gZmFsc2UsIHNob3dMYWJlbCA9IGZhbHNlLCBpc0Zsb2F0ID0gZmFsc2UpIHtcclxuICAgIHRoaXMuc2NhbGUgPSBuZXcgU2NhbGUoaXNWZXJ0aWNhbCk7XHJcbiAgICB0aGlzLmJ1dHRvbjEgPSBuZXcgQnV0dG9uKGlzVmVydGljYWwpO1xyXG4gICAgdGhpcy5idXR0b24yID0gbmV3IEJ1dHRvbihpc1ZlcnRpY2FsKTtcclxuICAgIHRoaXMubGFiZWwxID0gbmV3IExhYmVsKGlzVmVydGljYWwpO1xyXG4gICAgdGhpcy5sYWJlbDIgPSBuZXcgTGFiZWwoaXNWZXJ0aWNhbCk7XHJcbiAgICB0aGlzLnNjYWxlRmlsbGluZyA9IG5ldyBTY2FsZUZpbGxpbmcoaXNWZXJ0aWNhbCk7XHJcbiAgICB0aGlzLmdyYWR1YXRpb24gPSBuZXcgR3JhZHVhdGlvbigpO1xyXG4gICAgdGhpcy5taW5WYWx1ZSA9IG1pblZhbHVlO1xyXG4gICAgdGhpcy5tYXhWYWx1ZSA9IG1heFZhbHVlO1xyXG4gICAgdGhpcy5jdXJNaW5WYWx1ZSA9IG1pblZhbHVlO1xyXG4gICAgdGhpcy5jdXJNYXhWYWx1ZSA9IG1heFZhbHVlO1xyXG4gICAgdGhpcy5zdGVwID0gc3RlcDtcclxuICAgIHRoaXMuaXNSYW5nZSA9IGlzUmFuZ2U7XHJcbiAgICB0aGlzLmlzVmVydGljYWwgPSBpc1ZlcnRpY2FsO1xyXG4gICAgdGhpcy5zaG93TGFiZWwgPSBzaG93TGFiZWw7XHJcbiAgICB0aGlzLmlzRmxvYXQgPSBpc0Zsb2F0O1xyXG4gICAgdGhpcy5vYnNlcnZlcnMgPSBuZXcgTWFrZU9ic2VydmFibGVPYmplY3QoKVxyXG4gICAgdGhpcy5jaGVja1ZhbHVlcygpO1xyXG4gIH1cclxuXHJcbiAgZ2V0U3RhcnQgPSAoKTogbnVtYmVyID0+IHtcclxuICAgIGlmICh0aGlzLmlzUmFuZ2UpIHtcclxuICAgICAgcmV0dXJuIHRoaXMuYnV0dG9uMS5nZXRQb3NpdGlvbigpIC0gdGhpcy5zY2FsZS5nZXRQb3NpdGlvbigpICsgdGhpcy5idXR0b24xLmdldFdpZHRoKCkvMjtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gMDtcclxuICB9XHJcblxyXG4gIGdldEVuZCA9ICgpOiBudW1iZXIgPT4ge1xyXG4gICAgcmV0dXJuIHRoaXMuYnV0dG9uMi5nZXRQb3NpdGlvbigpIC0gdGhpcy5zY2FsZS5nZXRQb3NpdGlvbigpICsgdGhpcy5idXR0b24yLmdldFdpZHRoKCkvMjtcclxuICB9XHJcblxyXG4gIHVwZGF0ZUVsZW1zID0gKCk6IHZvaWQgPT4ge1xyXG4gICAgdGhpcy5zY2FsZUZpbGxpbmcuaW5pdCh0aGlzLmlzVmVydGljYWwpO1xyXG4gICAgdGhpcy5zY2FsZUZpbGxpbmcuc2V0UG9zaXRpb24odGhpcy5nZXRTdGFydCgpKTtcclxuICAgIHRoaXMuc2NhbGVGaWxsaW5nLnNldERpbWVuc2lvbih0aGlzLmdldEVuZCgpIC0gdGhpcy5nZXRTdGFydCgpKTtcclxuXHJcbiAgICBpZiAoIXRoaXMuaXNSYW5nZSkge1xyXG4gICAgICB0aGlzLmN1ck1pblZhbHVlID0gdGhpcy5taW5WYWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLm9ic2VydmVycy5ub3RpZnlPYnNlcnZlcnMoKTtcclxuICB9XHJcblxyXG4gIHJvdW5kID0gKHZhbDogbnVtYmVyLCBzdGVwOiBudW1iZXIpOiBudW1iZXIgPT4ge1xyXG4gICAgY29uc3Qgd2hvbGUgPSBNYXRoLmZsb29yKHZhbC9zdGVwKTtcclxuICAgIGNvbnN0IHJlbWluZGVyID0gdmFsICUgc3RlcDtcclxuICAgIGlmICh2YWwgPCAwKSB7XHJcbiAgICAgIHJldHVybiBNYXRoLmFicyhyZW1pbmRlcikgPiBzdGVwLzIgPyB3aG9sZSpzdGVwIDogKHdob2xlICsgMSkqc3RlcDtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gcmVtaW5kZXIgPCBzdGVwLzIgPyB3aG9sZSpzdGVwIDogKHdob2xlICsgMSkqc3RlcDtcclxuICB9XHJcblxyXG4gIHJvdW5kT2Zmc2V0QnV0dCA9IChjdXJyT2Zmc2V0OiBudW1iZXIpOiBBcnJheTxudW1iZXI+ID0+IHtcclxuICAgIGNvbnN0IGN1cnJWYWx1ZSA9IHRoaXMubWluVmFsdWUgKyAoY3Vyck9mZnNldCArIHRoaXMuYnV0dG9uMi5nZXRXaWR0aCgpLzIpKih0aGlzLm1heFZhbHVlIC0gdGhpcy5taW5WYWx1ZSkvdGhpcy5zY2FsZS5nZXREaW1lbnNpb24oKTtcclxuICAgIGxldCByb3VuZFZhbHVlID0gdGhpcy5yb3VuZChjdXJyVmFsdWUsIHRoaXMuc3RlcCk7XHJcblxyXG4gICAgaWYgKHRoaXMuaXNGbG9hdCkge1xyXG4gICAgICByb3VuZFZhbHVlID0gcGFyc2VGbG9hdChyb3VuZFZhbHVlLnRvRml4ZWQoMikpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChyb3VuZFZhbHVlIDwgdGhpcy5taW5WYWx1ZSkge1xyXG4gICAgICByb3VuZFZhbHVlID0gdGhpcy5taW5WYWx1ZTtcclxuICAgIH0gZWxzZSBpZiAocm91bmRWYWx1ZSA+IHRoaXMubWF4VmFsdWUpIHtcclxuICAgICAgcm91bmRWYWx1ZSA9IHRoaXMubWF4VmFsdWU7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3Qgcm91bmRPZmZzZXQgPSB0aGlzLm9mZnNldFZhbHVlQ29udihyb3VuZFZhbHVlKTtcclxuICAgIHJldHVybiBbcm91bmRPZmZzZXQsIHJvdW5kVmFsdWVdO1xyXG4gIH1cclxuXHJcbiAgb2Zmc2V0VmFsdWVDb252ID0gKHZhbHVlOiBudW1iZXIpOiBudW1iZXIgPT4ge1xyXG4gICAgcmV0dXJuICgodmFsdWUgLSB0aGlzLm1pblZhbHVlKS8odGhpcy5tYXhWYWx1ZSAtIHRoaXMubWluVmFsdWUpKnRoaXMuc2NhbGUuZ2V0RGltZW5zaW9uKCkgLSB0aGlzLmJ1dHRvbjIuZ2V0V2lkdGgoKS8yKTtcclxuICB9XHJcblxyXG4gIC8vQnV0dG9uMSAgSGFuZGxlcnMtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgYnV0dDFNb3ZlID0gKHJvdW5kT2Zmc2V0OiBudW1iZXIsIHJvdW5kVmFsdWU6IG51bWJlcik6IHZvaWQgPT4ge1xyXG4gICAgdGhpcy5idXR0b24xLnNldFBvc2l0aW9uKHJvdW5kT2Zmc2V0KTtcclxuICAgIHRoaXMubGFiZWwxLnNldFBvc2l0aW9uKHJvdW5kT2Zmc2V0ICsgdGhpcy5idXR0b24xLmdldFdpZHRoKCkvMiwgcm91bmRWYWx1ZSk7XHJcblxyXG4gICAgaWYgKHJvdW5kVmFsdWUgPCB0aGlzLm1pblZhbHVlKSB7XHJcbiAgICAgIHJvdW5kVmFsdWUgPSB0aGlzLm1pblZhbHVlO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuY3VyTWluVmFsdWUgPSByb3VuZFZhbHVlO1xyXG4gICAgdGhpcy51cGRhdGVFbGVtcygpO1xyXG4gIH1cclxuXHJcbiAgYnV0dDFPZmZzZXRDaGVjayA9IChuZXdPZmZzZXQ6IG51bWJlcik6IEFycmF5PG51bWJlcj4gPT4ge1xyXG4gICAgbGV0IHJvdW5kVmFsdWU7XHJcblxyXG4gICAgaWYgKG5ld09mZnNldCA8IC10aGlzLmJ1dHRvbjEuZ2V0V2lkdGgoKS8yKSB7XHJcbiAgICAgIG5ld09mZnNldCA9IC10aGlzLmJ1dHRvbjEuZ2V0V2lkdGgoKS8yO1xyXG4gICAgICByb3VuZFZhbHVlID0gdGhpcy5taW5WYWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBzdGVwV2lkdGggPSB0aGlzLnN0ZXAqdGhpcy5zY2FsZS5nZXREaW1lbnNpb24oKS8odGhpcy5tYXhWYWx1ZSAtIHRoaXMubWluVmFsdWUpO1xyXG4gICAgY29uc3QgbWluT2Zmc2V0ID0gc3RlcFdpZHRoLzEuNSA+IHRoaXMuYnV0dG9uMS5nZXRXaWR0aCgpID8gc3RlcFdpZHRoLzEuNSA6IHRoaXMuYnV0dG9uMS5nZXRXaWR0aCgpO1xyXG5cclxuICAgIGlmIChuZXdPZmZzZXQgPiB0aGlzLmJ1dHRvbjIuZ2V0UG9zaXRpb24oKSAtIHRoaXMuc2NhbGUuZ2V0UG9zaXRpb24oKSAtIG1pbk9mZnNldCkge1xyXG4gICAgICBuZXdPZmZzZXQgPSB0aGlzLmJ1dHRvbjIuZ2V0UG9zaXRpb24oKSAtIHRoaXMuc2NhbGUuZ2V0UG9zaXRpb24oKSAtIG1pbk9mZnNldDtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gW25ld09mZnNldCwgcm91bmRWYWx1ZV07XHJcbiAgfVxyXG5cclxuICBvbk1vdXNlTW92ZTEgPSAoZXZlbnRNbTogTW91c2VFdmVudCk6IHZvaWQgPT4ge1xyXG4gICAgbGV0IHJvdW5kVmFsdWU7XHJcbiAgICBsZXQgcm91bmRPZmZzZXQ7XHJcbiAgICBjb25zdCBjb29yZGluYXRlID0gdGhpcy5pc1ZlcnRpY2FsID8gZXZlbnRNbS5jbGllbnRZIDogZXZlbnRNbS5jbGllbnRYO1xyXG4gICAgY29uc3QgbmV3T2Zmc2V0ID0gY29vcmRpbmF0ZSAtIHRoaXMuc2NhbGUuZ2V0UG9zaXRpb24oKSAtIHRoaXMuYnV0dG9uMi5nZXRXaWR0aCgpLzI7XHJcblxyXG4gICAgW3JvdW5kT2Zmc2V0LCByb3VuZFZhbHVlXSA9IHRoaXMuYnV0dDFPZmZzZXRDaGVjayhuZXdPZmZzZXQpO1xyXG5cclxuICAgIGlmICghcm91bmRWYWx1ZSkge1xyXG4gICAgICAgIFtyb3VuZE9mZnNldCwgcm91bmRWYWx1ZV0gPSB0aGlzLnJvdW5kT2Zmc2V0QnV0dChyb3VuZE9mZnNldCk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5idXR0MU1vdmUocm91bmRPZmZzZXQsIHJvdW5kVmFsdWUpO1xyXG4gIH1cclxuXHJcbiAgb25Nb3VzZVVwMSA9ICgpOiB2b2lkID0+IHtcclxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsIHRoaXMub25Nb3VzZVVwMSk7XHJcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsIHRoaXMub25Nb3VzZU1vdmUxKTtcclxuICB9XHJcblxyXG4gIC8vQnV0dG9uMiAgSGFuZGxlcnMtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgYnV0dDJNb3ZlID0gKHJvdW5kT2Zmc2V0OiBudW1iZXIsIHJvdW5kVmFsdWU6IG51bWJlcik6IHZvaWQgPT4ge1xyXG4gICAgdGhpcy5idXR0b24yLnNldFBvc2l0aW9uKHJvdW5kT2Zmc2V0KTtcclxuICAgIHRoaXMubGFiZWwyLnNldFBvc2l0aW9uKHJvdW5kT2Zmc2V0ICsgdGhpcy5idXR0b24yLmdldFdpZHRoKCkvMiwgcm91bmRWYWx1ZSk7XHJcblxyXG4gICAgaWYgKHJvdW5kVmFsdWUgPCB0aGlzLm1pblZhbHVlKSB7XHJcbiAgICAgIHJvdW5kVmFsdWUgPSB0aGlzLm1pblZhbHVlO1xyXG4gICAgfSBlbHNlIGlmIChyb3VuZFZhbHVlID4gdGhpcy5tYXhWYWx1ZSkge1xyXG4gICAgICByb3VuZFZhbHVlID0gdGhpcy5tYXhWYWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmN1ck1heFZhbHVlID0gcm91bmRWYWx1ZTtcclxuICAgIHRoaXMudXBkYXRlRWxlbXMoKTtcclxuICB9XHJcblxyXG4gIGJ1dHQyT2Zmc2V0Q2hlY2sgPSAobmV3T2Zmc2V0OiBudW1iZXIpOiBBcnJheTxudW1iZXI+ID0+IHtcclxuICAgIGxldCByb3VuZFZhbHVlO1xyXG5cclxuICAgIGlmICghdGhpcy5pc1JhbmdlKSB7XHJcbiAgICAgIGlmIChuZXdPZmZzZXQgPCAtdGhpcy5idXR0b24yLmdldFdpZHRoKCkvMikge1xyXG4gICAgICAgIG5ld09mZnNldCA9IC10aGlzLmJ1dHRvbjIuZ2V0V2lkdGgoKS8yO1xyXG4gICAgICAgIHJvdW5kVmFsdWUgPSB0aGlzLm1pblZhbHVlO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKG5ld09mZnNldCA+IHRoaXMuc2NhbGUuZ2V0RGltZW5zaW9uKCkgLSB0aGlzLmJ1dHRvbjIuZ2V0V2lkdGgoKS8yKSB7XHJcbiAgICAgIG5ld09mZnNldCA9IHRoaXMuc2NhbGUuZ2V0RGltZW5zaW9uKCkgLSB0aGlzLmJ1dHRvbjIuZ2V0V2lkdGgoKS8yO1xyXG4gICAgICByb3VuZFZhbHVlID0gdGhpcy5tYXhWYWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBzdGVwV2lkdGggPSB0aGlzLnN0ZXAqdGhpcy5zY2FsZS5nZXREaW1lbnNpb24oKS8odGhpcy5tYXhWYWx1ZSAtIHRoaXMubWluVmFsdWUpO1xyXG4gICAgY29uc3QgbWluT2Zmc2V0ID0gc3RlcFdpZHRoLzEuNSA+IHRoaXMuYnV0dG9uMS5nZXRXaWR0aCgpID8gc3RlcFdpZHRoLzEuNSA6IHRoaXMuYnV0dG9uMS5nZXRXaWR0aCgpO1xyXG5cclxuICAgIGlmIChuZXdPZmZzZXQgPCB0aGlzLmJ1dHRvbjEuZ2V0UG9zaXRpb24oKSAtIHRoaXMuc2NhbGUuZ2V0UG9zaXRpb24oKSArIG1pbk9mZnNldCkge1xyXG4gICAgICBuZXdPZmZzZXQgPSB0aGlzLmJ1dHRvbjEuZ2V0UG9zaXRpb24oKSAtIHRoaXMuc2NhbGUuZ2V0UG9zaXRpb24oKSArIG1pbk9mZnNldDtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gW25ld09mZnNldCwgcm91bmRWYWx1ZV07XHJcbiAgfVxyXG5cclxuICBvbk1vdXNlTW92ZTIgPSAoZXZlbnRNbTogTW91c2VFdmVudCk6IHZvaWQgPT4ge1xyXG4gICAgbGV0IHJvdW5kVmFsdWU7XHJcbiAgICBsZXQgcm91bmRPZmZzZXQ7XHJcbiAgICBjb25zdCBjb29yZGluYXRlID0gdGhpcy5pc1ZlcnRpY2FsID8gZXZlbnRNbS5jbGllbnRZIDogZXZlbnRNbS5jbGllbnRYO1xyXG4gICAgY29uc3QgbmV3T2Zmc2V0ID0gY29vcmRpbmF0ZSAtIHRoaXMuc2NhbGUuZ2V0UG9zaXRpb24oKSAtIHRoaXMuYnV0dG9uMi5nZXRXaWR0aCgpLzI7XHJcblxyXG4gICAgW3JvdW5kT2Zmc2V0LCByb3VuZFZhbHVlXSA9IHRoaXMuYnV0dDJPZmZzZXRDaGVjayhuZXdPZmZzZXQpO1xyXG5cclxuICAgIGlmICghcm91bmRWYWx1ZSkge1xyXG4gICAgICBbcm91bmRPZmZzZXQsIHJvdW5kVmFsdWVdID0gdGhpcy5yb3VuZE9mZnNldEJ1dHQocm91bmRPZmZzZXQpO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuYnV0dDJNb3ZlKHJvdW5kT2Zmc2V0LCByb3VuZFZhbHVlKTtcclxuICB9XHJcblxyXG4gIG9uTW91c2VVcDIgPSAoKTogdm9pZCA9PiB7XHJcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgdGhpcy5vbk1vdXNlVXAyKTtcclxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIHRoaXMub25Nb3VzZU1vdmUyKTtcclxuICB9XHJcblxyXG4gIGJ1dHQxQ2xvc2VyQ2hlY2sgPSAoY29vcmRpbmF0ZTogbnVtYmVyKTogYm9vbGVhbiA9PiB7XHJcbiAgICByZXR1cm4gKE1hdGguYWJzKGNvb3JkaW5hdGUgLSB0aGlzLmJ1dHRvbjEuZ2V0UG9zaXRpb24oKSAtIHRoaXMuYnV0dG9uMS5nZXRXaWR0aCgpLzIpXHJcbiAgICAgIDwgTWF0aC5hYnMoY29vcmRpbmF0ZSAtIHRoaXMuYnV0dG9uMi5nZXRQb3NpdGlvbigpIC0gdGhpcy5idXR0b24yLmdldFdpZHRoKCkvMikpO1xyXG4gIH1cclxuXHJcbiAgLy8gU2NhbGUgRXZlbnRMaXN0ZW5lcnMtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICBzY2FsZU9uY2xpY2sgPSAoZXZlbnQ6IE1vdXNlRXZlbnQpOiB2b2lkID0+IHtcclxuICAgIGlmKHRoaXMuaXNSYW5nZSkge1xyXG4gICAgICBjb25zdCBjb29yZGluYXRlID0gdGhpcy5pc1ZlcnRpY2FsID8gZXZlbnQuY2xpZW50WSA6IGV2ZW50LmNsaWVudFhcclxuXHJcbiAgICAgIGlmICh0aGlzLmJ1dHQxQ2xvc2VyQ2hlY2soY29vcmRpbmF0ZSkpIHtcclxuICAgICAgICB0aGlzLm9uTW91c2VNb3ZlMShldmVudCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy5vbk1vdXNlTW92ZTIoZXZlbnQpO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLm9uTW91c2VNb3ZlMihldmVudCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBHcmFkdWF0aW9uIEV2ZW50TGlzdGVuZXJzLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gIGludGVyTWFya0hhbmRsZXIgPSAoY3VyclZhbHVlOiBudW1iZXIpOiB2b2lkID0+IHtcclxuICAgIGxldCByb3VuZE9mZnNldDtcclxuICAgIGxldCByb3VuZFZhbHVlO1xyXG5cclxuICAgIGNvbnN0IG1hcmtPZmZzZXQgPSAoY3VyclZhbHVlIC0gdGhpcy5taW5WYWx1ZSkvKHRoaXMubWF4VmFsdWUgLSB0aGlzLm1pblZhbHVlKSp0aGlzLnNjYWxlLmdldERpbWVuc2lvbigpO1xyXG4gICAgW3JvdW5kT2Zmc2V0LCByb3VuZFZhbHVlXSA9IHRoaXMucm91bmRPZmZzZXRCdXR0KG1hcmtPZmZzZXQgLSB0aGlzLmJ1dHRvbjIuZ2V0V2lkdGgoKS8yKTtcclxuXHJcbiAgICBpZih0aGlzLmlzUmFuZ2UpIHtcclxuICAgICAgY29uc3QgY29vcmRpbmF0ZSA9IG1hcmtPZmZzZXQgKyB0aGlzLnNjYWxlLmdldFBvc2l0aW9uKCk7XHJcblxyXG4gICAgICBpZiAodGhpcy5idXR0MUNsb3NlckNoZWNrKGNvb3JkaW5hdGUpKSB7XHJcbiAgICAgICAgdGhpcy5idXR0MU1vdmUocm91bmRPZmZzZXQsIHJvdW5kVmFsdWUpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMuYnV0dDJNb3ZlKHJvdW5kT2Zmc2V0LCByb3VuZFZhbHVlKTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5idXR0Mk1vdmUocm91bmRPZmZzZXQsIHJvdW5kVmFsdWUpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgbWFyazFPbmNsaWNrID0gKCk6IHZvaWQgPT4ge1xyXG4gICAgY29uc3Qgcm91bmRPZmZzZXQgPSAtdGhpcy5idXR0b24yLmdldFdpZHRoKCkvMjtcclxuICAgIGNvbnN0IHJvdW5kVmFsdWUgPSB0aGlzLm1pblZhbHVlO1xyXG5cclxuICAgIGlmICghdGhpcy5pc1JhbmdlKSB7XHJcbiAgICAgIHRoaXMuYnV0dDJNb3ZlKHJvdW5kT2Zmc2V0LCByb3VuZFZhbHVlKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuYnV0dDFNb3ZlKHJvdW5kT2Zmc2V0LCByb3VuZFZhbHVlKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIG1hcms0T25jbGljayA9ICgpOiB2b2lkID0+IHtcclxuICAgIGNvbnN0IHJvdW5kT2Zmc2V0ID0gdGhpcy5zY2FsZS5nZXREaW1lbnNpb24oKSAtIHRoaXMuYnV0dG9uMi5nZXRXaWR0aCgpLzI7XHJcbiAgICB0aGlzLmJ1dHQyTW92ZShyb3VuZE9mZnNldCwgdGhpcy5tYXhWYWx1ZSk7XHJcbiAgfVxyXG5cclxuICBtYXJrMk9uY2xpY2sgPSAoKTogdm9pZCA9PiB7XHJcbiAgICBjb25zdCB2YWwgPSB0aGlzLmlzRmxvYXQgPyBwYXJzZUZsb2F0KHRoaXMuZ3JhZHVhdGlvbi5tYXJrMi5pbm5lckhUTUwpIDogcGFyc2VJbnQodGhpcy5ncmFkdWF0aW9uLm1hcmsyLmlubmVySFRNTCk7XHJcbiAgICB0aGlzLmludGVyTWFya0hhbmRsZXIodmFsKTtcclxuICB9XHJcblxyXG4gIG1hcmszT25jbGljayA9ICgpOiB2b2lkID0+IHtcclxuICAgIGNvbnN0IHZhbCA9IHRoaXMuaXNGbG9hdCA/IHBhcnNlRmxvYXQodGhpcy5ncmFkdWF0aW9uLm1hcmszLmlubmVySFRNTCkgOiBwYXJzZUludCh0aGlzLmdyYWR1YXRpb24ubWFyazMuaW5uZXJIVE1MKTtcclxuICAgIHRoaXMuaW50ZXJNYXJrSGFuZGxlcih2YWwpO1xyXG4gIH1cclxuXHJcbiAgY2hlY2tWYWx1ZXMgPSAoKTogdm9pZCA9PiB7XHJcbiAgICBpZiAodHlwZW9mIHRoaXMubWF4VmFsdWUgIT09IFwibnVtYmVyXCIpIHtcclxuICAgICAgY29uc29sZS5lcnJvcihcIk1heHZhbHVlIHNob3VsZCBiZSBhIG51bWJlclwiKTtcclxuICAgIH1cclxuICAgIGlmICh0eXBlb2YgdGhpcy5taW5WYWx1ZSAhPT0gXCJudW1iZXJcIikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKFwiTWF4dmFsdWUgc2hvdWxkIGJlIGEgbnVtYmVyXCIpO1xyXG4gICAgfVxyXG4gICAgaWYgKHR5cGVvZiB0aGlzLnN0ZXAgIT09IFwibnVtYmVyXCIpIHtcclxuICAgICAgY29uc29sZS5lcnJvcihcIlN0ZXAgc2hvdWxkIGJlIGEgbnVtYmVyXCIpO1xyXG4gICAgfVxyXG4gICAgaWYgKHR5cGVvZiB0aGlzLmlzUmFuZ2UgIT09IFwiYm9vbGVhblwiKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJpc1JhbmdlIHNob3VsZCBiZSBhIGJvb2xlYW5cIik7XHJcbiAgICB9XHJcbiAgICBpZiAodHlwZW9mIHRoaXMuaXNWZXJ0aWNhbCAhPT0gXCJib29sZWFuXCIpIHtcclxuICAgICAgY29uc29sZS5lcnJvcihcImlzVmVydGljYWwgc2hvdWxkIGJlIGEgYm9vbGVhblwiKTtcclxuICAgIH1cclxuICAgIGlmICh0eXBlb2YgdGhpcy5zaG93TGFiZWwgIT09IFwiYm9vbGVhblwiKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJTaG93TGFiZWwgc2hvdWxkIGJlIGEgYm9vbGVhblwiKTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzLnN0ZXAgPiB0aGlzLm1heFZhbHVlIC0gdGhpcy5taW5WYWx1ZSkge1xyXG4gICAgICB0aGlzLnN0ZXAgPSB0aGlzLm1heFZhbHVlIC0gdGhpcy5taW5WYWx1ZTtcclxuICAgICAgY29uc29sZS5lcnJvcihcIlN0ZXAgaXMgc2V0dGVkIHRvIHRoZSBtYXhcIik7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBpbml0ID0gKCk6IHZvaWQgPT4ge1xyXG4gICAgdGhpcy5zY2FsZS5pbml0KHRoaXMuaXNWZXJ0aWNhbCk7XHJcbiAgICB0aGlzLnNjYWxlRmlsbGluZy5pbml0KHRoaXMuaXNWZXJ0aWNhbCk7XHJcbiAgICB0aGlzLmdyYWR1YXRpb24uaW5pdCh0aGlzLm1pblZhbHVlLCB0aGlzLm1heFZhbHVlLCB0aGlzLmlzVmVydGljYWwsIHRoaXMuaXNGbG9hdCk7XHJcbiAgICB0aGlzLmJ1dHRvbjEuaW5pdCh0aGlzLmlzVmVydGljYWwpO1xyXG4gICAgdGhpcy5idXR0b24yLmluaXQodGhpcy5pc1ZlcnRpY2FsKTtcclxuICAgIHRoaXMubGFiZWwxLmluaXQodGhpcy5pc1ZlcnRpY2FsKTtcclxuICAgIHRoaXMubGFiZWwyLmluaXQodGhpcy5pc1ZlcnRpY2FsKTtcclxuXHJcbiAgICB0aGlzLmJ1dHRvbjEuZWxlbS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgICB0aGlzLmxhYmVsMS5lbGVtLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuICAgIHRoaXMuY2hlY2tWYWx1ZXMoKTtcclxuXHJcbiAgICBpZiAodGhpcy5zaG93TGFiZWwpIHtcclxuICAgICAgdGhpcy5sYWJlbDEuZWxlbS5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xyXG4gICAgICB0aGlzLmxhYmVsMi5lbGVtLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLmxhYmVsMS5lbGVtLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuICAgICAgdGhpcy5sYWJlbDIuZWxlbS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHRoaXMuaXNSYW5nZSkge1xyXG4gICAgICB0aGlzLmJ1dHRvbjEuZWxlbS5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5idXR0b24xLmVsZW0uc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG4gICAgICB0aGlzLmxhYmVsMS5lbGVtLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmJ1dHRvbjEuc2V0UG9zaXRpb24oLXRoaXMuYnV0dG9uMS5nZXRXaWR0aCgpLzIpO1xyXG4gICAgdGhpcy5idXR0b24yLnNldFBvc2l0aW9uKHRoaXMuc2NhbGUuZ2V0RGltZW5zaW9uKCkgLSB0aGlzLmJ1dHRvbjIuZ2V0V2lkdGgoKS8yKTtcclxuICAgIHRoaXMubGFiZWwxLnNldFBvc2l0aW9uKHRoaXMuZ2V0U3RhcnQoKSwgdGhpcy5taW5WYWx1ZSk7XHJcbiAgICB0aGlzLmxhYmVsMi5zZXRQb3NpdGlvbih0aGlzLmdldEVuZCgpLCB0aGlzLm1heFZhbHVlKTtcclxuXHJcbiAgICBpZiAodGhpcy5pc1ZlcnRpY2FsKSB7XHJcbiAgICAgIHRoaXMuZ3JhZHVhdGlvbi5ncmFkRWxlbS5zdHlsZS5oZWlnaHQgPSB0aGlzLnNjYWxlLmdldERpbWVuc2lvbigpICtcInB4XCI7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLmdyYWR1YXRpb24uZ3JhZEVsZW0uc3R5bGUuaGVpZ2h0ID0gMjAgK1wicHhcIjtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnVwZGF0ZUVsZW1zKCk7XHJcbiAgfVxyXG5cclxuICBhcHBlbmQgPSAoZW50cnk6IEhUTUxFbGVtZW50KTogdm9pZCA9PiB7XHJcbiAgICBlbnRyeS5hcHBlbmRDaGlsZCh0aGlzLnNjYWxlLmVsZW0pLmFwcGVuZENoaWxkKHRoaXMuc2NhbGVGaWxsaW5nLmVsZW0pO1xyXG4gICAgZW50cnkuYXBwZW5kQ2hpbGQodGhpcy5idXR0b24xLmVsZW0pO1xyXG4gICAgZW50cnkuYXBwZW5kQ2hpbGQodGhpcy5sYWJlbDEuZWxlbSk7XHJcbiAgICBlbnRyeS5hcHBlbmRDaGlsZCh0aGlzLmdyYWR1YXRpb24uZ3JhZEVsZW0pO1xyXG4gICAgZW50cnkuYXBwZW5kQ2hpbGQodGhpcy5idXR0b24yLmVsZW0pO1xyXG4gICAgZW50cnkuYXBwZW5kQ2hpbGQodGhpcy5sYWJlbDIuZWxlbSk7XHJcblxyXG4gICAgdGhpcy5zY2FsZS5lbGVtLm9uY2xpY2sgPSB0aGlzLnNjYWxlT25jbGljaztcclxuICAgIHRoaXMuZ3JhZHVhdGlvbi5tYXJrMS5vbmNsaWNrID0gdGhpcy5tYXJrMU9uY2xpY2s7XHJcbiAgICB0aGlzLmdyYWR1YXRpb24ubWFyazIub25jbGljayA9IHRoaXMubWFyazJPbmNsaWNrO1xyXG4gICAgdGhpcy5ncmFkdWF0aW9uLm1hcmszLm9uY2xpY2sgPSB0aGlzLm1hcmszT25jbGljaztcclxuICAgIHRoaXMuZ3JhZHVhdGlvbi5tYXJrNC5vbmNsaWNrID0gdGhpcy5tYXJrNE9uY2xpY2s7XHJcblxyXG4gICAgdGhpcy5idXR0b24xLmVsZW0ub25tb3VzZWRvd24gPSAoZXZlbnRNZDogTW91c2VFdmVudCkgPT4ge1xyXG4gICAgICBldmVudE1kLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgdGhpcy5vbk1vdXNlTW92ZTEpO1xyXG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2V1cFwiLCB0aGlzLm9uTW91c2VVcDEpO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuYnV0dG9uMi5lbGVtLm9ubW91c2Vkb3duID0gKGV2ZW50TWQ6IE1vdXNlRXZlbnQpID0+IHtcclxuICAgICAgZXZlbnRNZC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsIHRoaXMub25Nb3VzZU1vdmUyKTtcclxuICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNldXBcIiwgdGhpcy5vbk1vdXNlVXAyKTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCB7Y3JlYXRlRWxlbSwgU2NhbGUsIExhYmVsLCBCdXR0b24sIFNjYWxlRmlsbGluZywgVmlldywgR3JhZHVhdGlvbn07XHJcbiIsImltcG9ydCBNYWtlT2JzZXJ2YWJsZU9iamVjdCBmcm9tICcuLi9WaWV3L2Fzc2V0cy9NYWtlT2JzZXJ2YWJsZU9iamVjdCc7XHJcblxyXG5jbGFzcyBNb2RlbCB7XHJcbiAgY3VyTWluVmFsdWU6IG51bWJlcjtcclxuICBjdXJNYXhWYWx1ZTogbnVtYmVyO1xyXG4gIG9ic2VydmVyczogTWFrZU9ic2VydmFibGVPYmplY3Q7XHJcblxyXG4gIGNvbnN0cnVjdG9yKGN1ck1pblZhbHVlID0gMCwgY3VyTWF4VmFsdWUgPSAxMDAwKSB7XHJcbiAgICB0aGlzLmN1ck1pblZhbHVlID0gY3VyTWluVmFsdWU7XHJcbiAgICB0aGlzLmN1ck1heFZhbHVlID0gY3VyTWF4VmFsdWU7XHJcbiAgICB0aGlzLm9ic2VydmVycyA9IG5ldyBNYWtlT2JzZXJ2YWJsZU9iamVjdCgpO1xyXG4gIH1cclxuXHJcbiAgc2V0Q3VyTWluVmFsdWUoZGF0YTogbnVtYmVyKTogdm9pZCB7XHJcbiAgICBpZiAodGhpcy5jdXJNaW5WYWx1ZSAhPSBkYXRhKSB7XHJcbiAgICAgIHRoaXMuY3VyTWluVmFsdWUgPSBkYXRhO1xyXG4gICAgICB0aGlzLm9ic2VydmVycy5ub3RpZnlPYnNlcnZlcnMoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNldEN1ck1heFZhbHVlKGRhdGE6IG51bWJlcik6IHZvaWQge1xyXG4gICAgaWYgKHRoaXMuY3VyTWF4VmFsdWUgIT0gZGF0YSkge1xyXG4gICAgICB0aGlzLmN1ck1heFZhbHVlID0gZGF0YTtcclxuICAgICAgdGhpcy5vYnNlcnZlcnMubm90aWZ5T2JzZXJ2ZXJzKCk7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBNb2RlbDsiLCJpbXBvcnQgeyBWaWV3IH0gZnJvbSAnLi4vVmlldy9WaWV3JztcclxuaW1wb3J0IE1vZGVsIGZyb20gJy4uL01vZGVsL01vZGVsJztcclxuaW1wb3J0IE1ha2VPYnNlcnZhYmxlT2JqZWN0IGZyb20gJy4uL1ZpZXcvYXNzZXRzL01ha2VPYnNlcnZhYmxlT2JqZWN0JztcclxuXHJcbmludGVyZmFjZSBjb25maWdUeXBlIHtcclxuICBbaW5kZXg6IHN0cmluZ106IG51bWJlciB8IGJvb2xlYW47XHJcbn1cclxuXHJcbmNsYXNzIENvbnRyb2xsZXIge1xyXG4gIHZpZXc6IFZpZXc7XHJcbiAgbW9kZWw6IE1vZGVsO1xyXG4gIG9ic2VydmVyczogTWFrZU9ic2VydmFibGVPYmplY3Q7XHJcblxyXG4gIGNvbnN0cnVjdG9yKG1pblZhbHVlID0gMCwgbWF4VmFsdWUgPSAxMDAwLCBzdGVwID0gMSwgaXNSYW5nZSA9IGZhbHNlLCBpc1ZlcnRpY2FsID0gZmFsc2UsIHNob3dMYWJlbCA9IGZhbHNlLCBpc0Zsb2F0ID0gZmFsc2UpIHtcclxuICAgIHRoaXMudmlldyA9IG5ldyBWaWV3KG1pblZhbHVlLCBtYXhWYWx1ZSwgc3RlcCwgaXNSYW5nZSwgaXNWZXJ0aWNhbCwgc2hvd0xhYmVsLCBpc0Zsb2F0KTtcclxuICAgIHRoaXMubW9kZWwgPSBuZXcgTW9kZWwobWluVmFsdWUsIG1heFZhbHVlKTtcclxuICAgIHRoaXMub2JzZXJ2ZXJzID0gbmV3IE1ha2VPYnNlcnZhYmxlT2JqZWN0KCk7XHJcblxyXG4gICAgdGhpcy52aWV3Lm9ic2VydmVycy5hZGRPYnNlcnZlcigoKSA9PiB7XHJcbiAgICAgIHRoaXMubW9kZWwuY3VyTWluVmFsdWUgPSB0aGlzLnZpZXcuY3VyTWluVmFsdWU7XHJcbiAgICAgIHRoaXMubW9kZWwuY3VyTWF4VmFsdWUgPSB0aGlzLnZpZXcuY3VyTWF4VmFsdWU7XHJcbiAgICAgIHRoaXMub2JzZXJ2ZXJzLm5vdGlmeU9ic2VydmVycygpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5tb2RlbC5vYnNlcnZlcnMuYWRkT2JzZXJ2ZXIoKCkgPT4ge1xyXG4gICAgICBjb25zdCBjdXJNaW5WYWx1ZSA9IHRoaXMubW9kZWwuY3VyTWluVmFsdWU7XHJcbiAgICAgIGNvbnN0IGN1ck1heFZhbHVlID0gdGhpcy5tb2RlbC5jdXJNYXhWYWx1ZTtcclxuICAgICAgdGhpcy52aWV3LmJ1dHQxTW92ZSh0aGlzLnZpZXcub2Zmc2V0VmFsdWVDb252KGN1ck1pblZhbHVlKSwgY3VyTWluVmFsdWUpO1xyXG4gICAgICB0aGlzLnZpZXcuYnV0dDJNb3ZlKHRoaXMudmlldy5vZmZzZXRWYWx1ZUNvbnYoY3VyTWF4VmFsdWUpLCBjdXJNYXhWYWx1ZSk7XHJcbiAgICAgIHRoaXMub2JzZXJ2ZXJzLm5vdGlmeU9ic2VydmVycygpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBhcHBlbmQgPSAoZW50cnk6IEpRdWVyeSk6IHZvaWQgPT4ge1xyXG4gICAgdGhpcy52aWV3LmFwcGVuZChlbnRyeS5nZXQoMCkpO1xyXG4gICAgdGhpcy52aWV3LmluaXQoKTtcclxuICB9XHJcblxyXG4gIHVwZGF0ZSA9IChhcmdzOiBjb25maWdUeXBlKTogdm9pZCA9PiB7XHJcbiAgICBPYmplY3Qua2V5cyhhcmdzKS5tYXAoKGl0ZW0pICA9PiB7XHJcbiAgICAgIGlmICh0aGlzLnZpZXdbaXRlbV0gIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIHRoaXMudmlld1tpdGVtXSA9IGFyZ3NbaXRlbV07XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMudmlldy5pbml0KCk7XHJcbiAgICB0aGlzLnZpZXcuYnV0dDFNb3ZlKHRoaXMudmlldy5idXR0MU9mZnNldENoZWNrKHRoaXMudmlldy5vZmZzZXRWYWx1ZUNvbnYodGhpcy5tb2RlbC5jdXJNaW5WYWx1ZSkpWzBdLCB0aGlzLm1vZGVsLmN1ck1pblZhbHVlKTtcclxuICAgIHRoaXMudmlldy5idXR0Mk1vdmUodGhpcy52aWV3LmJ1dHQyT2Zmc2V0Q2hlY2sodGhpcy52aWV3Lm9mZnNldFZhbHVlQ29udih0aGlzLm1vZGVsLmN1ck1heFZhbHVlKSlbMF0sIHRoaXMubW9kZWwuY3VyTWF4VmFsdWUpO1xyXG4gIH1cclxuXHJcbiAgZ2V0VmFsdWVzID0gKCk6IEFycmF5PG51bWJlcj4gPT4ge1xyXG4gICAgcmV0dXJuIFt0aGlzLm1vZGVsLmN1ck1pblZhbHVlLCB0aGlzLm1vZGVsLmN1ck1heFZhbHVlXTtcclxuICB9XHJcblxyXG4gIHNldFZhbHVlcyA9IChjdXJNaW5WYWx1ZTogbnVtYmVyLCBjdXJNYXhWYWx1ZTogbnVtYmVyKTogdm9pZCA9PiB7XHJcbiAgICBpZiAoY3VyTWluVmFsdWUpIHtcclxuICAgICAgdGhpcy5tb2RlbC5zZXRDdXJNaW5WYWx1ZShjdXJNaW5WYWx1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGN1ck1heFZhbHVlKSB7XHJcbiAgICAgIHRoaXMubW9kZWwuc2V0Q3VyTWF4VmFsdWUoY3VyTWF4VmFsdWUpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZ2V0Q29uZmlnID0gKCk6IGNvbmZpZ1R5cGUgPT4ge1xyXG4gICAgcmV0dXJuIHttaW5WYWx1ZTogdGhpcy52aWV3Lm1pblZhbHVlLCBtYXhWYWx1ZTogdGhpcy52aWV3Lm1heFZhbHVlLCBzdGVwOiB0aGlzLnZpZXcuc3RlcCxcclxuICAgICAgaXNSYW5nZTogdGhpcy52aWV3LmlzUmFuZ2UsIGlzVmVydGljYWw6IHRoaXMudmlldy5pc1ZlcnRpY2FsLCBzaG93TGFiZWw6IHRoaXMudmlldy5zaG93TGFiZWwsIGlzRmxvYXQ6IHRoaXMudmlldy5pc0Zsb2F0fVxyXG4gIH1cclxuXHJcbiAgYWRkT2JzZXJ2ZXIgPSAoZm46IEZ1bmN0aW9uKTogdm9pZCA9PiB7XHJcbiAgICB0aGlzLm9ic2VydmVycy5hZGRPYnNlcnZlcihmbik7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBDb250cm9sbGVyOyIsImltcG9ydCBDb250cm9sbGVyIGZyb20gJy4vQ29udHJvbGxlci9Db250cm9sbGVyLnRzJztcclxuXHJcbihmdW5jdGlvbigkKSB7XHJcbiAgY29uc3QgY29uZmlnID0ge1xyXG4gICAgbWluVmFsdWU6IDAsXHJcbiAgICBtYXhWYWx1ZTogMTAwMCxcclxuICAgIHN0ZXA6IDEsXHJcbiAgICBpc1JhbmdlOiBmYWxzZSxcclxuICAgIGlzVmVydGljYWw6IGZhbHNlLFxyXG4gICAgc2hvd0xhYmVsOiBmYWxzZSxcclxuICAgIGlzRmxvYXQ6IGZhbHNlLFxyXG4gIH07XHJcblxyXG4gIGNvbnN0IG1ldGhvZHMgPSB7XHJcbiAgICBpbml0OiBmdW5jdGlvbihvcHQpIHtcclxuICAgICAgaWYgKCEkKHRoaXMpLmRhdGEoJ3NsaWRlcicpKSB7XHJcbiAgICAgICAgY29uc3QgbmV3Q29uZmlnID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShjb25maWcpKTtcclxuICAgICAgICBjb25zdCBzbGlkZXIgPSBuZXcgQ29udHJvbGxlciguLi5PYmplY3QudmFsdWVzKCQuZXh0ZW5kKG5ld0NvbmZpZywgb3B0KSkpO1xyXG4gICAgICAgICQodGhpcykuZGF0YSgnc2xpZGVyJywgc2xpZGVyKTtcclxuICAgICAgICBzbGlkZXIuYXBwZW5kKCQodGhpcykpO1xyXG4gICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIHVwZGF0ZTogZnVuY3Rpb24ob3B0KSB7XHJcbiAgICAgIGNvbnN0IHNsaWRlciA9ICQodGhpcykuZGF0YSgnc2xpZGVyJyk7XHJcbiAgICAgIHNsaWRlci51cGRhdGUob3B0KTtcclxuICAgIH0sXHJcblxyXG4gICAgZ2V0Q29uZmlnOiBmdW5jdGlvbigpIHtcclxuICAgICAgY29uc3Qgc2xpZGVyID0gJCh0aGlzKS5kYXRhKCdzbGlkZXInKTtcclxuICAgICAgcmV0dXJuIHNsaWRlci5nZXRDb25maWcoKTtcclxuICAgIH0sXHJcblxyXG4gICAgc2V0VmFsdWVzOiBmdW5jdGlvbihvcHQpIHtcclxuICAgICAgY29uc3Qgc2xpZGVyID0gJCh0aGlzKS5kYXRhKCdzbGlkZXInKTtcclxuICAgICAgc2xpZGVyLnNldFZhbHVlcyhvcHQuY3VyTWluVmFsdWUsIG9wdC5jdXJNYXhWYWx1ZSk7XHJcbiAgICB9LFxyXG5cclxuICAgIGlucHV0c0F0dGFjaDogZnVuY3Rpb24ob3B0KSB7XHJcbiAgICAgIGNvbnN0IHNsaWRlciA9ICQodGhpcykuZGF0YSgnc2xpZGVyJyk7XHJcbiAgICAgIHNsaWRlci5hZGRPYnNlcnZlcigoKSA9PiB7XHJcbiAgICAgICAgb3B0Lm1pblZhbHVlSW4udmFsKHNsaWRlci5nZXRWYWx1ZXMoKVswXSk7XHJcbiAgICAgICAgb3B0Lm1heFZhbHVlSW4udmFsKHNsaWRlci5nZXRWYWx1ZXMoKVsxXSk7XHJcbiAgICAgIH0pXHJcbiAgICB9LFxyXG4gIH1cclxuXHJcbiAgJC5mbi5vbWZnc2xpZGVyID0gZnVuY3Rpb24obWV0aG9kKSB7XHJcbiAgICBpZiAobWV0aG9kc1ttZXRob2RdKSB7XHJcbiAgICAgIHJldHVybiBtZXRob2RzW21ldGhvZF0uYXBwbHkodGhpcywgQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKSk7XHJcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBtZXRob2QgPT09ICdvYmplY3QnIHx8ICFtZXRob2QpIHtcclxuICAgICAgcmV0dXJuIG1ldGhvZHMuaW5pdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgJC5lcnJvcihg0JzQtdGC0L7QtCAke21ldGhvZH0g0L3QtSDQvdCw0LnQtNC10L0g0LIg0L/Qu9Cw0LPQuNC90LUgalF1ZXJ5Lm9tZmdzbGlkZXJgKTtcclxuICAgIH1cclxuICB9O1xyXG59KShqUXVlcnkpO1xyXG4iXSwic291cmNlUm9vdCI6IiJ9