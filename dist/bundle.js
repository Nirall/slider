!function(e){var t={};function i(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(n,o,function(t){return e[t]}.bind(null,o));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=1)}([function(e,t,i){},function(e,t,i){"use strict";i.r(t);i.p,i(0);var n=function(){for(var e=0,t=0,i=arguments.length;t<i;t++)e+=arguments[t].length;var n=Array(e),o=0;for(t=0;t<i;t++)for(var s=arguments[t],l=0,a=s.length;l<a;l++,o++)n[o]=s[l];return n},o=function(){function e(){this.observers=[]}return e.prototype.addObserver=function(e){if("function"!=typeof e)throw new Error("observer must be a function");this.observers.map((function(t){if(t===e)throw new Error("observer already in the list")})),this.observers.push(e)},e.prototype.removeObserver=function(e){for(var t=0;t<this.observers.length;t++){if(this.observers[t]===e)return void this.observers.splice(t,1)}throw new Error("could not find observer in list of observers")},e.prototype.notifyObservers=function(){n(this.observers).map((function(e){return e()}))},e}();var s=function(e){var t=document.createElement("div");return t.ondragstart=function(){return!1},t.classList.add(e),t},l=function(e){var t=this;this.getPosition=function(){return t.isVertical?t.elem.getBoundingClientRect().top:t.elem.getBoundingClientRect().left},this.getDimension=function(){return t.isVertical?t.elem.getBoundingClientRect().height:t.elem.getBoundingClientRect().width},this.init=function(e){t.isVertical=e,t.isVertical?t.elem.classList.add("slider__scale_position_vertical"):t.elem.classList.remove("slider__scale_position_vertical")},this.elem=s("slider__scale"),this.isVertical=e},a=function(){var e=this;this.init=function(t,i,n,o){void 0===o&&(o=!1),e.mark1.innerHTML=t+"",e.mark4.innerHTML=i+"",o?(e.mark2.innerHTML=(t+(i-t)/3).toFixed(2),e.mark3.innerHTML=(t+2*(i-t)/3).toFixed(2)):(e.mark2.innerHTML=t+Math.round((i-t)/3)+"",e.mark3.innerHTML=t+Math.round(2*(i-t)/3)+""),n?(e.mark1.style.marginTop="-9px",e.mark1.style.marginLeft="0",e.mark4.style.marginBottom="-9px",e.mark4.style.marginRight="0",e.gradElem.classList.add("slider__graduation_position_vertical")):(e.mark1.style.marginLeft="-15px",e.mark1.style.marginTop="0",e.mark4.style.marginRight="-15px",e.mark4.style.marginBottom="0",e.gradElem.classList.remove("slider__graduation_position_vertical"))},this.gradElem=s("slider__graduation"),this.mark1=s("slider__graduation-mark"),this.mark2=s("slider__graduation-mark"),this.mark3=s("slider__graduation-mark"),this.mark4=s("slider__graduation-mark"),this.gradElem.appendChild(this.mark1),this.gradElem.appendChild(this.mark2),this.gradElem.appendChild(this.mark3),this.gradElem.appendChild(this.mark4)},r=function(e){var t=this;this.getWidth=function(){return t.elem.getBoundingClientRect().width},this.getPosition=function(){return t.isVertical?t.elem.getBoundingClientRect().top:t.elem.getBoundingClientRect().left},this.setPosition=function(e){t.isVertical?(t.elem.style.left="50%",t.elem.style.top=e+"px"):(t.elem.style.top="50%",t.elem.style.left=e+"px")},this.init=function(e){t.isVertical=e,t.isVertical?t.elem.classList.add("slider__button_position_vertical"):t.elem.classList.remove("slider__button_position_vertical")},this.elem=s("slider__button"),this.isVertical=e},u=function(e){var t=this;this.getPosition=function(){return t.isVertical?t.elem.getBoundingClientRect().top:t.elem.getBoundingClientRect().left},this.setPosition=function(e,i){t.elem.innerHTML=i+"",t.isVertical?(t.elem.style.left="50%",t.elem.style.top=e-t.getDimension()/2+"px"):(t.elem.style.top="50%",t.elem.style.left=e-t.getDimension()/2+"px")},this.getDimension=function(){return t.isVertical?t.elem.getBoundingClientRect().height:t.elem.getBoundingClientRect().width},this.init=function(e){t.isVertical=e,t.isVertical?t.elem.classList.add("slider__button-label_position_vertical"):t.elem.classList.remove("slider__button-label_position_vertical")},this.elem=s("slider__button-label"),this.isVertical=e},c=function(e){var t=this;this.setPosition=function(e){t.isVertical?(t.elem.style.left="0",t.elem.style.width="100%",t.elem.style.top=e+"px"):(t.elem.style.top="0",t.elem.style.height="100%",t.elem.style.left=e+"px")},this.setDimension=function(e){t.isVertical?t.elem.style.height=e+"px":t.elem.style.width=e+"px"},this.init=function(e){t.isVertical=e,t.isVertical?t.elem.classList.add("slider__scale-filling_position_vertical"):t.elem.classList.remove("slider__scale-filling_position_vertical")},this.elem=s("slider__scale-filling"),this.isVertical=e},d=function(e,t,i,n,s,d,m){var h=this;void 0===e&&(e=0),void 0===t&&(t=1e3),void 0===i&&(i=1),void 0===n&&(n=!1),void 0===s&&(s=!1),void 0===d&&(d=!1),void 0===m&&(m=!1),this.getStart=function(){return h.isRange?h.button1.getPosition()-h.scale.getPosition()+h.button1.getWidth()/2:0},this.getEnd=function(){return h.button2.getPosition()-h.scale.getPosition()+h.button2.getWidth()/2},this.updateElems=function(){h.scaleFilling.init(h.isVertical),h.scaleFilling.setPosition(h.getStart()),h.scaleFilling.setDimension(h.getEnd()-h.getStart()),h.isRange||(h.curMinValue=h.minValue),h.observers.notifyObservers()},this.round=function(e,t){var i=Math.floor(e/t),n=e%t;return e<0?Math.abs(n)>t/2?i*t:(i+1)*t:n<t/2?i*t:(i+1)*t},this.roundOffsetButt=function(e){var t=h.minValue+(e+h.button2.getWidth()/2)*(h.maxValue-h.minValue)/h.scale.getDimension(),i=h.round(t,h.step);return h.isFloat&&(i=parseFloat(i.toFixed(2))),i<h.minValue?i=h.minValue:i>h.maxValue&&(i=h.maxValue),[h.offsetValueConv(i),i]},this.offsetValueConv=function(e){return(e-h.minValue)/(h.maxValue-h.minValue)*h.scale.getDimension()-h.button2.getWidth()/2},this.butt1Move=function(e,t){h.button1.setPosition(e),h.label1.setPosition(e+h.button1.getWidth()/2,t),t<h.minValue&&(t=h.minValue),h.curMinValue=t,h.updateElems()},this.butt1OffsetCheck=function(e){var t;e<-h.button1.getWidth()/2&&(e=-h.button1.getWidth()/2,t=h.minValue);var i=h.step*h.scale.getDimension()/(h.maxValue-h.minValue),n=i/1.5>h.button1.getWidth()?i/1.5:h.button1.getWidth();return e>h.button2.getPosition()-h.scale.getPosition()-n&&(e=h.button2.getPosition()-h.scale.getPosition()-n),[e,t]},this.onMouseMove1=function(e){var t,i,n,o,s=(h.isVertical?e.clientY:e.clientX)-h.scale.getPosition()-h.button2.getWidth()/2;o=(t=h.butt1OffsetCheck(s))[0],(n=t[1])||(o=(i=h.roundOffsetButt(o))[0],n=i[1]),h.butt1Move(o,n)},this.onMouseUp1=function(e){document.removeEventListener("mouseup",h.onMouseUp1),document.removeEventListener("mousemove",h.onMouseMove1)},this.butt2Move=function(e,t){h.button2.setPosition(e),h.label2.setPosition(e+h.button2.getWidth()/2,t),t<h.minValue?t=h.minValue:t>h.maxValue&&(t=h.maxValue),h.curMaxValue=t,h.updateElems()},this.butt2OffsetCheck=function(e){var t;h.isRange||e<-h.button2.getWidth()/2&&(e=-h.button2.getWidth()/2,t=h.minValue),e>h.scale.getDimension()-h.button2.getWidth()/2&&(e=h.scale.getDimension()-h.button2.getWidth()/2,t=h.maxValue);var i=h.step*h.scale.getDimension()/(h.maxValue-h.minValue),n=i/1.5>h.button1.getWidth()?i/1.5:h.button1.getWidth();return e<h.button1.getPosition()-h.scale.getPosition()+n&&(e=h.button1.getPosition()-h.scale.getPosition()+n),[e,t]},this.onMouseMove2=function(e){var t,i,n,o,s=(h.isVertical?e.clientY:e.clientX)-h.scale.getPosition()-h.button2.getWidth()/2;o=(t=h.butt2OffsetCheck(s))[0],(n=t[1])||(o=(i=h.roundOffsetButt(o))[0],n=i[1]),h.butt2Move(o,n)},this.onMouseUp2=function(e){document.removeEventListener("mouseup",h.onMouseUp2),document.removeEventListener("mousemove",h.onMouseMove2)},this.butt1CloserCheck=function(e){return Math.abs(e-h.button1.getPosition())<Math.abs(e-h.button2.getPosition())},this.scaleOnclick=function(e){if(h.isRange){var t=h.isVertical?e.clientY:e.clientX;h.butt1CloserCheck(t)?h.onMouseMove1(e):h.onMouseMove2(e)}else h.onMouseMove2(e)},this.interMarkHandler=function(e){var t,i,n,o=(e-h.minValue)/(h.maxValue-h.minValue)*h.scale.getDimension();if(i=(t=h.roundOffsetButt(o-h.button2.getWidth()/2))[0],n=t[1],h.isRange){var s=o+h.scale.getPosition();h.butt1CloserCheck(s)?h.butt1Move(i,n):h.butt2Move(i,n)}else h.butt2Move(i,n)},this.mark1Onclick=function(e){var t=-h.button2.getWidth()/2,i=h.minValue;h.isRange?h.butt1Move(t,i):h.butt2Move(t,i)},this.mark4Onclick=function(e){var t=h.scale.getDimension()-h.button2.getWidth()/2;h.butt2Move(t,h.maxValue)},this.mark2Onclick=function(e){var t=h.isFloat?parseFloat(h.graduation.mark2.innerHTML):parseInt(h.graduation.mark2.innerHTML);h.interMarkHandler(t)},this.mark3Onclick=function(e){var t=h.isFloat?parseFloat(h.graduation.mark3.innerHTML):parseInt(h.graduation.mark3.innerHTML);h.interMarkHandler(t)},this.checkValues=function(){"number"!=typeof h.maxValue&&console.error("Maxvalue should be a number"),"number"!=typeof h.minValue&&console.error("Maxvalue should be a number"),"number"!=typeof h.step&&console.error("Step should be a number"),"boolean"!=typeof h.isRange&&console.error("isRange should be a boolean"),"boolean"!=typeof h.isVertical&&console.error("isVertical should be a boolean"),"boolean"!=typeof h.showLabel&&console.error("ShowLabel should be a boolean"),h.step>h.maxValue-h.minValue&&(h.step=h.maxValue-h.minValue,console.error("Step is setted to the max"))},this.init=function(){h.scale.init(h.isVertical),h.scaleFilling.init(h.isVertical),h.graduation.init(h.minValue,h.maxValue,h.isVertical,h.isFloat),h.button1.init(h.isVertical),h.button2.init(h.isVertical),h.label1.init(h.isVertical),h.label2.init(h.isVertical),h.button1.elem.style.display="none",h.label1.elem.style.display="none",h.checkValues(),h.showLabel?(h.label1.elem.style.display="block",h.label2.elem.style.display="block"):(h.label1.elem.style.display="none",h.label2.elem.style.display="none"),h.isRange?h.button1.elem.style.display="block":(h.button1.elem.style.display="none",h.label1.elem.style.display="none"),h.button1.setPosition(-h.button1.getWidth()/2),h.button2.setPosition(h.scale.getDimension()-h.button2.getWidth()/2),h.label1.setPosition(h.getStart(),h.minValue),h.label2.setPosition(h.getEnd(),h.maxValue),h.isVertical?h.graduation.gradElem.style.height=h.scale.getDimension()+"px":h.graduation.gradElem.style.height="20px",h.updateElems()},this.append=function(e){e.appendChild(h.scale.elem).appendChild(h.scaleFilling.elem),e.appendChild(h.button1.elem),e.appendChild(h.label1.elem),e.appendChild(h.graduation.gradElem),e.appendChild(h.button2.elem),e.appendChild(h.label2.elem),h.scale.elem.onclick=h.scaleOnclick,h.graduation.mark1.onclick=h.mark1Onclick,h.graduation.mark2.onclick=h.mark2Onclick,h.graduation.mark3.onclick=h.mark3Onclick,h.graduation.mark4.onclick=h.mark4Onclick,h.button1.elem.onmousedown=function(e){e.preventDefault(),document.addEventListener("mousemove",h.onMouseMove1),document.addEventListener("mouseup",h.onMouseUp1)},h.button2.elem.onmousedown=function(e){e.preventDefault(),document.addEventListener("mousemove",h.onMouseMove2),document.addEventListener("mouseup",h.onMouseUp2)}},this.scale=new l(s),this.button1=new r(s),this.button2=new r(s),this.label1=new u(s),this.label2=new u(s),this.scaleFilling=new c(s),this.graduation=new a,this.minValue=e,this.maxValue=t,this.curMinValue=e,this.curMaxValue=t,this.step=i,this.isRange=n,this.isVertical=s,this.showLabel=d,this.isFloat=m,this.observers=new o,this.checkValues()},m=function(){function e(e,t){void 0===e&&(e=0),void 0===t&&(t=1e3),this.curMinValue=e,this.curMaxValue=t,this.observers=new o}return e.prototype.setCurMinValue=function(e){this.curMinValue!=e&&(this.curMinValue=e,this.observers.notifyObservers())},e.prototype.setCurMaxValue=function(e){this.curMaxValue!=e&&(this.curMaxValue=e,this.observers.notifyObservers())},e}(),h=function(e,t,i,n,s,l,a){var r=this;void 0===e&&(e=0),void 0===t&&(t=1e3),void 0===i&&(i=1),void 0===n&&(n=!1),void 0===s&&(s=!1),void 0===l&&(l=!1),void 0===a&&(a=!1),this.append=function(e){r.view.append(e.get(0)),r.view.init()},this.update=function(e){Object.keys(e).map((function(t){void 0!==r.view[t]&&(r.view[t]=e[t])})),r.view.init(),r.view.butt1Move(r.view.butt1OffsetCheck(r.view.offsetValueConv(r.model.curMinValue))[0],r.model.curMinValue),r.view.butt2Move(r.view.butt2OffsetCheck(r.view.offsetValueConv(r.model.curMaxValue))[0],r.model.curMaxValue)},this.getValues=function(){return[r.model.curMinValue,r.model.curMaxValue]},this.setValues=function(e,t){e&&r.model.setCurMinValue(e),t&&r.model.setCurMaxValue(t)},this.getConfig=function(){return{minValue:r.view.minValue,maxValue:r.view.maxValue,step:r.view.step,isRange:r.view.isRange,isVertical:r.view.isVertical,showLabel:r.view.showLabel,isFloat:r.view.isFloat}},this.addObserver=function(e){r.observers.addObserver(e)},this.view=new d(e,t,i,n,s,l,a),this.model=new m(e,t),this.observers=new o,this.view.observers.addObserver((function(){r.model.curMinValue=r.view.curMinValue,r.model.curMaxValue=r.view.curMaxValue,r.observers.notifyObservers()})),this.model.observers.addObserver((function(){var e=r.model.curMinValue,t=r.model.curMaxValue;r.view.butt1Move(r.view.offsetValueConv(e),e),r.view.butt2Move(r.view.offsetValueConv(t),t),r.observers.notifyObservers()}))};!function(e){const t={minValue:0,maxValue:1e3,step:1,isRange:!1,isVertical:!1,showLabel:!1,isFloat:!1},i={init:function(i){if(!e(this).data("slider")){const n=JSON.parse(JSON.stringify(t)),o=new h(...Object.values(e.extend(n,i)));e(this).data("slider",o),o.append(e(this))}},update:function(t){e(this).data("slider").update(t)},getConfig:function(){return e(this).data("slider").getConfig()},setValues:function(t){e(this).data("slider").setValues(t.curMinValue,t.curMaxValue)},inputsAttach:function(t){const i=e(this).data("slider");i.addObserver(()=>{t.minValueIn.val(i.getValues()[0]),t.maxValueIn.val(i.getValues()[1])})}};e.fn.omfgslider=function(t){return i[t]?i[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void e.error('Метод "'+t+'" не найден в плагине jQuery.mySimplePlugin'):i.init.apply(this,arguments)}}(jQuery)}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2luZGV4Lmh0bWwiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Fzc2V0cy9NYWtlT2JzZXJ2YWJsZU9iamVjdC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYXNzZXRzL2NyZWF0ZUVsZW0udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Fzc2V0cy9TY2FsZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYXNzZXRzL0dyYWR1YXRpb24udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Fzc2V0cy9CdXR0b24udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Fzc2V0cy9MYWJlbC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYXNzZXRzL1NjYWxlRmlsbGluZy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvdmlldy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbW9kZWwudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbnRyb2xsZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21haW4uanMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJ0aGlzIiwib2JzZXJ2ZXJzIiwiYWRkT2JzZXJ2ZXIiLCJmbiIsIkVycm9yIiwibWFwIiwib2JzZXJ2ZXIiLCJwdXNoIiwicmVtb3ZlT2JzZXJ2ZXIiLCJsZW5ndGgiLCJzcGxpY2UiLCJub3RpZnlPYnNlcnZlcnMiLCJjbGFzc05hbWUiLCJlbGVtIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50Iiwib25kcmFnc3RhcnQiLCJjbGFzc0xpc3QiLCJhZGQiLCJpc1ZlcnRpY2FsIiwiZ2V0UG9zaXRpb24iLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJ0b3AiLCJsZWZ0IiwiZ2V0RGltZW5zaW9uIiwiaGVpZ2h0Iiwid2lkdGgiLCJpbml0IiwicmVtb3ZlIiwibWluVmFsdWUiLCJtYXhWYWx1ZSIsImlzRmxvYXQiLCJtYXJrMSIsImlubmVySFRNTCIsIm1hcms0IiwibWFyazIiLCJ0b0ZpeGVkIiwibWFyazMiLCJNYXRoIiwicm91bmQiLCJzdHlsZSIsIm1hcmdpblRvcCIsIm1hcmdpbkxlZnQiLCJtYXJnaW5Cb3R0b20iLCJtYXJnaW5SaWdodCIsImdyYWRFbGVtIiwiYXBwZW5kQ2hpbGQiLCJnZXRXaWR0aCIsInNldFBvc2l0aW9uIiwib2Zmc2V0Iiwic2V0RGltZW5zaW9uIiwiZGltZW5zaW9uIiwic3RlcCIsImlzUmFuZ2UiLCJzaG93TGFiZWwiLCJnZXRTdGFydCIsImJ1dHRvbjEiLCJzY2FsZSIsImdldEVuZCIsImJ1dHRvbjIiLCJ1cGRhdGVFbGVtcyIsInNjYWxlRmlsbGluZyIsImN1ck1pblZhbHVlIiwidmFsIiwid2hvbGUiLCJmbG9vciIsInJlbWluZGVyIiwiYWJzIiwicm91bmRPZmZzZXRCdXR0IiwiY3Vyck9mZnNldCIsImN1cnJWYWx1ZSIsInJvdW5kVmFsdWUiLCJwYXJzZUZsb2F0Iiwib2Zmc2V0VmFsdWVDb252IiwiYnV0dDFNb3ZlIiwicm91bmRPZmZzZXQiLCJsYWJlbDEiLCJidXR0MU9mZnNldENoZWNrIiwibmV3T2Zmc2V0Iiwic3RlcFdpZHRoIiwibWluT2Zmc2V0Iiwib25Nb3VzZU1vdmUxIiwiZXZlbnRNbSIsImNsaWVudFkiLCJjbGllbnRYIiwib25Nb3VzZVVwMSIsImV2ZW50TXUiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiYnV0dDJNb3ZlIiwibGFiZWwyIiwiY3VyTWF4VmFsdWUiLCJidXR0Mk9mZnNldENoZWNrIiwib25Nb3VzZU1vdmUyIiwib25Nb3VzZVVwMiIsImJ1dHQxQ2xvc2VyQ2hlY2siLCJjb29yZGluYXRlIiwic2NhbGVPbmNsaWNrIiwiZXZlbnQiLCJpbnRlck1hcmtIYW5kbGVyIiwibWFya09mZnNldCIsIm1hcmsxT25jbGljayIsIm1hcms0T25jbGljayIsIm1hcmsyT25jbGljayIsImdyYWR1YXRpb24iLCJwYXJzZUludCIsIm1hcmszT25jbGljayIsImNoZWNrVmFsdWVzIiwiY29uc29sZSIsImVycm9yIiwiZGlzcGxheSIsImFwcGVuZCIsImVudHJ5Iiwib25jbGljayIsIm9ubW91c2Vkb3duIiwiZXZlbnRNZCIsInByZXZlbnREZWZhdWx0IiwiYWRkRXZlbnRMaXN0ZW5lciIsInNldEN1ck1pblZhbHVlIiwiZGF0YSIsInNldEN1ck1heFZhbHVlIiwidmlldyIsInVwZGF0ZSIsImFyZ3MiLCJrZXlzIiwiaXRlbSIsInVuZGVmaW5lZCIsIm1vZGVsIiwiZ2V0VmFsdWVzIiwic2V0VmFsdWVzIiwiZ2V0Q29uZmlnIiwiJCIsImNvbmZpZyIsIm1ldGhvZHMiLCJvcHQiLCJuZXdDb25maWciLCJKU09OIiwicGFyc2UiLCJzdHJpbmdpZnkiLCJzbGlkZXIiLCJ2YWx1ZXMiLCJleHRlbmQiLCJpbnB1dHNBdHRhY2giLCJtaW5WYWx1ZUluIiwibWF4VmFsdWVJbiIsIm9tZmdzbGlkZXIiLCJtZXRob2QiLCJhcHBseSIsIkFycmF5Iiwic2xpY2UiLCJhcmd1bWVudHMiLCJqUXVlcnkiXSwibWFwcGluZ3MiOiJhQUNFLElBQUlBLEVBQW1CLEdBR3ZCLFNBQVNDLEVBQW9CQyxHQUc1QixHQUFHRixFQUFpQkUsR0FDbkIsT0FBT0YsRUFBaUJFLEdBQVVDLFFBR25DLElBQUlDLEVBQVNKLEVBQWlCRSxHQUFZLENBQ3pDRyxFQUFHSCxFQUNISSxHQUFHLEVBQ0hILFFBQVMsSUFVVixPQU5BSSxFQUFRTCxHQUFVTSxLQUFL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QUFXLFNBQVNLLEdBQ0hILEVBQUVsSSxNQUFNc0gsS0FBSyxVQUNyQlUsVUFBVUssRUFBSXZFLFlBQWF1RSxFQUFJM0MsY0FHeENtRCxhQUFjLFNBQVNSLEdBQ3JCLE1BQU1LLEVBQVNSLEVBQUVsSSxNQUFNc0gsS0FBSyxVQUM1Qm9CLEVBQU94SSxZQUFZLEtBQ2pCbUksRUFBSVMsV0FBVy9FLElBQUkyRSxFQUFPWCxZQUFZLElBQ3RDTSxFQUFJVSxXQUFXaEYsSUFBSTJFLEVBQU9YLFlBQVksUUFLNUNHLEVBQUUvSCxHQUFHNkksV0FBYSxTQUFTQyxHQUN6QixPQUFJYixFQUFRYSxHQUNIYixFQUFRYSxHQUFRQyxNQUFNbEosS0FBTW1KLE1BQU12SixVQUFVd0osTUFBTWpMLEtBQUtrTCxVQUFXLElBQzlDLGlCQUFYSixHQUF3QkEsT0FHeENmLEVBQUV0QixNQUFNLFVBQWFxQyxFQUFTLCtDQUZ2QmIsRUFBUXpHLEtBQUt1SCxNQUFNbEosS0FBTXFKLFlBakR0QyxDQXNER0MiLCJmaWxlIjoiYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDEpO1xuIiwiZXhwb3J0IGRlZmF1bHQgX193ZWJwYWNrX3B1YmxpY19wYXRoX18gKyBcImluZGV4Lmh0bWxcIjsiLCJjbGFzcyBNYWtlT2JzZXJ2YWJsZU9iamVjdCB7XHJcbiAgb2JzZXJ2ZXJzOiBBcnJheTxGdW5jdGlvbj47XHJcbiAgXHJcbiAgY29uc3RydWN0b3IoKSB7XHJcbiAgICB0aGlzLm9ic2VydmVycyA9IFtdO1xyXG4gIH1cclxuXHJcbiAgYWRkT2JzZXJ2ZXIgKGZuOiBGdW5jdGlvbik6IHZvaWQge1xyXG4gICAgaWYgKHR5cGVvZiBmbiAhPT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ29ic2VydmVyIG11c3QgYmUgYSBmdW5jdGlvbicpO1xyXG4gICAgfVxyXG4gICAgdGhpcy5vYnNlcnZlcnMubWFwKChvYnNlcnZlcikgPT4ge1xyXG4gICAgICBpZiAob2JzZXJ2ZXIgPT09IGZuKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdvYnNlcnZlciBhbHJlYWR5IGluIHRoZSBsaXN0Jyk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgdGhpcy5vYnNlcnZlcnMucHVzaChmbik7XHJcbiAgfVxyXG5cclxuICByZW1vdmVPYnNlcnZlciAoZm46IEZ1bmN0aW9uKTogdm9pZCB7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMub2JzZXJ2ZXJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIGNvbnN0IG9ic2VydmVyID0gdGhpcy5vYnNlcnZlcnNbaV07XHJcbiAgICAgIGlmIChvYnNlcnZlciA9PT0gZm4pIHtcclxuICAgICAgICB0aGlzLm9ic2VydmVycy5zcGxpY2UoaSwgMSk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ2NvdWxkIG5vdCBmaW5kIG9ic2VydmVyIGluIGxpc3Qgb2Ygb2JzZXJ2ZXJzJyk7XHJcbiAgfVxyXG4gIFxyXG4gIG5vdGlmeU9ic2VydmVycyAoKTogdm9pZCB7XHJcbiAgICBjb25zdCBvYnNlcnZlcnNTbmFwc2hvdCA9IFsuLi50aGlzLm9ic2VydmVyc107XHJcbiAgICBvYnNlcnZlcnNTbmFwc2hvdC5tYXAoKG9ic2VydmVyKSA9PiBvYnNlcnZlcigpKTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IE1ha2VPYnNlcnZhYmxlT2JqZWN0OyIsIi8vIEVsZW1lbnRzIGZhY3RvcnlcclxuZnVuY3Rpb24gY3JlYXRlRWxlbShjbGFzc05hbWU6IHN0cmluZykgOkhUTUxFbGVtZW50IHtcclxuICBjb25zdCBlbGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICBlbGVtLm9uZHJhZ3N0YXJ0ID0gKCkgPT4gZmFsc2U7XHJcbiAgZWxlbS5jbGFzc0xpc3QuYWRkKGNsYXNzTmFtZSk7XHJcbiAgcmV0dXJuIGVsZW07XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNyZWF0ZUVsZW07IiwiaW1wb3J0IGNyZWF0ZUVsZW0gZnJvbSAnLi9jcmVhdGVFbGVtJztcclxuXHJcbmNsYXNzIFNjYWxlIHtcclxuICBlbGVtOiBIVE1MRWxlbWVudDtcclxuICBpc1ZlcnRpY2FsOiBib29sZWFuO1xyXG5cclxuICBjb25zdHJ1Y3Rvcihpc1ZlcnRpY2FsOiBib29sZWFuKSB7XHJcbiAgICB0aGlzLmVsZW0gPSBjcmVhdGVFbGVtKCdzbGlkZXJfX3NjYWxlJyk7XHJcbiAgICB0aGlzLmlzVmVydGljYWwgPSBpc1ZlcnRpY2FsO1xyXG4gIH1cclxuXHJcbiAgZ2V0UG9zaXRpb24gPSAoKTogbnVtYmVyID0+IHtcclxuICAgIGlmICh0aGlzLmlzVmVydGljYWwpIHtcclxuICAgICAgcmV0dXJuIHRoaXMuZWxlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3A7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuZWxlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0O1xyXG4gIH1cclxuXHJcbiAgZ2V0RGltZW5zaW9uID0gKCk6IG51bWJlciA9PiB7XHJcbiAgICBpZiAodGhpcy5pc1ZlcnRpY2FsKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLmVsZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuaGVpZ2h0O1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB0aGlzLmVsZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGg7XHJcbiAgfVxyXG5cclxuICBpbml0ID0gKGlzVmVydGljYWw6IGJvb2xlYW4pOiB2b2lkID0+IHtcclxuICAgIHRoaXMuaXNWZXJ0aWNhbCA9IGlzVmVydGljYWw7XHJcblxyXG4gICAgaWYgKHRoaXMuaXNWZXJ0aWNhbCkge1xyXG4gICAgICB0aGlzLmVsZW0uY2xhc3NMaXN0LmFkZCgnc2xpZGVyX19zY2FsZV9wb3NpdGlvbl92ZXJ0aWNhbCcpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5lbGVtLmNsYXNzTGlzdC5yZW1vdmUoJ3NsaWRlcl9fc2NhbGVfcG9zaXRpb25fdmVydGljYWwnKTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFNjYWxlO1xyXG4iLCJpbXBvcnQgY3JlYXRlRWxlbSBmcm9tICcuL2NyZWF0ZUVsZW0nO1xyXG5cclxuY2xhc3MgR3JhZHVhdGlvbiB7XHJcbiAgZ3JhZEVsZW06IEhUTUxFbGVtZW50O1xyXG4gIG1hcmsxOiBIVE1MRWxlbWVudDtcclxuICBtYXJrMjogSFRNTEVsZW1lbnQ7XHJcbiAgbWFyazM6IEhUTUxFbGVtZW50O1xyXG4gIG1hcms0OiBIVE1MRWxlbWVudDtcclxuXHJcbiAgY29uc3RydWN0b3IoKSB7XHJcbiAgICB0aGlzLmdyYWRFbGVtID0gY3JlYXRlRWxlbSgnc2xpZGVyX19ncmFkdWF0aW9uJyk7XHJcbiAgICB0aGlzLm1hcmsxID0gY3JlYXRlRWxlbSgnc2xpZGVyX19ncmFkdWF0aW9uLW1hcmsnKTtcclxuICAgIHRoaXMubWFyazIgPSBjcmVhdGVFbGVtKCdzbGlkZXJfX2dyYWR1YXRpb24tbWFyaycpO1xyXG4gICAgdGhpcy5tYXJrMyA9IGNyZWF0ZUVsZW0oJ3NsaWRlcl9fZ3JhZHVhdGlvbi1tYXJrJyk7XHJcbiAgICB0aGlzLm1hcms0ID0gY3JlYXRlRWxlbSgnc2xpZGVyX19ncmFkdWF0aW9uLW1hcmsnKTtcclxuICAgIHRoaXMuZ3JhZEVsZW0uYXBwZW5kQ2hpbGQodGhpcy5tYXJrMSk7XHJcbiAgICB0aGlzLmdyYWRFbGVtLmFwcGVuZENoaWxkKHRoaXMubWFyazIpO1xyXG4gICAgdGhpcy5ncmFkRWxlbS5hcHBlbmRDaGlsZCh0aGlzLm1hcmszKTtcclxuICAgIHRoaXMuZ3JhZEVsZW0uYXBwZW5kQ2hpbGQodGhpcy5tYXJrNCk7XHJcbiAgfVxyXG5cclxuICBpbml0ID0gKG1pblZhbHVlOiBudW1iZXIsIG1heFZhbHVlOiBudW1iZXIsIGlzVmVydGljYWw6IGJvb2xlYW4sIGlzRmxvYXQgPSBmYWxzZSk6IHZvaWQgPT4ge1xyXG4gICAgdGhpcy5tYXJrMS5pbm5lckhUTUwgPSBtaW5WYWx1ZSArICcnO1xyXG4gICAgdGhpcy5tYXJrNC5pbm5lckhUTUwgPSBtYXhWYWx1ZSArICcnO1xyXG5cclxuICAgIGlmIChpc0Zsb2F0KSB7XHJcbiAgICAgIHRoaXMubWFyazIuaW5uZXJIVE1MID0gKG1pblZhbHVlICsgKG1heFZhbHVlIC0gbWluVmFsdWUpLzMpLnRvRml4ZWQoMik7XHJcbiAgICAgIHRoaXMubWFyazMuaW5uZXJIVE1MID0gKG1pblZhbHVlICsgKG1heFZhbHVlIC0gbWluVmFsdWUpKjIvMykudG9GaXhlZCgyKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMubWFyazIuaW5uZXJIVE1MID0gbWluVmFsdWUgKyBNYXRoLnJvdW5kKChtYXhWYWx1ZSAtIG1pblZhbHVlKS8zKSArICcnO1xyXG4gICAgICB0aGlzLm1hcmszLmlubmVySFRNTCA9IG1pblZhbHVlICsgTWF0aC5yb3VuZCgobWF4VmFsdWUgLSBtaW5WYWx1ZSkqMi8zKSArICcnO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICghaXNWZXJ0aWNhbCkge1xyXG4gICAgICB0aGlzLm1hcmsxLnN0eWxlLm1hcmdpbkxlZnQgPSAtMTUgKyAncHgnO1xyXG4gICAgICB0aGlzLm1hcmsxLnN0eWxlLm1hcmdpblRvcCA9ICcwJztcclxuICAgICAgdGhpcy5tYXJrNC5zdHlsZS5tYXJnaW5SaWdodCA9IC0xNSArICdweCc7XHJcbiAgICAgIHRoaXMubWFyazQuc3R5bGUubWFyZ2luQm90dG9tID0gJzAnO1xyXG4gICAgICB0aGlzLmdyYWRFbGVtLmNsYXNzTGlzdC5yZW1vdmUoXCJzbGlkZXJfX2dyYWR1YXRpb25fcG9zaXRpb25fdmVydGljYWxcIik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLm1hcmsxLnN0eWxlLm1hcmdpblRvcCA9IC05ICArICdweCc7XHJcbiAgICAgIHRoaXMubWFyazEuc3R5bGUubWFyZ2luTGVmdCA9ICcwJztcclxuICAgICAgdGhpcy5tYXJrNC5zdHlsZS5tYXJnaW5Cb3R0b20gPSAtOSArICdweCc7XHJcbiAgICAgIHRoaXMubWFyazQuc3R5bGUubWFyZ2luUmlnaHQgPSAnMCc7XHJcbiAgICAgIHRoaXMuZ3JhZEVsZW0uY2xhc3NMaXN0LmFkZChcInNsaWRlcl9fZ3JhZHVhdGlvbl9wb3NpdGlvbl92ZXJ0aWNhbFwiKTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IEdyYWR1YXRpb247IiwiaW1wb3J0IGNyZWF0ZUVsZW0gZnJvbSAnLi9jcmVhdGVFbGVtJztcclxuXHJcbmNsYXNzIEJ1dHRvbiB7XHJcbiAgZWxlbTogSFRNTEVsZW1lbnQ7XHJcbiAgaXNWZXJ0aWNhbDogYm9vbGVhbjtcclxuXHJcbiAgY29uc3RydWN0b3IoaXNWZXJ0aWNhbDogYm9vbGVhbikge1xyXG4gICAgdGhpcy5lbGVtID0gY3JlYXRlRWxlbSgnc2xpZGVyX19idXR0b24nKTtcclxuICAgIHRoaXMuaXNWZXJ0aWNhbCA9IGlzVmVydGljYWw7XHJcbiAgfVxyXG5cclxuICBnZXRXaWR0aCA9ICgpOiBudW1iZXIgPT4ge1xyXG4gICAgcmV0dXJuIHRoaXMuZWxlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aDtcclxuICB9XHJcblxyXG4gIGdldFBvc2l0aW9uID0gKCk6IG51bWJlciA9PiB7XHJcbiAgICBpZiAodGhpcy5pc1ZlcnRpY2FsKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLmVsZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB0aGlzLmVsZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdDtcclxuICB9XHJcblxyXG4gIHNldFBvc2l0aW9uID0gKG9mZnNldDogbnVtYmVyKTogdm9pZCA9PiB7XHJcbiAgICBpZiAodGhpcy5pc1ZlcnRpY2FsKSB7XHJcbiAgICAgIHRoaXMuZWxlbS5zdHlsZS5sZWZ0ID0gJzUwJSc7XHJcbiAgICAgIHRoaXMuZWxlbS5zdHlsZS50b3AgPSBvZmZzZXQgKyAncHgnO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5lbGVtLnN0eWxlLnRvcCA9ICc1MCUnO1xyXG4gICAgICB0aGlzLmVsZW0uc3R5bGUubGVmdCA9IG9mZnNldCArICdweCc7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBpbml0ID0gKGlzVmVydGljYWw6IGJvb2xlYW4pOiB2b2lkID0+IHtcclxuICAgIHRoaXMuaXNWZXJ0aWNhbCA9IGlzVmVydGljYWw7XHJcblxyXG4gICAgaWYgKHRoaXMuaXNWZXJ0aWNhbCkge1xyXG4gICAgICB0aGlzLmVsZW0uY2xhc3NMaXN0LmFkZCgnc2xpZGVyX19idXR0b25fcG9zaXRpb25fdmVydGljYWwnKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuZWxlbS5jbGFzc0xpc3QucmVtb3ZlKCdzbGlkZXJfX2J1dHRvbl9wb3NpdGlvbl92ZXJ0aWNhbCcpO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgQnV0dG9uOyIsImltcG9ydCBjcmVhdGVFbGVtIGZyb20gJy4vY3JlYXRlRWxlbSc7XHJcblxyXG5jbGFzcyBMYWJlbCB7XHJcbiAgZWxlbTogSFRNTEVsZW1lbnQ7XHJcbiAgaXNWZXJ0aWNhbDogYm9vbGVhbjtcclxuXHJcbiAgY29uc3RydWN0b3IoaXNWZXJ0aWNhbDogYm9vbGVhbikge1xyXG4gICAgdGhpcy5lbGVtID0gY3JlYXRlRWxlbSgnc2xpZGVyX19idXR0b24tbGFiZWwnKTtcclxuICAgIHRoaXMuaXNWZXJ0aWNhbCA9IGlzVmVydGljYWw7XHJcbiAgfVxyXG5cclxuICBnZXRQb3NpdGlvbiA9ICgpOiBudW1iZXIgPT4ge1xyXG4gICAgaWYgKHRoaXMuaXNWZXJ0aWNhbCkge1xyXG4gICAgICByZXR1cm4gdGhpcy5lbGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcDtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gdGhpcy5lbGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQ7XHJcbiAgfVxyXG5cclxuICBzZXRQb3NpdGlvbiA9IChvZmZzZXQ6IG51bWJlciwgdmFsdWU6IG51bWJlcik6IHZvaWQgPT4ge1xyXG4gICAgdGhpcy5lbGVtLmlubmVySFRNTCA9IHZhbHVlICsgJyc7XHJcblxyXG4gICAgaWYgKHRoaXMuaXNWZXJ0aWNhbCkge1xyXG4gICAgICB0aGlzLmVsZW0uc3R5bGUubGVmdCA9ICc1MCUnO1xyXG4gICAgICB0aGlzLmVsZW0uc3R5bGUudG9wID0gb2Zmc2V0IC0gdGhpcy5nZXREaW1lbnNpb24oKS8yICsgJ3B4JztcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuZWxlbS5zdHlsZS50b3AgPSAnNTAlJztcclxuICAgICAgdGhpcy5lbGVtLnN0eWxlLmxlZnQgPSBvZmZzZXQgLSB0aGlzLmdldERpbWVuc2lvbigpLzIgKyAncHgnO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZ2V0RGltZW5zaW9uID0gKCk6IG51bWJlciA9PiB7XHJcbiAgICBpZiAodGhpcy5pc1ZlcnRpY2FsKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLmVsZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuaGVpZ2h0O1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB0aGlzLmVsZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGg7XHJcbiAgfVxyXG5cclxuICBpbml0ID0gKGlzVmVydGljYWw6IGJvb2xlYW4pOiB2b2lkID0+IHtcclxuICAgIHRoaXMuaXNWZXJ0aWNhbCA9IGlzVmVydGljYWw7XHJcblxyXG4gICAgaWYgKHRoaXMuaXNWZXJ0aWNhbCkge1xyXG4gICAgICB0aGlzLmVsZW0uY2xhc3NMaXN0LmFkZCgnc2xpZGVyX19idXR0b24tbGFiZWxfcG9zaXRpb25fdmVydGljYWwnKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuZWxlbS5jbGFzc0xpc3QucmVtb3ZlKCdzbGlkZXJfX2J1dHRvbi1sYWJlbF9wb3NpdGlvbl92ZXJ0aWNhbCcpO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgTGFiZWw7IiwiaW1wb3J0IGNyZWF0ZUVsZW0gZnJvbSAnLi9jcmVhdGVFbGVtJztcclxuXHJcbmNsYXNzIFNjYWxlRmlsbGluZyB7XHJcbiAgZWxlbTogSFRNTEVsZW1lbnQ7XHJcbiAgaXNWZXJ0aWNhbDogYm9vbGVhbjtcclxuXHJcbiAgY29uc3RydWN0b3IoaXNWZXJ0aWNhbDogYm9vbGVhbikge1xyXG4gICAgdGhpcy5lbGVtID0gY3JlYXRlRWxlbSgnc2xpZGVyX19zY2FsZS1maWxsaW5nJyk7XHJcbiAgICB0aGlzLmlzVmVydGljYWwgPSBpc1ZlcnRpY2FsO1xyXG4gIH1cclxuXHJcbiAgc2V0UG9zaXRpb24gPSAob2Zmc2V0OiBudW1iZXIpOiB2b2lkID0+IHtcclxuICAgIGlmICh0aGlzLmlzVmVydGljYWwpIHtcclxuICAgICAgdGhpcy5lbGVtLnN0eWxlLmxlZnQgPSAnMCc7XHJcbiAgICAgIHRoaXMuZWxlbS5zdHlsZS53aWR0aCA9ICcxMDAlJztcclxuICAgICAgdGhpcy5lbGVtLnN0eWxlLnRvcCA9IG9mZnNldCArICdweCc7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLmVsZW0uc3R5bGUudG9wID0gJzAnO1xyXG4gICAgICB0aGlzLmVsZW0uc3R5bGUuaGVpZ2h0ID0gJzEwMCUnO1xyXG4gICAgICB0aGlzLmVsZW0uc3R5bGUubGVmdCA9IG9mZnNldCArICdweCc7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzZXREaW1lbnNpb24gPSAoZGltZW5zaW9uOiBudW1iZXIpOiB2b2lkID0+IHtcclxuICAgIGlmICh0aGlzLmlzVmVydGljYWwpIHtcclxuICAgICAgdGhpcy5lbGVtLnN0eWxlLmhlaWdodCA9IGRpbWVuc2lvbiArICdweCc7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLmVsZW0uc3R5bGUud2lkdGggPSBkaW1lbnNpb24gKyAncHgnO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgaW5pdCA9IChpc1ZlcnRpY2FsOiBib29sZWFuKTogdm9pZCA9PiB7XHJcbiAgICB0aGlzLmlzVmVydGljYWwgPSBpc1ZlcnRpY2FsO1xyXG5cclxuICAgIGlmICh0aGlzLmlzVmVydGljYWwpIHtcclxuICAgICAgdGhpcy5lbGVtLmNsYXNzTGlzdC5hZGQoJ3NsaWRlcl9fc2NhbGUtZmlsbGluZ19wb3NpdGlvbl92ZXJ0aWNhbCcpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5lbGVtLmNsYXNzTGlzdC5yZW1vdmUoJ3NsaWRlcl9fc2NhbGUtZmlsbGluZ19wb3NpdGlvbl92ZXJ0aWNhbCcpO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgU2NhbGVGaWxsaW5nO1xyXG4iLCJpbXBvcnQgTWFrZU9ic2VydmFibGVPYmplY3QgZnJvbSBcIi4vYXNzZXRzL01ha2VPYnNlcnZhYmxlT2JqZWN0XCI7XHJcbmltcG9ydCBjcmVhdGVFbGVtIGZyb20gXCIuL2Fzc2V0cy9jcmVhdGVFbGVtXCI7XHJcbmltcG9ydCBTY2FsZSBmcm9tIFwiLi9hc3NldHMvU2NhbGVcIjtcclxuaW1wb3J0IEdyYWR1YXRpb24gZnJvbSBcIi4vYXNzZXRzL0dyYWR1YXRpb25cIjtcclxuaW1wb3J0IEJ1dHRvbiBmcm9tIFwiLi9hc3NldHMvQnV0dG9uXCI7XHJcbmltcG9ydCBMYWJlbCBmcm9tIFwiLi9hc3NldHMvTGFiZWxcIjtcclxuaW1wb3J0IFNjYWxlRmlsbGluZyBmcm9tIFwiLi9hc3NldHMvU2NhbGVGaWxsaW5nXCI7XHJcblxyXG5jbGFzcyBWaWV3IHtcclxuICBbaW5kZXg6IHN0cmluZ106IG51bWJlcnxib29sZWFufFNjYWxlfEdyYWR1YXRpb258U2NhbGVGaWxsaW5nfEJ1dHRvbnxMYWJlbHxNYWtlT2JzZXJ2YWJsZU9iamVjdHxGdW5jdGlvbjtcclxuICBzY2FsZTogU2NhbGU7XHJcbiAgZ3JhZHVhdGlvbjogR3JhZHVhdGlvbjtcclxuICBzY2FsZUZpbGxpbmc6IFNjYWxlRmlsbGluZztcclxuICBidXR0b24xOiBCdXR0b247XHJcbiAgYnV0dG9uMjogQnV0dG9uO1xyXG4gIGxhYmVsMTogTGFiZWw7XHJcbiAgbGFiZWwyOiBMYWJlbDtcclxuICBpc1JhbmdlOiBib29sZWFuO1xyXG4gIGlzVmVydGljYWw6IGJvb2xlYW47XHJcbiAgc2hvd0xhYmVsOiBib29sZWFuO1xyXG4gIG1pblZhbHVlOiBudW1iZXI7XHJcbiAgbWF4VmFsdWU6IG51bWJlcjtcclxuICBjdXJNaW5WYWx1ZTogbnVtYmVyO1xyXG4gIGN1ck1heFZhbHVlOiBudW1iZXI7XHJcbiAgc3RlcDogbnVtYmVyO1xyXG4gIGlzRmxvYXQ6IGJvb2xlYW47XHJcbiAgb2JzZXJ2ZXJzOiBNYWtlT2JzZXJ2YWJsZU9iamVjdDtcclxuXHJcbiAgY29uc3RydWN0b3IobWluVmFsdWUgPSAwLCBtYXhWYWx1ZSA9IDEwMDAsIHN0ZXAgPSAxLCBpc1JhbmdlID0gZmFsc2UsIGlzVmVydGljYWwgPSBmYWxzZSwgc2hvd0xhYmVsID0gZmFsc2UsIGlzRmxvYXQgPSBmYWxzZSkge1xyXG4gICAgdGhpcy5zY2FsZSA9IG5ldyBTY2FsZShpc1ZlcnRpY2FsKTtcclxuICAgIHRoaXMuYnV0dG9uMSA9IG5ldyBCdXR0b24oaXNWZXJ0aWNhbCk7XHJcbiAgICB0aGlzLmJ1dHRvbjIgPSBuZXcgQnV0dG9uKGlzVmVydGljYWwpO1xyXG4gICAgdGhpcy5sYWJlbDEgPSBuZXcgTGFiZWwoaXNWZXJ0aWNhbCk7XHJcbiAgICB0aGlzLmxhYmVsMiA9IG5ldyBMYWJlbChpc1ZlcnRpY2FsKTtcclxuICAgIHRoaXMuc2NhbGVGaWxsaW5nID0gbmV3IFNjYWxlRmlsbGluZyhpc1ZlcnRpY2FsKTtcclxuICAgIHRoaXMuZ3JhZHVhdGlvbiA9IG5ldyBHcmFkdWF0aW9uKCk7XHJcbiAgICB0aGlzLm1pblZhbHVlID0gbWluVmFsdWU7XHJcbiAgICB0aGlzLm1heFZhbHVlID0gbWF4VmFsdWU7XHJcbiAgICB0aGlzLmN1ck1pblZhbHVlID0gbWluVmFsdWU7XHJcbiAgICB0aGlzLmN1ck1heFZhbHVlID0gbWF4VmFsdWU7XHJcbiAgICB0aGlzLnN0ZXAgPSBzdGVwO1xyXG4gICAgdGhpcy5pc1JhbmdlID0gaXNSYW5nZTtcclxuICAgIHRoaXMuaXNWZXJ0aWNhbCA9IGlzVmVydGljYWw7XHJcbiAgICB0aGlzLnNob3dMYWJlbCA9IHNob3dMYWJlbDtcclxuICAgIHRoaXMuaXNGbG9hdCA9IGlzRmxvYXQ7XHJcbiAgICB0aGlzLm9ic2VydmVycyA9IG5ldyBNYWtlT2JzZXJ2YWJsZU9iamVjdCgpXHJcbiAgICB0aGlzLmNoZWNrVmFsdWVzKCk7XHJcbiAgfVxyXG5cclxuICBnZXRTdGFydCA9ICgpOiBudW1iZXIgPT4ge1xyXG4gICAgaWYgKHRoaXMuaXNSYW5nZSkge1xyXG4gICAgICByZXR1cm4gdGhpcy5idXR0b24xLmdldFBvc2l0aW9uKCkgLSB0aGlzLnNjYWxlLmdldFBvc2l0aW9uKCkgKyB0aGlzLmJ1dHRvbjEuZ2V0V2lkdGgoKS8yO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiAwO1xyXG4gIH1cclxuXHJcbiAgZ2V0RW5kID0gKCk6IG51bWJlciA9PiB7XHJcbiAgICByZXR1cm4gdGhpcy5idXR0b24yLmdldFBvc2l0aW9uKCkgLSB0aGlzLnNjYWxlLmdldFBvc2l0aW9uKCkgKyB0aGlzLmJ1dHRvbjIuZ2V0V2lkdGgoKS8yO1xyXG4gIH1cclxuXHJcbiAgdXBkYXRlRWxlbXMgPSAoKTogdm9pZCA9PiB7XHJcbiAgICB0aGlzLnNjYWxlRmlsbGluZy5pbml0KHRoaXMuaXNWZXJ0aWNhbCk7XHJcbiAgICB0aGlzLnNjYWxlRmlsbGluZy5zZXRQb3NpdGlvbih0aGlzLmdldFN0YXJ0KCkpO1xyXG4gICAgdGhpcy5zY2FsZUZpbGxpbmcuc2V0RGltZW5zaW9uKHRoaXMuZ2V0RW5kKCkgLSB0aGlzLmdldFN0YXJ0KCkpO1xyXG5cclxuICAgIGlmICghdGhpcy5pc1JhbmdlKSB7XHJcbiAgICAgIHRoaXMuY3VyTWluVmFsdWUgPSB0aGlzLm1pblZhbHVlO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMub2JzZXJ2ZXJzLm5vdGlmeU9ic2VydmVycygpO1xyXG4gIH1cclxuXHJcbiAgcm91bmQgPSAodmFsOiBudW1iZXIsIHN0ZXA6IG51bWJlcik6IG51bWJlciA9PiB7XHJcbiAgICBjb25zdCB3aG9sZSA9IE1hdGguZmxvb3IodmFsL3N0ZXApO1xyXG4gICAgY29uc3QgcmVtaW5kZXIgPSB2YWwgJSBzdGVwO1xyXG4gICAgaWYgKHZhbCA8IDApIHtcclxuICAgICAgcmV0dXJuIE1hdGguYWJzKHJlbWluZGVyKSA+IHN0ZXAvMiA/IHdob2xlKnN0ZXAgOiAod2hvbGUgKyAxKSpzdGVwO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiByZW1pbmRlciA8IHN0ZXAvMiA/IHdob2xlKnN0ZXAgOiAod2hvbGUgKyAxKSpzdGVwO1xyXG4gIH1cclxuXHJcbiAgcm91bmRPZmZzZXRCdXR0ID0gKGN1cnJPZmZzZXQ6IG51bWJlcik6IEFycmF5PG51bWJlcj4gPT4ge1xyXG4gICAgY29uc3QgY3VyclZhbHVlID0gdGhpcy5taW5WYWx1ZSArIChjdXJyT2Zmc2V0ICsgdGhpcy5idXR0b24yLmdldFdpZHRoKCkvMikqKHRoaXMubWF4VmFsdWUgLSB0aGlzLm1pblZhbHVlKS90aGlzLnNjYWxlLmdldERpbWVuc2lvbigpO1xyXG4gICAgbGV0IHJvdW5kVmFsdWUgPSB0aGlzLnJvdW5kKGN1cnJWYWx1ZSwgdGhpcy5zdGVwKTtcclxuXHJcbiAgICBpZiAodGhpcy5pc0Zsb2F0KSB7XHJcbiAgICAgIHJvdW5kVmFsdWUgPSBwYXJzZUZsb2F0KHJvdW5kVmFsdWUudG9GaXhlZCgyKSk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHJvdW5kVmFsdWUgPCB0aGlzLm1pblZhbHVlKSB7XHJcbiAgICAgIHJvdW5kVmFsdWUgPSB0aGlzLm1pblZhbHVlO1xyXG4gICAgfSBlbHNlIGlmIChyb3VuZFZhbHVlID4gdGhpcy5tYXhWYWx1ZSkge1xyXG4gICAgICByb3VuZFZhbHVlID0gdGhpcy5tYXhWYWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCByb3VuZE9mZnNldCA9IHRoaXMub2Zmc2V0VmFsdWVDb252KHJvdW5kVmFsdWUpO1xyXG4gICAgcmV0dXJuIFtyb3VuZE9mZnNldCwgcm91bmRWYWx1ZV07XHJcbiAgfVxyXG5cclxuICBvZmZzZXRWYWx1ZUNvbnYgPSAodmFsdWU6IG51bWJlcik6IG51bWJlciA9PiB7XHJcbiAgICByZXR1cm4gKCh2YWx1ZSAtIHRoaXMubWluVmFsdWUpLyh0aGlzLm1heFZhbHVlIC0gdGhpcy5taW5WYWx1ZSkqdGhpcy5zY2FsZS5nZXREaW1lbnNpb24oKSAtIHRoaXMuYnV0dG9uMi5nZXRXaWR0aCgpLzIpO1xyXG4gIH1cclxuXHJcbiAgLy9CdXR0b24xICBIYW5kbGVycy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICBidXR0MU1vdmUgPSAocm91bmRPZmZzZXQ6IG51bWJlciwgcm91bmRWYWx1ZTogbnVtYmVyKTogdm9pZCA9PiB7XHJcbiAgICB0aGlzLmJ1dHRvbjEuc2V0UG9zaXRpb24ocm91bmRPZmZzZXQpO1xyXG4gICAgdGhpcy5sYWJlbDEuc2V0UG9zaXRpb24ocm91bmRPZmZzZXQgKyB0aGlzLmJ1dHRvbjEuZ2V0V2lkdGgoKS8yLCByb3VuZFZhbHVlKTtcclxuXHJcbiAgICBpZiAocm91bmRWYWx1ZSA8IHRoaXMubWluVmFsdWUpIHtcclxuICAgICAgcm91bmRWYWx1ZSA9IHRoaXMubWluVmFsdWU7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5jdXJNaW5WYWx1ZSA9IHJvdW5kVmFsdWU7XHJcbiAgICB0aGlzLnVwZGF0ZUVsZW1zKCk7XHJcbiAgfVxyXG5cclxuICBidXR0MU9mZnNldENoZWNrID0gKG5ld09mZnNldDogbnVtYmVyKTogQXJyYXk8bnVtYmVyPiA9PiB7XHJcbiAgICBsZXQgcm91bmRWYWx1ZTtcclxuXHJcbiAgICBpZiAobmV3T2Zmc2V0IDwgLXRoaXMuYnV0dG9uMS5nZXRXaWR0aCgpLzIpIHtcclxuICAgICAgbmV3T2Zmc2V0ID0gLXRoaXMuYnV0dG9uMS5nZXRXaWR0aCgpLzI7XHJcbiAgICAgIHJvdW5kVmFsdWUgPSB0aGlzLm1pblZhbHVlO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHN0ZXBXaWR0aCA9IHRoaXMuc3RlcCp0aGlzLnNjYWxlLmdldERpbWVuc2lvbigpLyh0aGlzLm1heFZhbHVlIC0gdGhpcy5taW5WYWx1ZSk7XHJcbiAgICBjb25zdCBtaW5PZmZzZXQgPSBzdGVwV2lkdGgvMS41ID4gdGhpcy5idXR0b24xLmdldFdpZHRoKCkgPyBzdGVwV2lkdGgvMS41IDogdGhpcy5idXR0b24xLmdldFdpZHRoKCk7XHJcblxyXG4gICAgaWYgKG5ld09mZnNldCA+IHRoaXMuYnV0dG9uMi5nZXRQb3NpdGlvbigpIC0gdGhpcy5zY2FsZS5nZXRQb3NpdGlvbigpIC0gbWluT2Zmc2V0KSB7XHJcbiAgICAgIG5ld09mZnNldCA9IHRoaXMuYnV0dG9uMi5nZXRQb3NpdGlvbigpIC0gdGhpcy5zY2FsZS5nZXRQb3NpdGlvbigpIC0gbWluT2Zmc2V0O1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBbbmV3T2Zmc2V0LCByb3VuZFZhbHVlXTtcclxuICB9XHJcblxyXG4gIG9uTW91c2VNb3ZlMSA9IChldmVudE1tOiBNb3VzZUV2ZW50KTogdm9pZCA9PiB7XHJcbiAgICBsZXQgcm91bmRWYWx1ZTtcclxuICAgIGxldCByb3VuZE9mZnNldDtcclxuICAgIGNvbnN0IGNvb3JkaW5hdGUgPSB0aGlzLmlzVmVydGljYWwgPyBldmVudE1tLmNsaWVudFkgOiBldmVudE1tLmNsaWVudFg7XHJcbiAgICBjb25zdCBuZXdPZmZzZXQgPSBjb29yZGluYXRlIC0gdGhpcy5zY2FsZS5nZXRQb3NpdGlvbigpIC0gdGhpcy5idXR0b24yLmdldFdpZHRoKCkvMjtcclxuXHJcbiAgICBbcm91bmRPZmZzZXQsIHJvdW5kVmFsdWVdID0gdGhpcy5idXR0MU9mZnNldENoZWNrKG5ld09mZnNldCk7XHJcblxyXG4gICAgaWYgKCFyb3VuZFZhbHVlKSB7XHJcbiAgICAgICAgW3JvdW5kT2Zmc2V0LCByb3VuZFZhbHVlXSA9IHRoaXMucm91bmRPZmZzZXRCdXR0KHJvdW5kT2Zmc2V0KTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmJ1dHQxTW92ZShyb3VuZE9mZnNldCwgcm91bmRWYWx1ZSk7XHJcbiAgfVxyXG5cclxuICBvbk1vdXNlVXAxID0gKGV2ZW50TXU6IE1vdXNlRXZlbnQpOiB2b2lkID0+IHtcclxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsIHRoaXMub25Nb3VzZVVwMSk7XHJcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsIHRoaXMub25Nb3VzZU1vdmUxKTtcclxuICB9XHJcblxyXG4gIC8vQnV0dG9uMiAgSGFuZGxlcnMtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgYnV0dDJNb3ZlID0gKHJvdW5kT2Zmc2V0OiBudW1iZXIsIHJvdW5kVmFsdWU6IG51bWJlcik6IHZvaWQgPT4ge1xyXG4gICAgdGhpcy5idXR0b24yLnNldFBvc2l0aW9uKHJvdW5kT2Zmc2V0KTtcclxuICAgIHRoaXMubGFiZWwyLnNldFBvc2l0aW9uKHJvdW5kT2Zmc2V0ICsgdGhpcy5idXR0b24yLmdldFdpZHRoKCkvMiwgcm91bmRWYWx1ZSk7XHJcblxyXG4gICAgaWYgKHJvdW5kVmFsdWUgPCB0aGlzLm1pblZhbHVlKSB7XHJcbiAgICAgIHJvdW5kVmFsdWUgPSB0aGlzLm1pblZhbHVlO1xyXG4gICAgfSBlbHNlIGlmIChyb3VuZFZhbHVlID4gdGhpcy5tYXhWYWx1ZSkge1xyXG4gICAgICByb3VuZFZhbHVlID0gdGhpcy5tYXhWYWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmN1ck1heFZhbHVlID0gcm91bmRWYWx1ZTtcclxuICAgIHRoaXMudXBkYXRlRWxlbXMoKTtcclxuICB9XHJcblxyXG4gIGJ1dHQyT2Zmc2V0Q2hlY2sgPSAobmV3T2Zmc2V0OiBudW1iZXIpOiBBcnJheTxudW1iZXI+ID0+IHtcclxuICAgIGxldCByb3VuZFZhbHVlO1xyXG5cclxuICAgIGlmICghdGhpcy5pc1JhbmdlKSB7XHJcbiAgICAgIGlmIChuZXdPZmZzZXQgPCAtdGhpcy5idXR0b24yLmdldFdpZHRoKCkvMikge1xyXG4gICAgICAgIG5ld09mZnNldCA9IC10aGlzLmJ1dHRvbjIuZ2V0V2lkdGgoKS8yO1xyXG4gICAgICAgIHJvdW5kVmFsdWUgPSB0aGlzLm1pblZhbHVlO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKG5ld09mZnNldCA+IHRoaXMuc2NhbGUuZ2V0RGltZW5zaW9uKCkgLSB0aGlzLmJ1dHRvbjIuZ2V0V2lkdGgoKS8yKSB7XHJcbiAgICAgIG5ld09mZnNldCA9IHRoaXMuc2NhbGUuZ2V0RGltZW5zaW9uKCkgLSB0aGlzLmJ1dHRvbjIuZ2V0V2lkdGgoKS8yO1xyXG4gICAgICByb3VuZFZhbHVlID0gdGhpcy5tYXhWYWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBzdGVwV2lkdGggPSB0aGlzLnN0ZXAqdGhpcy5zY2FsZS5nZXREaW1lbnNpb24oKS8odGhpcy5tYXhWYWx1ZSAtIHRoaXMubWluVmFsdWUpO1xyXG4gICAgY29uc3QgbWluT2Zmc2V0ID0gc3RlcFdpZHRoLzEuNSA+IHRoaXMuYnV0dG9uMS5nZXRXaWR0aCgpID8gc3RlcFdpZHRoLzEuNSA6IHRoaXMuYnV0dG9uMS5nZXRXaWR0aCgpO1xyXG5cclxuICAgIGlmIChuZXdPZmZzZXQgPCB0aGlzLmJ1dHRvbjEuZ2V0UG9zaXRpb24oKSAtIHRoaXMuc2NhbGUuZ2V0UG9zaXRpb24oKSArIG1pbk9mZnNldCkge1xyXG4gICAgICBuZXdPZmZzZXQgPSB0aGlzLmJ1dHRvbjEuZ2V0UG9zaXRpb24oKSAtIHRoaXMuc2NhbGUuZ2V0UG9zaXRpb24oKSArIG1pbk9mZnNldDtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gW25ld09mZnNldCwgcm91bmRWYWx1ZV07XHJcbiAgfVxyXG5cclxuICBvbk1vdXNlTW92ZTIgPSAoZXZlbnRNbTogTW91c2VFdmVudCk6IHZvaWQgPT4ge1xyXG4gICAgbGV0IHJvdW5kVmFsdWU7XHJcbiAgICBsZXQgcm91bmRPZmZzZXQ7XHJcbiAgICBjb25zdCBjb29yZGluYXRlID0gdGhpcy5pc1ZlcnRpY2FsID8gZXZlbnRNbS5jbGllbnRZIDogZXZlbnRNbS5jbGllbnRYO1xyXG4gICAgY29uc3QgbmV3T2Zmc2V0ID0gY29vcmRpbmF0ZSAtIHRoaXMuc2NhbGUuZ2V0UG9zaXRpb24oKSAtIHRoaXMuYnV0dG9uMi5nZXRXaWR0aCgpLzI7XHJcblxyXG4gICAgW3JvdW5kT2Zmc2V0LCByb3VuZFZhbHVlXSA9IHRoaXMuYnV0dDJPZmZzZXRDaGVjayhuZXdPZmZzZXQpO1xyXG5cclxuICAgIGlmICghcm91bmRWYWx1ZSkge1xyXG4gICAgICBbcm91bmRPZmZzZXQsIHJvdW5kVmFsdWVdID0gdGhpcy5yb3VuZE9mZnNldEJ1dHQocm91bmRPZmZzZXQpO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuYnV0dDJNb3ZlKHJvdW5kT2Zmc2V0LCByb3VuZFZhbHVlKTtcclxuICB9XHJcblxyXG4gIG9uTW91c2VVcDIgPSAoZXZlbnRNdTogTW91c2VFdmVudCk6IHZvaWQgPT4ge1xyXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIHRoaXMub25Nb3VzZVVwMik7XHJcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCB0aGlzLm9uTW91c2VNb3ZlMik7XHJcbiAgfVxyXG5cclxuICBidXR0MUNsb3NlckNoZWNrID0gKGNvb3JkaW5hdGU6IG51bWJlcik6IGJvb2xlYW4gPT4ge1xyXG4gICAgcmV0dXJuIE1hdGguYWJzKGNvb3JkaW5hdGUgLSB0aGlzLmJ1dHRvbjEuZ2V0UG9zaXRpb24oKSkgPCBNYXRoLmFicyhjb29yZGluYXRlIC0gdGhpcy5idXR0b24yLmdldFBvc2l0aW9uKCkpO1xyXG4gIH1cclxuXHJcbiAgLy8gU2NhbGUgRXZlbnRMaXN0ZW5lcnMtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICBzY2FsZU9uY2xpY2sgPSAoZXZlbnQ6IE1vdXNlRXZlbnQpOiB2b2lkID0+IHtcclxuICAgIGlmKHRoaXMuaXNSYW5nZSkge1xyXG4gICAgICBjb25zdCBjb29yZGluYXRlID0gdGhpcy5pc1ZlcnRpY2FsID8gZXZlbnQuY2xpZW50WSA6IGV2ZW50LmNsaWVudFhcclxuXHJcbiAgICAgIGlmICh0aGlzLmJ1dHQxQ2xvc2VyQ2hlY2soY29vcmRpbmF0ZSkpIHtcclxuICAgICAgICB0aGlzLm9uTW91c2VNb3ZlMShldmVudCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy5vbk1vdXNlTW92ZTIoZXZlbnQpO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLm9uTW91c2VNb3ZlMihldmVudCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBHcmFkdWF0aW9uIEV2ZW50TGlzdGVuZXJzLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gIGludGVyTWFya0hhbmRsZXIgPSAoY3VyclZhbHVlOiBudW1iZXIpOiB2b2lkID0+IHtcclxuICAgIGxldCByb3VuZE9mZnNldDtcclxuICAgIGxldCByb3VuZFZhbHVlO1xyXG5cclxuICAgIGNvbnN0IG1hcmtPZmZzZXQgPSAoY3VyclZhbHVlIC0gdGhpcy5taW5WYWx1ZSkvKHRoaXMubWF4VmFsdWUgLSB0aGlzLm1pblZhbHVlKSp0aGlzLnNjYWxlLmdldERpbWVuc2lvbigpO1xyXG4gICAgW3JvdW5kT2Zmc2V0LCByb3VuZFZhbHVlXSA9IHRoaXMucm91bmRPZmZzZXRCdXR0KG1hcmtPZmZzZXQgLSB0aGlzLmJ1dHRvbjIuZ2V0V2lkdGgoKS8yKTtcclxuXHJcbiAgICBpZih0aGlzLmlzUmFuZ2UpIHtcclxuICAgICAgY29uc3QgY29vcmRpbmF0ZSA9IG1hcmtPZmZzZXQgKyB0aGlzLnNjYWxlLmdldFBvc2l0aW9uKCk7XHJcblxyXG4gICAgICBpZiAodGhpcy5idXR0MUNsb3NlckNoZWNrKGNvb3JkaW5hdGUpKSB7XHJcbiAgICAgICAgdGhpcy5idXR0MU1vdmUocm91bmRPZmZzZXQsIHJvdW5kVmFsdWUpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMuYnV0dDJNb3ZlKHJvdW5kT2Zmc2V0LCByb3VuZFZhbHVlKTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5idXR0Mk1vdmUocm91bmRPZmZzZXQsIHJvdW5kVmFsdWUpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgbWFyazFPbmNsaWNrID0gKGV2ZW50OiBNb3VzZUV2ZW50KTogdm9pZCA9PiB7XHJcbiAgICBjb25zdCByb3VuZE9mZnNldCA9IC10aGlzLmJ1dHRvbjIuZ2V0V2lkdGgoKS8yO1xyXG4gICAgY29uc3Qgcm91bmRWYWx1ZSA9IHRoaXMubWluVmFsdWU7XHJcblxyXG4gICAgaWYgKCF0aGlzLmlzUmFuZ2UpIHtcclxuICAgICAgdGhpcy5idXR0Mk1vdmUocm91bmRPZmZzZXQsIHJvdW5kVmFsdWUpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5idXR0MU1vdmUocm91bmRPZmZzZXQsIHJvdW5kVmFsdWUpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgbWFyazRPbmNsaWNrID0gKGV2ZW50OiBNb3VzZUV2ZW50KTogdm9pZCA9PiB7XHJcbiAgICBjb25zdCByb3VuZE9mZnNldCA9IHRoaXMuc2NhbGUuZ2V0RGltZW5zaW9uKCkgLSB0aGlzLmJ1dHRvbjIuZ2V0V2lkdGgoKS8yO1xyXG4gICAgdGhpcy5idXR0Mk1vdmUocm91bmRPZmZzZXQsIHRoaXMubWF4VmFsdWUpO1xyXG4gIH1cclxuXHJcbiAgbWFyazJPbmNsaWNrID0gKGV2ZW50OiBNb3VzZUV2ZW50KTogdm9pZCA9PiB7XHJcbiAgICBjb25zdCB2YWwgPSB0aGlzLmlzRmxvYXQgPyBwYXJzZUZsb2F0KHRoaXMuZ3JhZHVhdGlvbi5tYXJrMi5pbm5lckhUTUwpIDogcGFyc2VJbnQodGhpcy5ncmFkdWF0aW9uLm1hcmsyLmlubmVySFRNTCk7XHJcbiAgICB0aGlzLmludGVyTWFya0hhbmRsZXIodmFsKTtcclxuICB9XHJcblxyXG4gIG1hcmszT25jbGljayA9IChldmVudDogTW91c2VFdmVudCk6IHZvaWQgPT4ge1xyXG4gICAgY29uc3QgdmFsID0gdGhpcy5pc0Zsb2F0ID8gcGFyc2VGbG9hdCh0aGlzLmdyYWR1YXRpb24ubWFyazMuaW5uZXJIVE1MKSA6IHBhcnNlSW50KHRoaXMuZ3JhZHVhdGlvbi5tYXJrMy5pbm5lckhUTUwpO1xyXG4gICAgdGhpcy5pbnRlck1hcmtIYW5kbGVyKHZhbCk7XHJcbiAgfVxyXG5cclxuICBjaGVja1ZhbHVlcyA9ICgpOiB2b2lkID0+IHtcclxuICAgIGlmICh0eXBlb2YgdGhpcy5tYXhWYWx1ZSAhPT0gXCJudW1iZXJcIikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKFwiTWF4dmFsdWUgc2hvdWxkIGJlIGEgbnVtYmVyXCIpO1xyXG4gICAgfVxyXG4gICAgaWYgKHR5cGVvZiB0aGlzLm1pblZhbHVlICE9PSBcIm51bWJlclwiKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJNYXh2YWx1ZSBzaG91bGQgYmUgYSBudW1iZXJcIik7XHJcbiAgICB9XHJcbiAgICBpZiAodHlwZW9mIHRoaXMuc3RlcCAhPT0gXCJudW1iZXJcIikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKFwiU3RlcCBzaG91bGQgYmUgYSBudW1iZXJcIik7XHJcbiAgICB9XHJcbiAgICBpZiAodHlwZW9mIHRoaXMuaXNSYW5nZSAhPT0gXCJib29sZWFuXCIpIHtcclxuICAgICAgY29uc29sZS5lcnJvcihcImlzUmFuZ2Ugc2hvdWxkIGJlIGEgYm9vbGVhblwiKTtcclxuICAgIH1cclxuICAgIGlmICh0eXBlb2YgdGhpcy5pc1ZlcnRpY2FsICE9PSBcImJvb2xlYW5cIikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKFwiaXNWZXJ0aWNhbCBzaG91bGQgYmUgYSBib29sZWFuXCIpO1xyXG4gICAgfVxyXG4gICAgaWYgKHR5cGVvZiB0aGlzLnNob3dMYWJlbCAhPT0gXCJib29sZWFuXCIpIHtcclxuICAgICAgY29uc29sZS5lcnJvcihcIlNob3dMYWJlbCBzaG91bGQgYmUgYSBib29sZWFuXCIpO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMuc3RlcCA+IHRoaXMubWF4VmFsdWUgLSB0aGlzLm1pblZhbHVlKSB7XHJcbiAgICAgIHRoaXMuc3RlcCA9IHRoaXMubWF4VmFsdWUgLSB0aGlzLm1pblZhbHVlO1xyXG4gICAgICBjb25zb2xlLmVycm9yKFwiU3RlcCBpcyBzZXR0ZWQgdG8gdGhlIG1heFwiKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGluaXQgPSAoKTogdm9pZCA9PiB7XHJcbiAgICB0aGlzLnNjYWxlLmluaXQodGhpcy5pc1ZlcnRpY2FsKTtcclxuICAgIHRoaXMuc2NhbGVGaWxsaW5nLmluaXQodGhpcy5pc1ZlcnRpY2FsKTtcclxuICAgIHRoaXMuZ3JhZHVhdGlvbi5pbml0KHRoaXMubWluVmFsdWUsIHRoaXMubWF4VmFsdWUsIHRoaXMuaXNWZXJ0aWNhbCwgdGhpcy5pc0Zsb2F0KTtcclxuICAgIHRoaXMuYnV0dG9uMS5pbml0KHRoaXMuaXNWZXJ0aWNhbCk7XHJcbiAgICB0aGlzLmJ1dHRvbjIuaW5pdCh0aGlzLmlzVmVydGljYWwpO1xyXG4gICAgdGhpcy5sYWJlbDEuaW5pdCh0aGlzLmlzVmVydGljYWwpO1xyXG4gICAgdGhpcy5sYWJlbDIuaW5pdCh0aGlzLmlzVmVydGljYWwpO1xyXG5cclxuICAgIHRoaXMuYnV0dG9uMS5lbGVtLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuICAgIHRoaXMubGFiZWwxLmVsZW0uc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG4gICAgdGhpcy5jaGVja1ZhbHVlcygpO1xyXG5cclxuICAgIGlmICh0aGlzLnNob3dMYWJlbCkge1xyXG4gICAgICB0aGlzLmxhYmVsMS5lbGVtLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XHJcbiAgICAgIHRoaXMubGFiZWwyLmVsZW0uc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMubGFiZWwxLmVsZW0uc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG4gICAgICB0aGlzLmxhYmVsMi5lbGVtLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuICAgIH1cclxuXHJcbiAgICBpZiAodGhpcy5pc1JhbmdlKSB7XHJcbiAgICAgIHRoaXMuYnV0dG9uMS5lbGVtLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLmJ1dHRvbjEuZWxlbS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgICAgIHRoaXMubGFiZWwxLmVsZW0uc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuYnV0dG9uMS5zZXRQb3NpdGlvbigtdGhpcy5idXR0b24xLmdldFdpZHRoKCkvMik7XHJcbiAgICB0aGlzLmJ1dHRvbjIuc2V0UG9zaXRpb24odGhpcy5zY2FsZS5nZXREaW1lbnNpb24oKSAtIHRoaXMuYnV0dG9uMi5nZXRXaWR0aCgpLzIpO1xyXG4gICAgdGhpcy5sYWJlbDEuc2V0UG9zaXRpb24odGhpcy5nZXRTdGFydCgpLCB0aGlzLm1pblZhbHVlKTtcclxuICAgIHRoaXMubGFiZWwyLnNldFBvc2l0aW9uKHRoaXMuZ2V0RW5kKCksIHRoaXMubWF4VmFsdWUpO1xyXG5cclxuICAgIGlmICh0aGlzLmlzVmVydGljYWwpIHtcclxuICAgICAgdGhpcy5ncmFkdWF0aW9uLmdyYWRFbGVtLnN0eWxlLmhlaWdodCA9IHRoaXMuc2NhbGUuZ2V0RGltZW5zaW9uKCkgK1wicHhcIjtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuZ3JhZHVhdGlvbi5ncmFkRWxlbS5zdHlsZS5oZWlnaHQgPSAyMCArXCJweFwiO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMudXBkYXRlRWxlbXMoKTtcclxuICB9XHJcblxyXG4gIGFwcGVuZCA9IChlbnRyeTogSFRNTEVsZW1lbnQpOiB2b2lkID0+IHtcclxuICAgIGVudHJ5LmFwcGVuZENoaWxkKHRoaXMuc2NhbGUuZWxlbSkuYXBwZW5kQ2hpbGQodGhpcy5zY2FsZUZpbGxpbmcuZWxlbSk7XHJcbiAgICBlbnRyeS5hcHBlbmRDaGlsZCh0aGlzLmJ1dHRvbjEuZWxlbSk7XHJcbiAgICBlbnRyeS5hcHBlbmRDaGlsZCh0aGlzLmxhYmVsMS5lbGVtKTtcclxuICAgIGVudHJ5LmFwcGVuZENoaWxkKHRoaXMuZ3JhZHVhdGlvbi5ncmFkRWxlbSk7XHJcbiAgICBlbnRyeS5hcHBlbmRDaGlsZCh0aGlzLmJ1dHRvbjIuZWxlbSk7XHJcbiAgICBlbnRyeS5hcHBlbmRDaGlsZCh0aGlzLmxhYmVsMi5lbGVtKTtcclxuXHJcbiAgICB0aGlzLnNjYWxlLmVsZW0ub25jbGljayA9IHRoaXMuc2NhbGVPbmNsaWNrO1xyXG4gICAgdGhpcy5ncmFkdWF0aW9uLm1hcmsxLm9uY2xpY2sgPSB0aGlzLm1hcmsxT25jbGljaztcclxuICAgIHRoaXMuZ3JhZHVhdGlvbi5tYXJrMi5vbmNsaWNrID0gdGhpcy5tYXJrMk9uY2xpY2s7XHJcbiAgICB0aGlzLmdyYWR1YXRpb24ubWFyazMub25jbGljayA9IHRoaXMubWFyazNPbmNsaWNrO1xyXG4gICAgdGhpcy5ncmFkdWF0aW9uLm1hcms0Lm9uY2xpY2sgPSB0aGlzLm1hcms0T25jbGljaztcclxuXHJcbiAgICB0aGlzLmJ1dHRvbjEuZWxlbS5vbm1vdXNlZG93biA9IChldmVudE1kOiBNb3VzZUV2ZW50KSA9PiB7XHJcbiAgICAgIGV2ZW50TWQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLCB0aGlzLm9uTW91c2VNb3ZlMSk7XHJcbiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsIHRoaXMub25Nb3VzZVVwMSk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5idXR0b24yLmVsZW0ub25tb3VzZWRvd24gPSAoZXZlbnRNZDogTW91c2VFdmVudCkgPT4ge1xyXG4gICAgICBldmVudE1kLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgdGhpcy5vbk1vdXNlTW92ZTIpO1xyXG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2V1cFwiLCB0aGlzLm9uTW91c2VVcDIpO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IHtjcmVhdGVFbGVtLCBTY2FsZSwgTGFiZWwsIEJ1dHRvbiwgU2NhbGVGaWxsaW5nLCBWaWV3LCBHcmFkdWF0aW9ufTtcclxuIiwiaW1wb3J0IE1ha2VPYnNlcnZhYmxlT2JqZWN0IGZyb20gXCIuL2Fzc2V0cy9NYWtlT2JzZXJ2YWJsZU9iamVjdFwiO1xyXG5cclxuY2xhc3MgTW9kZWwge1xyXG4gIGN1ck1pblZhbHVlOiBudW1iZXI7XHJcbiAgY3VyTWF4VmFsdWU6IG51bWJlcjtcclxuICBvYnNlcnZlcnM6IE1ha2VPYnNlcnZhYmxlT2JqZWN0O1xyXG5cclxuICBjb25zdHJ1Y3RvcihjdXJNaW5WYWx1ZSA9IDAsIGN1ck1heFZhbHVlID0gMTAwMCkge1xyXG4gICAgdGhpcy5jdXJNaW5WYWx1ZSA9IGN1ck1pblZhbHVlO1xyXG4gICAgdGhpcy5jdXJNYXhWYWx1ZSA9IGN1ck1heFZhbHVlO1xyXG4gICAgdGhpcy5vYnNlcnZlcnMgPSBuZXcgTWFrZU9ic2VydmFibGVPYmplY3QoKTtcclxuICB9XHJcblxyXG4gIHNldEN1ck1pblZhbHVlKGRhdGE6IG51bWJlcik6IHZvaWQge1xyXG4gICAgaWYgKHRoaXMuY3VyTWluVmFsdWUgIT0gZGF0YSkge1xyXG4gICAgICB0aGlzLmN1ck1pblZhbHVlID0gZGF0YTtcclxuICAgICAgdGhpcy5vYnNlcnZlcnMubm90aWZ5T2JzZXJ2ZXJzKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzZXRDdXJNYXhWYWx1ZShkYXRhOiBudW1iZXIpOiB2b2lkIHtcclxuICAgIGlmICh0aGlzLmN1ck1heFZhbHVlICE9IGRhdGEpIHtcclxuICAgICAgdGhpcy5jdXJNYXhWYWx1ZSA9IGRhdGE7XHJcbiAgICAgIHRoaXMub2JzZXJ2ZXJzLm5vdGlmeU9ic2VydmVycygpO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgTW9kZWw7IiwiaW1wb3J0IHsgVmlldyB9IGZyb20gXCIuL3ZpZXdcIjtcclxuaW1wb3J0IE1vZGVsIGZyb20gXCIuL21vZGVsXCI7XHJcbmltcG9ydCBNYWtlT2JzZXJ2YWJsZU9iamVjdCBmcm9tIFwiLi9hc3NldHMvTWFrZU9ic2VydmFibGVPYmplY3RcIjtcclxuXHJcbmludGVyZmFjZSBjb25maWdUeXBlIHtcclxuICBbaW5kZXg6IHN0cmluZ106IG51bWJlciB8IGJvb2xlYW47XHJcbn1cclxuXHJcbmNsYXNzIENvbnRyb2xsZXIge1xyXG4gIHZpZXc6IFZpZXc7XHJcbiAgbW9kZWw6IE1vZGVsO1xyXG4gIG9ic2VydmVyczogTWFrZU9ic2VydmFibGVPYmplY3Q7XHJcbiAgY29uc3RydWN0b3IobWluVmFsdWUgPSAwLCBtYXhWYWx1ZSA9IDEwMDAsIHN0ZXAgPSAxLCBpc1JhbmdlID0gZmFsc2UsIGlzVmVydGljYWwgPSBmYWxzZSwgc2hvd0xhYmVsID0gZmFsc2UsIGlzRmxvYXQgPSBmYWxzZSkge1xyXG4gICAgdGhpcy52aWV3ID0gbmV3IFZpZXcobWluVmFsdWUsIG1heFZhbHVlLCBzdGVwLCBpc1JhbmdlLCBpc1ZlcnRpY2FsLCBzaG93TGFiZWwsIGlzRmxvYXQpO1xyXG4gICAgdGhpcy5tb2RlbCA9IG5ldyBNb2RlbChtaW5WYWx1ZSwgbWF4VmFsdWUpO1xyXG4gICAgdGhpcy5vYnNlcnZlcnMgPSBuZXcgTWFrZU9ic2VydmFibGVPYmplY3QoKTtcclxuXHJcbiAgICB0aGlzLnZpZXcub2JzZXJ2ZXJzLmFkZE9ic2VydmVyKCgpID0+IHtcclxuICAgICAgdGhpcy5tb2RlbC5jdXJNaW5WYWx1ZSA9IHRoaXMudmlldy5jdXJNaW5WYWx1ZTtcclxuICAgICAgdGhpcy5tb2RlbC5jdXJNYXhWYWx1ZSA9IHRoaXMudmlldy5jdXJNYXhWYWx1ZTtcclxuICAgICAgdGhpcy5vYnNlcnZlcnMubm90aWZ5T2JzZXJ2ZXJzKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLm1vZGVsLm9ic2VydmVycy5hZGRPYnNlcnZlcigoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGN1ck1pblZhbHVlID0gdGhpcy5tb2RlbC5jdXJNaW5WYWx1ZTtcclxuICAgICAgY29uc3QgY3VyTWF4VmFsdWUgPSB0aGlzLm1vZGVsLmN1ck1heFZhbHVlO1xyXG4gICAgICB0aGlzLnZpZXcuYnV0dDFNb3ZlKHRoaXMudmlldy5vZmZzZXRWYWx1ZUNvbnYoY3VyTWluVmFsdWUpLCBjdXJNaW5WYWx1ZSk7XHJcbiAgICAgIHRoaXMudmlldy5idXR0Mk1vdmUodGhpcy52aWV3Lm9mZnNldFZhbHVlQ29udihjdXJNYXhWYWx1ZSksIGN1ck1heFZhbHVlKTtcclxuICAgICAgdGhpcy5vYnNlcnZlcnMubm90aWZ5T2JzZXJ2ZXJzKCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGFwcGVuZCA9IChlbnRyeTogSlF1ZXJ5KTogdm9pZCA9PiB7XHJcbiAgICB0aGlzLnZpZXcuYXBwZW5kKGVudHJ5LmdldCgwKSk7XHJcbiAgICB0aGlzLnZpZXcuaW5pdCgpO1xyXG4gIH1cclxuXHJcbiAgdXBkYXRlID0gKGFyZ3M6IGNvbmZpZ1R5cGUpOiB2b2lkID0+IHtcclxuICAgIE9iamVjdC5rZXlzKGFyZ3MpLm1hcCgoaXRlbSkgID0+IHtcclxuICAgICAgaWYgKHRoaXMudmlld1tpdGVtXSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgdGhpcy52aWV3W2l0ZW1dID0gYXJnc1tpdGVtXTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy52aWV3LmluaXQoKTtcclxuICAgIHRoaXMudmlldy5idXR0MU1vdmUodGhpcy52aWV3LmJ1dHQxT2Zmc2V0Q2hlY2sodGhpcy52aWV3Lm9mZnNldFZhbHVlQ29udih0aGlzLm1vZGVsLmN1ck1pblZhbHVlKSlbMF0sIHRoaXMubW9kZWwuY3VyTWluVmFsdWUpO1xyXG4gICAgdGhpcy52aWV3LmJ1dHQyTW92ZSh0aGlzLnZpZXcuYnV0dDJPZmZzZXRDaGVjayh0aGlzLnZpZXcub2Zmc2V0VmFsdWVDb252KHRoaXMubW9kZWwuY3VyTWF4VmFsdWUpKVswXSwgdGhpcy5tb2RlbC5jdXJNYXhWYWx1ZSk7XHJcbiAgfVxyXG5cclxuICBnZXRWYWx1ZXMgPSAoKTogQXJyYXk8bnVtYmVyPiA9PiB7XHJcbiAgICByZXR1cm4gW3RoaXMubW9kZWwuY3VyTWluVmFsdWUsIHRoaXMubW9kZWwuY3VyTWF4VmFsdWVdO1xyXG4gIH1cclxuXHJcbiAgc2V0VmFsdWVzID0gKGN1ck1pblZhbHVlOiBudW1iZXIsIGN1ck1heFZhbHVlOiBudW1iZXIpOiB2b2lkID0+IHtcclxuICAgIGlmIChjdXJNaW5WYWx1ZSkge1xyXG4gICAgICB0aGlzLm1vZGVsLnNldEN1ck1pblZhbHVlKGN1ck1pblZhbHVlKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoY3VyTWF4VmFsdWUpIHtcclxuICAgICAgdGhpcy5tb2RlbC5zZXRDdXJNYXhWYWx1ZShjdXJNYXhWYWx1ZSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBnZXRDb25maWcgPSAoKTogY29uZmlnVHlwZSA9PiB7XHJcbiAgICByZXR1cm4ge21pblZhbHVlOiB0aGlzLnZpZXcubWluVmFsdWUsIG1heFZhbHVlOiB0aGlzLnZpZXcubWF4VmFsdWUsIHN0ZXA6IHRoaXMudmlldy5zdGVwLFxyXG4gICAgICBpc1JhbmdlOiB0aGlzLnZpZXcuaXNSYW5nZSwgaXNWZXJ0aWNhbDogdGhpcy52aWV3LmlzVmVydGljYWwsIHNob3dMYWJlbDogdGhpcy52aWV3LnNob3dMYWJlbCwgaXNGbG9hdDogdGhpcy52aWV3LmlzRmxvYXR9XHJcbiAgfVxyXG5cclxuICBhZGRPYnNlcnZlciA9IChmbjogRnVuY3Rpb24pOiB2b2lkID0+IHtcclxuICAgIHRoaXMub2JzZXJ2ZXJzLmFkZE9ic2VydmVyKGZuKTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IENvbnRyb2xsZXI7IiwiaW1wb3J0IENvbnRyb2xsZXIgZnJvbSBcIi4vY29udHJvbGxlci50c1wiO1xyXG5cclxuKGZ1bmN0aW9uKCQpIHtcclxuICBjb25zdCBjb25maWcgPSB7XHJcbiAgICBtaW5WYWx1ZTogMCxcclxuICAgIG1heFZhbHVlOiAxMDAwLFxyXG4gICAgc3RlcDogMSxcclxuICAgIGlzUmFuZ2U6IGZhbHNlLFxyXG4gICAgaXNWZXJ0aWNhbDogZmFsc2UsXHJcbiAgICBzaG93TGFiZWw6IGZhbHNlLFxyXG4gICAgaXNGbG9hdDogZmFsc2UsXHJcbiAgfTtcclxuXHJcbiAgY29uc3QgbWV0aG9kcyA9IHtcclxuICAgIGluaXQ6IGZ1bmN0aW9uKG9wdCkge1xyXG4gICAgICBpZiAoISQodGhpcykuZGF0YShcInNsaWRlclwiKSkge1xyXG4gICAgICAgIGNvbnN0IG5ld0NvbmZpZyA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoY29uZmlnKSk7XHJcbiAgICAgICAgY29uc3Qgc2xpZGVyID0gbmV3IENvbnRyb2xsZXIoLi4uT2JqZWN0LnZhbHVlcygkLmV4dGVuZChuZXdDb25maWcsIG9wdCkpKTtcclxuICAgICAgICAkKHRoaXMpLmRhdGEoXCJzbGlkZXJcIiwgc2xpZGVyKTtcclxuICAgICAgICBzbGlkZXIuYXBwZW5kKCQodGhpcykpO1xyXG4gICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIHVwZGF0ZTogZnVuY3Rpb24ob3B0KSB7XHJcbiAgICAgIGNvbnN0IHNsaWRlciA9ICQodGhpcykuZGF0YShcInNsaWRlclwiKTtcclxuICAgICAgc2xpZGVyLnVwZGF0ZShvcHQpO1xyXG4gICAgfSxcclxuXHJcbiAgICBnZXRDb25maWc6IGZ1bmN0aW9uKCkge1xyXG4gICAgICBjb25zdCBzbGlkZXIgPSAkKHRoaXMpLmRhdGEoXCJzbGlkZXJcIik7XHJcbiAgICAgIHJldHVybiBzbGlkZXIuZ2V0Q29uZmlnKCk7XHJcbiAgICB9LFxyXG5cclxuICAgIHNldFZhbHVlczogZnVuY3Rpb24ob3B0KSB7XHJcbiAgICAgIGNvbnN0IHNsaWRlciA9ICQodGhpcykuZGF0YShcInNsaWRlclwiKTtcclxuICAgICAgc2xpZGVyLnNldFZhbHVlcyhvcHQuY3VyTWluVmFsdWUsIG9wdC5jdXJNYXhWYWx1ZSk7XHJcbiAgICB9LFxyXG5cclxuICAgIGlucHV0c0F0dGFjaDogZnVuY3Rpb24ob3B0KSB7XHJcbiAgICAgIGNvbnN0IHNsaWRlciA9ICQodGhpcykuZGF0YShcInNsaWRlclwiKTtcclxuICAgICAgc2xpZGVyLmFkZE9ic2VydmVyKCgpID0+IHtcclxuICAgICAgICBvcHQubWluVmFsdWVJbi52YWwoc2xpZGVyLmdldFZhbHVlcygpWzBdKTtcclxuICAgICAgICBvcHQubWF4VmFsdWVJbi52YWwoc2xpZGVyLmdldFZhbHVlcygpWzFdKTtcclxuICAgICAgfSlcclxuICAgIH0sXHJcbiAgfVxyXG4gIFxyXG4gICQuZm4ub21mZ3NsaWRlciA9IGZ1bmN0aW9uKG1ldGhvZCkge1xyXG4gICAgaWYgKG1ldGhvZHNbbWV0aG9kXSkge1xyXG4gICAgICByZXR1cm4gbWV0aG9kc1ttZXRob2RdLmFwcGx5KHRoaXMsIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSkpO1xyXG4gICAgfSBlbHNlIGlmICh0eXBlb2YgbWV0aG9kID09PSAnb2JqZWN0JyB8fCAhbWV0aG9kKSB7XHJcbiAgICAgIHJldHVybiBtZXRob2RzLmluaXQuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICQuZXJyb3IoJ9Cc0LXRgtC+0LQgXCInICsgIG1ldGhvZCArICdcIiDQvdC1INC90LDQudC00LXQvSDQsiDQv9C70LDQs9C40L3QtSBqUXVlcnkubXlTaW1wbGVQbHVnaW4nKTtcclxuICAgIH1cclxuICB9O1xyXG59KShqUXVlcnkpOyJdLCJzb3VyY2VSb290IjoiIn0=